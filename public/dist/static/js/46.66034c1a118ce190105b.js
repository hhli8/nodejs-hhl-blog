webpackJsonp([46],{"3svJ":function(t,e){},"Z/HT":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("mvHQ"),o=a.n(s),n=a("PIXF"),i=a("Cdw0"),l=a("sjfE"),r=a("TIfe"),c={name:"alipaygoods",components:{uploadImg:l.a},mixins:[i.a],data:function(){return{multipleQueryGoodsTable:[],goodsParam:{},currentPage:1,pageNum:1,pageSize:10,tabledata:[],shelvesArr:[],showType:2,type:4,goodsSort:1,uploadUrl:"https://www.xiaoxiangyoupin.com/xxyp-manager/upload/uploadPic",uploadMsg:"https://www.xiaoxiangyoupin.com/xxyp-manager/mp/goods/uploadGoods",dialogFormVisible:!1,checked:!0,totalSize:0}},computed:{uploadHeader:function(){return{Token:Object(r.c)()}}},created:function(){this.getData()},methods:{getData:function(){var t=this,e={pageNum:this.currentPage,pageSize:this.pageSize};Object(n.k)(e).then(function(e){t.tabledata=e.data.list,t.totalSize=e.data.total})},btnType:function(t){var e="danger";return 1===t&&(e="success"),e},demove:function(t,e){var a=this;a.$confirm("你确定要删除当前数据吗？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){var t={ids:[]};t.ids.push(e.id),Object(n.c)(t).then(function(){a.getData(),a.$message({type:"success",message:"删除成功!"})})}).catch(function(t){a.deleteCancel(t)})},deleteCancel:function(t){this.$message({type:"info",message:"取消删除"})},onUpdateStatus:function(t,e){1===e.status?e.status=-1:e.status=1},addData:function(){this.dialogFormVisible=!0,this.goodsParam.status=1,this.goodsParam.tagStatus=-1},trueBtn:function(){var t={mpGoodsDTOs:[]},e=this;t.mpGoodsDTOs.push(e.goodsParam),Object(n.h)(t).then(function(t){e.$message({type:"success",message:t.message}),e.goodsParam={},e.getData()}).catch(),this.dialogFormVisible=!1},cancelBtn:function(){this.dialogFormVisible=!1},publishGoods:function(){var t=this,e={};e.mpGoodsDTOs=JSON.parse(o()(t.tabledata)),Object(n.h)(e).then(function(e){t.$message({type:"success",message:e.message}),t.getData()}).catch()},handleAvatarSuccessAdd:function(t){this.$message({type:"success",message:"上传成功"}),this.getData()},handleCurrentChange:function(t){this.pageNum=t,this.currentPage=t,this.getData()},handleSizeChange:function(t){this.pageSize=t,this.getData()},handleSelectionChangeGoods:function(t){this.multipleQueryGoodsTable=t},deleteAll:function(){for(var t=this,e={ids:[]},a=0;a<t.multipleQueryGoodsTable.length;a++)e.ids.push(t.multipleQueryGoodsTable[a].id);Object(n.c)(e).then(function(e){t.$message({type:"success",message:e.message}),t.getData()}).catch()}}},u={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"alipaygoods"},[a("div",{staticClass:"header"},[a("el-row",{attrs:{gutter:20}},[a("el-col",{staticClass:"rg",attrs:{span:6}},[a("div",{staticClass:"grid-content bg-purple btn-right"},[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:t.deleteAll}},[t._v("批量删除")]),t._v(" "),a("el-upload",{staticClass:"avatar-uploader",attrs:{headers:t.uploadHeader,action:t.uploadMsg,"show-file-list":!1,"on-success":t.handleAvatarSuccessAdd}},[a("el-button",{attrs:{plain:"",icon:"el-icon-upload2"}},[t._v("上传")])],1),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:t.publishGoods}},[t._v("发布")]),t._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:t.addData}},[t._v("新增")])],1)])],1)],1),t._v(" "),a("el-table",{ref:"multipleQueryGoodsTable",staticClass:"lists",attrs:{border:"",data:t.tabledata,"empty-text":"暂无数据"},on:{"selection-change":t.handleSelectionChangeGoods}},[a("el-table-column",{attrs:{type:"selection",width:"50",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"*商品标题",prop:"title",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"price",label:"*商品价格（￥）",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[t._v(t._s((e.row.price/100).toFixed(2)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"img",label:"*商品图片",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:e.row.img,fit:"contain"},on:{click:function(a){t.$store.dispatch("openImgPreview",{url:e.row.img})}}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"gotoUrl",label:"商品顺序",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{clearable:""},model:{value:e.row.goodsSort,callback:function(a){t.$set(e.row,"goodsSort",a)},expression:"scope.row.goodsSort"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"",label:"商品标签",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-radio-group",{model:{value:e.row.tagStatus,callback:function(a){t.$set(e.row,"tagStatus",a)},expression:"scope.row.tagStatus"}},[a("el-radio",{attrs:{label:-1}},[t._v("无")]),t._v(" "),a("el-radio",{attrs:{label:1}},[a("el-input",{staticStyle:{width:"100px"},attrs:{placeholder:"商品标签",clearable:""},model:{value:e.row.tag,callback:function(a){t.$set(e.row,"tag",a)},expression:"scope.row.tag"}})],1)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini",type:t.btnType(e.row.status)},on:{click:function(a){t.onUpdateStatus(e.$index,e.row)}}},[t._v(t._s(1===e.row.status?"点击停用":"点击启用"))]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){t.demove(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:t.totalSize>0,expression:"totalSize>0"}],staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":t.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalSize},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1),t._v(" "),a("el-dialog",{attrs:{visible:t.dialogFormVisible,center:"",width:"35%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{staticStyle:{width:"80%","margin-left":"8%"}},[a("el-form-item",{attrs:{label:"新增商品商品号"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.goodsParam.skuId,callback:function(e){t.$set(t.goodsParam,"skuId",e)},expression:"goodsParam.skuId"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"新增商品顺序"}},[a("el-input",{staticStyle:{width:"200px"},model:{value:t.goodsParam.goodsSort,callback:function(e){t.$set(t.goodsParam,"goodsSort",e)},expression:"goodsParam.goodsSort"}})],1),t._v(" "),a("div",{staticClass:"oBtn"},[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:t.trueBtn}},[t._v("确定")]),t._v(" "),a("el-button",{attrs:{size:"medium",type:"warning"},on:{click:t.cancelBtn}},[t._v("取消")])],1)],1)],1)],1)},staticRenderFns:[]};var d=a("VU/8")(c,u,!1,function(t){a("3svJ")},null,null);e.default=d.exports}});