webpackJsonp([37],{KTiY:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=i("BO1k"),a=i.n(l),s=i("d7EF"),o=i.n(s),r=i("Dd8w"),n=i.n(r),c=i("Xxa5"),f=i.n(c),p=i("exGp"),d=i.n(p),u=i("XpEf"),m={name:"topic",components:{},props:{},data:function(){return{topicClassifyList:[{classIfy:"",sourts:""}],recomClassify:[],trillTopicUrl:[""],bookTopicUrl:[""],loading:!1,pageSize:20,totalSize:0,currentPage:1,editId:0,chartId:null,isNewTopic:!0,formClassifyUpdate:{id:"",gender:"",classifyName:"",classifyImgUrl:"",sourt:"",status:""},formDefault:{defBackUrl:"",topicRefresh:"",noteRefresh:""},formSetUp:{},usersForm:{topicId:"",topicName:"",userType:"",classifyRelativeId:"",classifyId:"",hot:"",status:""},formEditing:{topicName:"",topicImgUrl:"",isHot:"",topicOrder:"",remark:"",reffClassify:[]},formModifySort:{sort:""},dialogVisibleDelete:!1,dialogFormVisibleNew:!1,dialogFormVisibleDefault:!1,dialogFormVisibleNewTips:!1,dialogFormVisibleModifySort:!1,formLabelWidth:"120px",formNew:{gender:"",classifyName:"",classifyImgUrl:"",source:""},optionTopicAll:[{value:0,label:"运营配置"},{value:1,label:"用户上传"}],optionTopiclass:[],optionIsPopular:[{value:1,label:"是"},{value:0,label:"否"}],optionEnabledState:[{value:1,label:"启用"},{value:-1,label:"停用"}],tableData:[]}},computed:{},mounted:function(){this.topicClassify(),this.settingList(),this.topicList(),this.reffClassify()},watch:{"formClassifyUpdate.id":function(e){if(e){var t=this.optionTopiclass.filter(function(t){return e===t.id})[0],i=t.classifyName.split("-");this.formClassifyUpdate={id:t.id,gender:String(t.gender),classifyName:i[i.length-1],classifyImgUrl:t.classifyImgUrl,sourt:t.sourt,status:String(t.status)}}}},methods:{classifyUpdate:function(){var e=this;Object(u.f)(this.formClassifyUpdate).then(function(t){e.$message({message:"恭喜你，编辑话题分类成功",type:"success"}),e.topicClassify()})},topicLinkNewaFan:function(e){1===e?this.bookTopicUrl.push(""):2===e?this.trillTopicUrl.push(""):3===e&&this.topicClassifyList.push({classIfy:"",sourts:""})},topicLinkNewDelete:function(e,t){1===t?this.bookTopicUrl.splice(e,1):2===t?this.trillTopicUrl.splice(e,1):3===t&&this.topicClassifyList.splice(e,1)},topicClassifyOrder:function(){var e=this;Object(u.F)({id:this.chartId,source:this.formModifySort.sort}).then(function(t){e.$message({message:"恭喜你，修改分类排序成功",type:"success"}),e.topicClassify()})},topicNoteList:function(e,t){var i=this;Object(u.J)({noteId:e.id,derive:Boolean(t),currentPage:1},t).then(function(l){if(t||200!==l.code)i.exportExell(l);else{if(0===l.dataList.length)return void i.$message.error("暂无数据");l.totalSize-0>5e4?i.$message.warning("导出数据大于5万条，请跳转管理笔记筛选后在导出！"):i.topicNoteExport(e)}})},topicNoteExport:function(e){var t=this;this.$confirm("确定要导出数据?","导出数据",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(d()(f.a.mark(function i(){return f.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:t.topicNoteList(e,1);case 1:case"end":return i.stop()}},i,t)}))).catch(function(){t.$message.info("已取消操作")})},exportExell:function(e){var t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document;charset=utf-8"}),i=document.createElement("a"),l=window.URL.createObjectURL(t);i.href=l,i.download=Date.now()+".xls",document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(l)},settingSave:function(){var e=this;Object(u.B)(this.formSetUp).then(function(t){e.settingList(),e.$message({message:"恭喜你，设置背景图成功",type:"success"})})},settingList:function(){var e=this;Object(u.A)().then(function(t){e.formSetUp=t.data})},classifyAdd:function(){var e=this,t=this.formNew;Object(u.e)(t).then(function(t){e.$message({message:"恭喜你,新增话题成功",type:"success"}),e.topicClassify()})},topicEdit:function(e){var t,i=this,l=this.formEditing,a=this.bookTopicUrl,s=this.trillTopicUrl,o=this.topicClassifyList,r=[],n=[];"editing"===e?(t=this.editId,l.chartId=this.chartId):"newTips"===e&&(t=0),o.forEach(function(e){e.classIfy&&r.push(e.classIfy),e.sourts&&n.push(e.sourts)}),l.id=t,l.bookTopicUrl=a.join(","),l.trillTopicUrl=s.join(","),l.classIfy=r,l.sourts=n,Object(u.H)(l).then(function(t){i.$message({message:"恭喜你，"+("editing"===e?"编辑":"新建")+"成功",type:"success"}),i.topicList(),i.formEditing.chartId=""})},topicBookup:function(e){var t=this;Object(u.D)({id:this.editId,status:e}).then(function(i){t.$message({message:"恭喜你，"+(e<0?"停用":"启用")+"成功",type:"success"}),t.topicList()})},topicDelete:function(e){var t=this;Object(u.G)({topicId:this.editId}).then(function(e){t.$message({message:"恭喜你，删除成功",type:"success"}),t.topicList()})},topicList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.loading=!0,Object(u.I)(n()({derive:Boolean(t),currentPage:this.currentPage},this.usersForm),t).then(function(i){if(e.loading=!1,t){var l=new Blob([i],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document;charset=utf-8"}),s=document.createElement("a"),r=window.URL.createObjectURL(l);s.href=r,s.download="话题管理列表.xls",document.body.appendChild(s),s.click(),document.body.removeChild(s),window.URL.revokeObjectURL(r)}else{if(0===i.dataList.length)return e.$message.error("暂无数据"),void(e.tableData=[]);e.totalSize=i.totalSize,e.pageSize=i.pageSize;var n=i.dataList,c=!0,f=!1,p=void 0;try{for(var d,u=a()(n.entries());!(c=(d=u.next()).done);c=!0){var m=d.value,h=o()(m,2),v=h[0],b=h[1];b.userType=b.userType?"用户上传":"运营配置",b.isHot=b.isHot?"是":"否",b.topicStatus=b.status>0?"启用":"停用",b.orderNum=v+1}}catch(e){f=!0,p=e}finally{try{!c&&u.return&&u.return()}finally{if(f)throw p}}e.tableData=n}}).catch(function(t){e.loading=!1,e.$message.error(t)})},topicClassify:function(){var e=this;Object(u.E)({id:null}).then(function(t){var i=t.data,l="";i.forEach(function(e){1===e.gender?(l="男",e.classifyName=l+"-"+e.classifyName):2===e.gender&&(l="女",e.classifyName=l+"-"+e.classifyName)}),e.optionTopiclass=i})},reffClassify:function(){var e=this;Object(u.x)().then(function(t){var i=t.data,l="";i.forEach(function(e){1===e.gender?(l="男",e.classifyName=l+"-"+e.classifyName):2===e.gender&&(l="女",e.classifyName=l+"-"+e.classifyName)}),e.recomClassify=i})},beforeUpload:function(e){if(!(e.size/1024<5e3))return this.$message.error("上传图片大小不能超过 5000kb!"),!1},myImgUpload:function(e){var t=this,i=e.file,l=new FormData;l.append("file",i),Object(u.K)(l).then(function(e){t.formDefault.defBackUrl=e.data,t.formEditing.topicImgUrl=e.data,t.formNew.classifyImgUrl=e.data,t.formClassifyUpdate.classifyImgUrl=e.data,t.$message({message:"恭喜你，图片上传成功",type:"success"})}).catch(function(e){console.log(e),t.$message.error("图片上传失败"+e)})},uploadUrl:function(){return"https://www.xiaoxiangyoupin.com/xxyp-manager/xxyp-manager/upload/uploadPic"},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e),this.topicList()},handleEdit:function(e,t,i){switch(this.formEditing={topicName:"",topicImgUrl:"",isHot:"",topicOrder:"",remark:"",reffClassify:[]},this.bookTopicUrl=[""],this.trillTopicUrl=[""],this.topicClassifyList=[{classIfy:"",sourts:""}],this.formClassifyUpdate={id:"",gender:"",classifyName:"",classifyImgUrl:"",sourt:"",status:""},this.formDefault.defBackUrl="",this.formEditing.topicImgUrl="",this.formNew.classifyImgUrl="",this.formClassifyUpdate.classifyImgUrl="",this.editId=t&&t.id,this.chartId=t&&t.chartId,i){case 1:this.dialogVisibleDelete=!0;break;case 2:var l=t.status;l=l>0?-2:1,this.topicBookup(l);break;case 3:this.isNewTopic=!1;var s=t.classifyIds&&t.classifyIds.split(",")||[],r=t.classifyOrders&&t.classifyOrders.split(",")||[],n=t.classReffIfyIds&&t.classReffIfyIds.split(",")||[],c=[],f=!0,p=!1,d=void 0;try{for(var u,m=a()(n.entries());!(f=(u=m.next()).done);f=!0){var h=u.value,v=o()(h,2),b=v[0],g=v[1];n[b]=g-0}}catch(e){p=!0,d=e}finally{try{!f&&m.return&&m.return()}finally{if(p)throw d}}this.bookTopicUrl=t.bookTopicUrl&&t.bookTopicUrl.split(",")||[""],this.trillTopicUrl=t.trillTopicUrl&&t.trillTopicUrl.split(",")||[""];for(var y=s.length>r.length?s.length:r.length,_=0;_<y;_++)c.push({classIfy:"",sourts:""});var w=!0,k=!1,U=void 0;try{for(var C,N=a()(s.entries());!(w=(C=N.next()).done);w=!0){var I=C.value,x=o()(I,2),$=x[0],L=x[1];c[$].classIfy=L-0}}catch(e){k=!0,U=e}finally{try{!w&&N.return&&N.return()}finally{if(k)throw U}}var T=!0,E=!1,F=void 0;try{for(var S,D=a()(r.entries());!(T=(S=D.next()).done);T=!0){var V=S.value,j=o()(V,2),O=j[0],z=j[1];c[O].sourts=z}}catch(e){E=!0,F=e}finally{try{!T&&D.return&&D.return()}finally{if(E)throw F}}c.length>0&&(this.topicClassifyList=c),this.formEditing={topicName:t.topicName,topicImgUrl:t.topicImgUrl,isHot:"否"===t.isHot?"0":"1",topicOrder:t.topicOrder,remark:t.remark,reffClassify:n},this.dialogFormVisibleNewTips=!0;break;case 4:this.$router.push({name:"runnotes",query:{type:"topic",id:this.editId}});break;case 5:this.dialogFormVisibleNew=!0;break;case 6:this.dialogFormVisibleDefault=!0;break;case 7:this.isNewTopic=!0,this.dialogFormVisibleNewTips=!0;break;case 8:this.topicNoteList(t,0);break;case 9:this.dialogFormVisibleModifySort=!0;break;case 10:this.open()}},handleSure:function(e){var t=this.formEditing;switch(e){case 2:this.topicDelete(),this.dialogVisibleDelete=!1;break;case 3:if(!this.formNew.classifyName)return void this.$message.error("请输入话题分类名称");this.classifyAdd(),this.dialogFormVisibleNew=!1;break;case 4:var i=this.formDefault;if(!i.defBackUrl)return void this.$message.error("请上传默认背景图");if(!i.topicRefresh)return void this.$message.error("请输入热门话题刷新时间");if(!i.noteRefresh)return void this.$message.error("请输入话题笔记刷新时间");this.formSetUp=n()({},this.formSetUp,i),this.settingSave(),this.dialogFormVisibleDefault=!1;break;case 5:var l=this.isNewTopic,s=this.topicClassifyList;if(!t.topicName)return void this.$message.error("请输入话题名称");var o=!0,r=!1,c=void 0;try{for(var f,p=a()(s);!(o=(f=p.next()).done);o=!0){var d=f.value;if(d.classIfy&&""===d.sourts)return void this.$message.error("请输入排序");if(""===d.classIfy&&d.sourts)return void this.$message.error("话题分类")}}catch(e){r=!0,c=e}finally{try{!o&&p.return&&p.return()}finally{if(r)throw c}}l?this.topicEdit("newTips"):this.topicEdit("editing"),this.dialogFormVisibleNewTips=!1;break;case 6:if(!this.formClassifyUpdate.id)return void this.$message.error("请选择要编辑的话题分类");this.classifyUpdate(),this.dialogFormVisibleModifySort=!1}},open:function(){var e=this;this.$confirm("确定要导出数据?","导出数据",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(d()(f.a.mark(function t(){return f.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:0===e.tableData.length?e.$message.warning("暂无数据，导出失败"):e.totalSize-0>5e4?e.$message.warning("导出数据大于5万条，请筛选后在导出！"):e.topicList(1);case 1:case"end":return t.stop()}},t,e)}))).catch(function(){e.$message.info("已取消操作")})},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})}}},h={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"faceworld-topic"},[i("el-container",[i("el-header",[i("div",{staticClass:"hotsearch-nav"},[i("h3",[e._v("话题管理")]),e._v(" "),i("ul",{staticClass:"hotsearch-nav-right"},[i("li",{on:{click:function(t){e.handleEdit(null,null,9)}}},[e._v("编辑话题分类")]),e._v(" "),i("li",{on:{click:function(t){e.handleEdit(null,null,5)}}},[e._v("新增话题分类")]),e._v(" "),i("li",{on:{click:function(t){e.handleEdit(null,null,6)}}},[e._v("默认设置")]),e._v(" "),i("li",{on:{click:function(t){e.handleEdit(null,null,7)}}},[e._v("+新建")])])])]),e._v(" "),i("el-main",[i("div",{staticClass:"topic-header"},[i("el-row",{attrs:{gutter:15}},[i("el-col",{attrs:{span:4}},[i("el-input",{attrs:{placeholder:"话题id",clearable:""},model:{value:e.usersForm.topicId,callback:function(t){e.$set(e.usersForm,"topicId",t)},expression:"usersForm.topicId"}})],1),e._v(" "),i("el-col",{attrs:{span:4}},[i("el-input",{attrs:{placeholder:"话题名称",clearable:""},model:{value:e.usersForm.topicName,callback:function(t){e.$set(e.usersForm,"topicName",t)},expression:"usersForm.topicName"}})],1),e._v(" "),i("el-col",{attrs:{span:3}},[i("el-select",{attrs:{placeholder:"话题配置",clearable:""},model:{value:e.usersForm.userType,callback:function(t){e.$set(e.usersForm,"userType",t)},expression:"usersForm.userType"}},e._l(e.optionTopicAll,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("el-col",{attrs:{span:3}},[i("el-select",{attrs:{placeholder:"推荐内容分类",clearable:""},model:{value:e.usersForm.classifyRelativeId,callback:function(t){e.$set(e.usersForm,"classifyRelativeId",t)},expression:"usersForm.classifyRelativeId"}},e._l(e.recomClassify,function(e){return i("el-option",{key:e.id,attrs:{label:e.classifyName,value:e.id}})}))],1),e._v(" "),i("el-col",{attrs:{span:3}},[i("el-select",{attrs:{placeholder:"话题分类",clearable:""},model:{value:e.usersForm.classifyId,callback:function(t){e.$set(e.usersForm,"classifyId",t)},expression:"usersForm.classifyId"}},e._l(e.optionTopiclass,function(e){return i("el-option",{key:e.id,attrs:{label:e.classifyName,value:e.id}})}))],1),e._v(" "),i("el-col",{attrs:{span:3}},[i("el-select",{attrs:{placeholder:"是否热门",clearable:""},model:{value:e.usersForm.hot,callback:function(t){e.$set(e.usersForm,"hot",t)},expression:"usersForm.hot"}},e._l(e.optionIsPopular,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),i("el-col",{attrs:{span:3}},[i("el-select",{attrs:{placeholder:"启用状态",clearable:""},model:{value:e.usersForm.status,callback:function(t){e.$set(e.usersForm,"status",t)},expression:"usersForm.status"}},e._l(e.optionEnabledState,function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),i("el-row",{staticClass:"mt-10",attrs:{gutter:10}},[i("el-col",{attrs:{span:2}},[i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){e.topicList(0)}}},[e._v("查询")])],1),e._v(" "),i("el-col",{attrs:{span:1}},[i("el-button",{attrs:{plain:"",icon:"el-icon-upload2"},on:{click:function(t){e.handleEdit(null,null,10)}}},[e._v("导出")])],1)],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""}},[i("el-table-column",{attrs:{prop:"orderNum",label:"序号",align:"center",width:"90"}}),e._v(" "),i("el-table-column",{attrs:{prop:"id",label:"话题id",align:"center",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{prop:"topicName",label:"话题名称",align:"center",width:"120"}}),e._v(" "),i("el-table-column",{attrs:{prop:"userType",label:"话题配置",align:"center",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{label:"话题背景图",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.topicImgUrl,fit:"contain"},on:{click:function(i){e.$store.dispatch("openImgPreview",{url:t.row.topicImgUrl})}}})]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"classifyName",label:"话题分类",align:"center",width:"100"}}),e._v(" "),i("el-table-column",{attrs:{prop:"classifyReffName",label:"推荐内容分类",align:"center",width:"110"}}),e._v(" "),i("el-table-column",{attrs:{prop:"isHot",label:"是否热门",align:"center",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{prop:"topicOrder",label:"热门顺序",align:"center",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{prop:"topicStatus",label:"启用状态",align:"center",width:"80"}}),e._v(" "),i("el-table-column",{attrs:{label:"操作",fixed:"right","min-width":"600",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){e.handleEdit(t.$index,t.row,1)}}},[e._v("删除")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){e.handleEdit(t.$index,t.row,2)}}},[e._v(e._s(t.row.status>0?"停用":"启用"))]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){e.handleEdit(t.$index,t.row,3)}}},[e._v("编辑")]),e._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){e.handleEdit(t.$index,t.row,4)}}},[e._v("管理笔记")]),e._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){e.handleEdit(t.$index,t.row,8)}}},[e._v("笔记导出")])]}}])})],1)],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.totalSize>0,expression:"totalSize>0"}],staticClass:"pagination-container"},[i("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1),e._v(" "),i("div",{staticClass:"faceworld"},[i("el-dialog",{attrs:{title:"提示",visible:e.dialogVisibleDelete,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisibleDelete=t}}},[i("span",[e._v("确定要删除热该话题吗？")]),e._v(" "),i("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogVisibleDelete=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSure(2)}}},[e._v("确定")])],1)]),e._v(" "),i("el-dialog",{attrs:{title:"新增话题分类",visible:e.dialogFormVisibleNew},on:{"update:visible":function(t){e.dialogFormVisibleNew=t}}},[i("el-form",{attrs:{model:e.formNew}},[i("el-form-item",{attrs:{label:"性别","label-width":e.formLabelWidth}},[i("el-select",{attrs:{placeholder:"请选择性别",clearable:""},model:{value:e.formNew.gender,callback:function(t){e.$set(e.formNew,"gender",t)},expression:"formNew.gender"}},[i("el-option",{attrs:{label:"男",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"女",value:"2"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off",placeholder:""},model:{value:e.formNew.classifyName,callback:function(t){e.$set(e.formNew,"classifyName",t)},expression:"formNew.classifyName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"话题背景图","label-width":e.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off",placeholder:"请上传图片或手动输入图片链接"},model:{value:e.formNew.classifyImgUrl,callback:function(t){e.$set(e.formNew,"classifyImgUrl",t)},expression:"formNew.classifyImgUrl"}}),e._v(" "),i("div",{staticClass:"editingUploadBgc"},[i("el-upload",{ref:"bgcUpload",staticClass:"upload-demo",attrs:{"show-file-list":!1,action:e.uploadUrl(),accept:".jpg,.jpeg,.png","http-request":e.myImgUpload,"before-upload":e.beforeUpload}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传"),i("i",{staticClass:"el-icon-upload el-icon--right"})])],1)],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"排序","label-width":e.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off",placeholder:"男女分类分开排序",type:"number"},model:{value:e.formNew.source,callback:function(t){e.$set(e.formNew,"source",t)},expression:"formNew.source"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisibleNew=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSure(3)}}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"默认设置",visible:e.dialogFormVisibleDefault},on:{"update:visible":function(t){e.dialogFormVisibleDefault=t}}},[i("div",{staticClass:"uploadBgc"},[i("p",[e._v("默认背景图")]),e._v(" "),i("el-upload",{ref:"bgcUpload",staticClass:"upload-demo",attrs:{drag:"",action:e.uploadUrl(),"show-file-list":!1,accept:".jpg,.jpeg,.png","http-request":e.myImgUpload,"before-upload":e.beforeUpload}},[i("i",{staticClass:"el-icon-upload"}),e._v(" "),i("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或\n\t\t\t\t\t\t"),i("em",[e._v("点击上传")])]),e._v(" "),i("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])])],1),e._v(" "),i("el-input",{attrs:{autocomplete:"off",placeholder:"图片链接"},model:{value:e.formDefault.defBackUrl,callback:function(t){e.$set(e.formDefault,"defBackUrl",t)},expression:"formDefault.defBackUrl"}}),e._v(" "),i("p",[e._v("热门话题刷新时间")]),e._v(" "),i("el-input",{attrs:{autocomplete:"off",placeholder:"热门话题刷新时间",type:"number"},model:{value:e.formDefault.topicRefresh,callback:function(t){e.$set(e.formDefault,"topicRefresh",t)},expression:"formDefault.topicRefresh"}}),e._v(" "),i("p",[e._v("话题笔记刷新时间")]),e._v(" "),i("el-input",{attrs:{autocomplete:"off",placeholder:"请填写整数（单位：小时）",type:"number"},model:{value:e.formDefault.noteRefresh,callback:function(t){e.$set(e.formDefault,"noteRefresh",t)},expression:"formDefault.noteRefresh"}}),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisibleDefault=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSure(4)}}},[e._v("确 定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:e.isNewTopic?"新建话题":"编辑话题",visible:e.dialogFormVisibleNewTips},on:{"update:visible":function(t){e.dialogFormVisibleNewTips=t}}},[i("el-form",{attrs:{model:e.formEditing,"label-width":e.formLabelWidth}},[i("el-form-item",{attrs:{label:"话题名称"}},[i("el-input",{attrs:{autocomplete:"off",placeholder:""},model:{value:e.formEditing.topicName,callback:function(t){e.$set(e.formEditing,"topicName",t)},expression:"formEditing.topicName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"话题背景图"}},[i("el-input",{attrs:{autocomplete:"off",placeholder:"请上传图片或手动输入图片链接"},model:{value:e.formEditing.topicImgUrl,callback:function(t){e.$set(e.formEditing,"topicImgUrl",t)},expression:"formEditing.topicImgUrl"}}),e._v(" "),i("div",{staticClass:"editingUploadBgc"},[i("el-upload",{ref:"bgcUpload",staticClass:"upload-demo",attrs:{"show-file-list":!1,action:e.uploadUrl(),accept:".jpg,.jpeg,.png","http-request":e.myImgUpload,"before-upload":e.beforeUpload}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传"),i("i",{staticClass:"el-icon-upload el-icon--right"})])],1)],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"是否热门"}},[i("el-select",{attrs:{placeholder:"请选择发布状态",clearable:""},model:{value:e.formEditing.isHot,callback:function(t){e.$set(e.formEditing,"isHot",t)},expression:"formEditing.isHot"}},[i("el-option",{attrs:{label:"是",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"否",value:"0"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"热门排序"}},[i("el-input",{attrs:{autocomplete:"off",placeholder:"请输入阿拉伯数字",type:"number"},model:{value:e.formEditing.topicOrder,callback:function(t){e.$set(e.formEditing,"topicOrder",t)},expression:"formEditing.topicOrder"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"话题描述"}},[i("el-input",{attrs:{type:"textarea"},model:{value:e.formEditing.remark,callback:function(t){e.$set(e.formEditing,"remark",t)},expression:"formEditing.remark"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"推荐内容分类"}},[i("el-select",{attrs:{placeholder:"请选择推荐内容分类",multiple:""},model:{value:e.formEditing.reffClassify,callback:function(t){e.$set(e.formEditing,"reffClassify",t)},expression:"formEditing.reffClassify"}},e._l(e.recomClassify,function(e){return i("el-option",{key:e.id,attrs:{label:e.classifyName,value:e.id}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"话题分类"}},[i("div",{staticClass:"topicLinkNew"},[i("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus",plain:""},on:{click:function(t){e.topicLinkNewaFan(3)}}},[e._v("新增")])],1),e._v(" "),e._l(e.topicClassifyList,function(t,l){return i("div",{key:l,staticClass:"recoClassify"},[i("el-col",{attrs:{span:11}},[i("el-select",{staticStyle:{width:"100%"},attrs:{placeholder:"请选择话题分类",clearable:""},model:{value:e.topicClassifyList[l].classIfy,callback:function(t){e.$set(e.topicClassifyList[l],"classIfy",t)},expression:"topicClassifyList[index].classIfy"}},e._l(e.optionTopiclass,function(e){return i("el-option",{key:e.id,attrs:{label:e.classifyName,value:e.id}})}))],1),e._v(" "),i("el-col",{staticClass:"line",attrs:{span:2}},[e._v("-")]),e._v(" "),i("el-col",{attrs:{span:11}},[i("el-input",{attrs:{autocomplete:"off",placeholder:"该话题在该分类下排序",clearable:"",type:"number"},model:{value:e.topicClassifyList[l].sourts,callback:function(t){e.$set(e.topicClassifyList[l],"sourts",t)},expression:"topicClassifyList[index].sourts"}})],1),e._v(" "),i("el-col",{attrs:{span:11}},[l>0?i("i",{staticClass:"el-icon-delete",on:{click:function(t){e.topicLinkNewDelete(l,3)}}}):e._e()])],1)})],2),e._v(" "),i("el-form-item",{attrs:{label:"小红书话题链接"}},[i("div",{staticClass:"topicLinkNew"},[i("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus",plain:""},on:{click:function(t){e.topicLinkNewaFan(1)}}},[e._v("新增")])],1),e._v(" "),e._l(e.bookTopicUrl,function(t,l){return i("div",{key:l,staticClass:"topicInputNew"},[i("el-input",{attrs:{autocomplete:"off",placeholder:"请输入小红书话题链接"},model:{value:e.bookTopicUrl[l],callback:function(t){e.$set(e.bookTopicUrl,l,t)},expression:"bookTopicUrl[index]"}}),e._v(" "),l>0?i("i",{staticClass:"el-icon-delete",on:{click:function(t){e.topicLinkNewDelete(l,1)}}}):e._e()],1)})],2),e._v(" "),i("el-form-item",{attrs:{label:"抖音话题链接"}},[i("div",{staticClass:"topicLinkNew"},[i("el-button",{attrs:{type:"success",icon:"el-icon-circle-plus",plain:""},on:{click:function(t){e.topicLinkNewaFan(2)}}},[e._v("新增")])],1),e._v(" "),e._l(e.trillTopicUrl,function(t,l){return i("div",{key:l,staticClass:"topicInputNew"},[i("el-input",{attrs:{autocomplete:"off",placeholder:"请输入抖音话题链接"},model:{value:e.trillTopicUrl[l],callback:function(t){e.$set(e.trillTopicUrl,l,t)},expression:"trillTopicUrl[index]"}}),e._v(" "),l>0?i("i",{staticClass:"el-icon-delete",on:{click:function(t){e.topicLinkNewDelete(l,2)}}}):e._e()],1)})],2)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisibleNewTips=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSure(5)}}},[e._v("确定")])],1)],1),e._v(" "),i("el-dialog",{attrs:{title:"编辑话题分类",visible:e.dialogFormVisibleModifySort},on:{"update:visible":function(t){e.dialogFormVisibleModifySort=t}}},[i("el-form",{ref:"form",attrs:{model:e.formClassifyUpdate}},[i("el-form-item",{attrs:{label:"话题分类","label-width":e.formLabelWidth}},[i("el-select",{attrs:{placeholder:"请选择编辑的话题分类"},model:{value:e.formClassifyUpdate.id,callback:function(t){e.$set(e.formClassifyUpdate,"id",t)},expression:"formClassifyUpdate.id"}},e._l(e.optionTopiclass,function(e){return i("el-option",{key:e.id,attrs:{label:e.classifyName,value:e.id}})}))],1),e._v(" "),i("el-form-item",{attrs:{label:"性别","label-width":e.formLabelWidth}},[i("el-select",{attrs:{placeholder:"请选择性别",clearable:""},model:{value:e.formClassifyUpdate.gender,callback:function(t){e.$set(e.formClassifyUpdate,"gender",t)},expression:"formClassifyUpdate.gender"}},[i("el-option",{attrs:{label:"男",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"女",value:"2"}})],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"名称","label-width":e.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off",placeholder:""},model:{value:e.formClassifyUpdate.classifyName,callback:function(t){e.$set(e.formClassifyUpdate,"classifyName",t)},expression:"formClassifyUpdate.classifyName"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"话题背景图","label-width":e.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off",placeholder:"请上传图片或手动输入图片链接"},model:{value:e.formClassifyUpdate.classifyImgUrl,callback:function(t){e.$set(e.formClassifyUpdate,"classifyImgUrl",t)},expression:"formClassifyUpdate.classifyImgUrl"}}),e._v(" "),i("div",{staticClass:"editingUploadBgc"},[i("el-upload",{ref:"bgcUpload",staticClass:"upload-demo",attrs:{"show-file-list":!1,action:e.uploadUrl(),accept:".jpg,.jpeg,.png","http-request":e.myImgUpload,"before-upload":e.beforeUpload}},[i("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传"),i("i",{staticClass:"el-icon-upload el-icon--right"})])],1)],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"排序","label-width":e.formLabelWidth}},[i("el-input",{attrs:{autocomplete:"off",placeholder:"",type:"number"},model:{value:e.formClassifyUpdate.sourt,callback:function(t){e.$set(e.formClassifyUpdate,"sourt",t)},expression:"formClassifyUpdate.sourt"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"是否停用","label-width":e.formLabelWidth}},[i("el-select",{attrs:{placeholder:"是否停用",clearable:""},model:{value:e.formClassifyUpdate.status,callback:function(t){e.$set(e.formClassifyUpdate,"status",t)},expression:"formClassifyUpdate.status"}},[i("el-option",{attrs:{label:"停用",value:"-1"}}),e._v(" "),i("el-option",{attrs:{label:"启用",value:"1"}}),e._v(" "),i("el-option",{attrs:{label:"删除",value:"-2"}})],1)],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisibleModifySort=!1}}},[e._v("取 消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSure(6)}}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var v=i("VU/8")(m,h,!1,function(e){i("mxbz"),i("bzA3")},"data-v-5e4ac538",null);t.default=v.exports},bzA3:function(e,t){},mxbz:function(e,t){}});