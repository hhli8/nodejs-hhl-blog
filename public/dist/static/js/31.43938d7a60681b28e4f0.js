webpackJsonp([31],{"8iGK":function(t,e,a){"use strict";e.e=function(t){return Object(o.a)({url:"/search/add",method:"post",data:t})},e.c=function(t){return Object(o.a)({url:"/search/getList",method:"post",data:t})},e.i=function(t){return Object(o.a)({url:"upload/uploadPic",method:"post",data:t})},e.h=function(t){return Object(o.a)({url:"search/import",method:"post",data:t})},e.f=function(t){return Object(o.a)({url:"search/pvwGoods",method:"post",data:t})},e.g=function(t){return Object(o.a)({url:"search/haitao/pvwGoods",method:"post",data:t})},e.a=function(t){return Object(o.a)({url:"order/selectSubscribeList",method:"post",data:t})},e.b=function(t){return Object(o.a)({url:"order/exportSubscribeList",method:"post",responseType:"blob",data:t})},e.d=function(t){return Object(o.a)({url:"search/getSuggest",method:"post",data:t})};var o=a("vLgD")},HYmN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("8iGK"),n={name:"appointment",data:function(){return{input1:"",value2:"",currentPage:1,pageSize:20,totalNum:10,showPaging:!1,tableData2:[]}},methods:{tableRowClassName:function(t){t.row;var e=t.rowIndex;return 1===e?"warning-row":3===e?"success-row":""},search:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(2===this.value2.length){var e=this.timeFilter(this.value2[0]),a=this.timeFilter(this.value2[1]),o={goodsCode:this.input1,startTime:e,endTime:a,currentPage:t,pageSize:this.pageSize};this.appointmentList(o)}else this.$message.error("预约开始时间和结束时间不能为空")},appointmentList:function(t){var e=this;Object(o.a)(t).then(function(t){console.log("查询列表",t),e.totalNum=10*t.totalPage,t.dataList.forEach(function(t){1===t.bookStatus?t.bookStatus="预约":-1===t.bookStatus&&(t.bookStatus="取消预约")}),e.tableData2=t.dataList,e.showPaging=!0}).catch(function(t){e.$message.error(t)})},exportSubscribeList:function(){var t=this;if(2===this.value2.length){var e=this.timeFilter(this.value2[0]),a=this.timeFilter(this.value2[1]),n={goodsCode:this.input1,startTime:e,endTime:a,currentPage:this.currentPage,pageSize:this.pageSize};Object(o.b)(n).then(function(t){var o=new Blob([t],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document;charset=utf-8"}),n=document.createElement("a"),r=window.URL.createObjectURL(o);n.href=r,n.download=e+"-"+a+".xls",document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(r)}).catch(function(e){t.$message.error(e)})}else this.$message.error("预约开始时间和结束时间不能为空")},handleCurrentChange:function(t){console.log(t),this.currentPage=t,this.search(t)},timeFilter:function(t){var e=new Date(t),a=e.getFullYear(),o=e.getMonth()+1,n=e.getDate(),r=e.getHours(),i=e.getMinutes(),s=e.getSeconds();return a+"-"+(o=o<10?"0"+o:o)+"-"+(n=n<10?"0"+n:n)+" "+(r=r<10?"0"+r:r)+":"+(i=i<10?"0"+i:i)+":"+(s=s<10?"0"+s:s)}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"appointment"},[a("div",{staticClass:"search"},[a("p",{staticClass:"title"},[t._v("商品编号:")]),t._v(" "),a("el-input",{attrs:{placeholder:"请输入内容",clearable:""},model:{value:t.input1,callback:function(e){t.input1=e},expression:"input1"}}),t._v(" "),a("p",{staticClass:"times"},[t._v("开始时间-结束时间:")]),t._v(" "),a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:t.value2,callback:function(e){t.value2=e},expression:"value2"}})],1),t._v(" "),a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(e){t.search()}}},[t._v("搜索")]),t._v(" "),a("el-button",{attrs:{icon:"el-icon-upload2"},on:{click:t.exportSubscribeList}},[t._v("导出预约列表")])],1),t._v(" "),a("div",{staticClass:"appointmentList"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData2,"row-class-name":t.tableRowClassName}},[a("el-table-column",{attrs:{prop:"goodsCode",label:"商品编号",width:"180"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createTime",label:"预约开始时间",width:"280"}}),t._v(" "),a("el-table-column",{attrs:{prop:"updateTime",label:"预约结束时间",width:"280"}}),t._v(" "),a("el-table-column",{attrs:{prop:"userId",label:"用户编号",width:"280"}}),t._v(" "),a("el-table-column",{attrs:{prop:"bookStatus",label:"预约状态"}})],1)],1),t._v(" "),t.showPaging?a("div",{staticClass:"paging"},[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.totalNum},on:{"current-change":t.handleCurrentChange}})],1):t._e()])},staticRenderFns:[]};var i=a("VU/8")(n,r,!1,function(t){a("jyuK"),a("vgob")},"data-v-67dd64ea",null);e.default=i.exports},jyuK:function(t,e){},vgob:function(t,e){}});