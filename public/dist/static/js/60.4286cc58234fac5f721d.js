webpackJsonp([60],{MKRO:function(e,t){},i6ts:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mvHQ"),o=a.n(r),i=a("Y3Gt"),s={name:"sourceClassify",data:function(){return{outerVisible:!1,crawparamDialog:!1,secondName:"",formLabelWidth:"120px",dataList:[],priceConf:{sysPriceRatio:"",gRate:""},pageNum:1,pageSize:10,currentPage:1,totalSize:0,crawParam:{searchWords:"",repurchaseRate:""}}},created:function(){this.getCategory()},methods:{getCategory:function(){var e=this,t={pageNum:e.pageNum,pageSize:e.pageSize,level:1};i.a.getCategoryList(t).then(function(t){e.dataList=t.dataList,e.totalSize=t.totalSize}).catch()},goSecondList:function(e,t){console.log(t),this.$router.push({name:"secondCategory",query:{parentId:t.id,categoryName:t.categoryName,categoryId:t.categoryId}})},updateStatus:function(e,t){var a=this,r={categoryId:t.categoryId,status:1===t.status?0:1},o=new FormData;o.append("categoryId",r.categoryId),o.append("status",r.status),i.a.enableCategory(o).then(function(e){a.$message({type:"success",message:e.message}),a.getCategory()}).catch()},editPrice:function(e,t){console.log(t),this.priceConf.level=t.categoryLevel,this.priceConf.id=t.categoryId,this.priceConf.gRate=t.gRate,this.priceConf.sysPriceRatio=t.sysPriceRatio,this.outerVisible=!0},savePriceConfig:function(){var e=this,t=JSON.parse(o()(e.priceConf)),a=new FormData;a.append("sysPriceRatio",encodeURI(t.sysPriceRatio)),a.append("gRate",encodeURI(t.gRate)),a.append("id",t.id),a.append("level",t.level),i.a.setPriceConfig(a).then(function(t){e.$message({type:"success",message:t.message}),e.outerVisible=!1,e.getCategory()}).catch()},setGoodsParam:function(e,t){this.crawParam.id=t.categoryId,this.crawParam.level=t.categoryLevel,this.crawParam.searchWords=t.searchWords,this.crawParam.repurchaseRate=t.repurchaseRate,this.crawparamDialog=!0},saveCrawparam:function(){var e=this,t=JSON.parse(o()(e.crawParam)),a=new FormData;a.append("searchWords",t.searchWords),a.append("repurchaseRate",encodeURI(t.repurchaseRate)),a.append("id",t.id),a.append("level",t.level),i.a.setCrawparam(a).then(function(t){e.$message({type:"success",message:t.message}),e.outerVisible=!1,e.crawParam={searchWords:"",repurchaseRate:""},e.crawparamDialog=!1,e.getCategory()}).catch()},handleCurrentChange:function(e){this.pageNum=e,this.getCategory()},handleSizeChange:function(e){this.pageSize=e,this.getCategory()},exportExcel:function(){var e=this;i.a.exportClassisfy().then(function(t){e.$message({type:"success",message:"下载成功"});var a=new Blob([t],{type:"application/vnd.ms-excel"});if("download"in document.createElement("a")){var r=document.createElement("a");r.download="数据统计",r.style.display="none",r.href=URL.createObjectURL(a),document.body.appendChild(r),r.click(),URL.revokeObjectURL(r.href),document.body.removeChild(r)}else navigator.msSaveBlob(a,"数据统计")}).catch()}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.exportExcel}},[e._v("导出")])],1)],1),e._v(" "),a("section",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataList,border:"",align:"center"}},[a("el-table-column",{attrs:{type:"index",align:"center",width:"50"}}),e._v(" "),a("el-table-column",{attrs:{prop:"categoryName",align:"center",label:"一级类目"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsCount",align:"center",width:"150",label:"商品总数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",align:"center",width:"150",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1===t.row.status?"启用":"禁用"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"categoryName",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.goSecondList(t.$index,t.row)}}},[e._v("二级类目")]),e._v(" "),1===t.row.status?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.updateStatus(t.$index,t.row)}}},[e._v("停用")]):e._e(),e._v(" "),0===t.row.status?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.updateStatus(t.$index,t.row)}}},[e._v("启用")]):e._e(),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.setGoodsParam(t.$index,t.row)}}},[e._v("爬虫参数设置")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.editPrice(t.$index,t.row)}}},[e._v("定价策略")])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40,50],"page-size":e.pageSize,total:e.totalSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"定价策略",visible:e.outerVisible},on:{"update:visible":function(t){e.outerVisible=t}}},[a("el-form",{attrs:{model:e.priceConf}},[a("el-form-item",{attrs:{label:"系统定价比例","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.priceConf.sysPriceRatio,callback:function(t){e.$set(e.priceConf,"sysPriceRatio",t)},expression:"priceConf.sysPriceRatio"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"返佣","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.priceConf.gRate,callback:function(t){e.$set(e.priceConf,"gRate",t)},expression:"priceConf.gRate"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.outerVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.savePriceConfig}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"爬虫参数设置",visible:e.crawparamDialog},on:{"update:visible":function(t){e.crawparamDialog=t}}},[a("el-form",{attrs:{model:e.crawParam}},[a("el-form-item",{attrs:{label:"搜索词","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.crawParam.searchWords,callback:function(t){e.$set(e.crawParam,"searchWords",t)},expression:"crawParam.searchWords"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"复购率 >=","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.crawParam.repurchaseRate,callback:function(t){e.$set(e.crawParam,"repurchaseRate",t)},expression:"crawParam.repurchaseRate"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.crawparamDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveCrawparam}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(s,n,!1,function(e){a("MKRO")},"data-v-75155b4f",null);t.default=c.exports}});