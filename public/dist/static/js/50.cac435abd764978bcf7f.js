webpackJsonp([50],{"76OH":function(e,t){},Wm5P:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("mvHQ"),o=a.n(i),n=a("NU8M"),l=a("TIfe"),r={name:"alipaygoldcoin",data:function(){return{loading:!1,formLabelWidth:"100px",queryparam:{modual:0},modualArr:[],dataList:[],uploadUrl:"https://www.xiaoxiangyoupin.com/xxyp-manager/upload/uploadPic",pageSize:10,pageNum:1,currentPage:1,totalSize:0,dialogModual:!1,form:{name:""}}},computed:{uploadHeader:function(){return{Token:Object(l.c)()}}},created:function(){console.log(this.form),this.getmodule()},methods:{getmodule:function(){var e=this;n.a.getModuleList({id:3}).then(function(t){e.modualArr=t.data,e.queryparam.id=e.modualArr[0].id,e.getGoldPriceList()}).catch()},getGoldPriceList:function(){var e=this;e.loading=!0;var t={activityId:e.queryparam.id,pageNum:e.pageNum,pageSize:e.pageSize};n.a.getGoldList(t).then(function(t){e.dataList=t.data.list,e.totalSize=t.data.total,e.loading=!1}).catch()},upLoad:function(e,t,a){this.dataNow=e,this.currentRowIndex=t},release:function(){var e=this,t={};t.goldPrizeDTOs=JSON.parse(o()(e.dataList)),n.a.activityGoodRelease(t).then(function(t){e.$message({type:"success",message:t.message}),e.getGoldPriceList()}).catch()},editName:function(){var e=this;e.modualArr.forEach(function(t,a){t.id===e.queryparam.id&&(e.form.name=t.activityName,e.form.id=t.id)}),e.dialogModual=!0},deletetName:function(){var e=this,t={};t.id=e.form.id,n.a.deleteModule(t).then(function(t){e.getmodule()}).catch()},add:function(){this.form={name:""},this.dialogModual=!0},saveNewModule:function(){var e=this,t={activityType:3};t.activityName=e.form.name,t.id=e.form.id,t.status=1,n.a.addNewModule(t).then(function(t){e.dialogModual=!1,e.form={},e.getmodule()}).catch()},addGoods:function(){this.dataList.push({activityId:this.queryparam.id,status:-1})},enableLine:function(e,t,a){this.dataList[a].status=t,console.log(this.dataList)},deleteLine:function(e,t){var a=this;e.id?a.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){n.a.deleteGoldCoinGood({id:e.id}).then(function(e){a.$message({type:"success",message:e.message}),a.getGoldPriceList()}).catch()}):a.dataList.splice(t,1)},changeModual:function(){var e=this;e.getGoldPriceList(),e.modualArr.forEach(function(t,a){t.id===e.queryparam.id&&(e.form.name=t.activityName,e.form.id=t.id)})},handleAvatarSuccess:function(e){this.dataNow.prizeImg=e.data,this.$set(this.dataList,this.currentRowIndex,this.dataNow),this.$message({type:"success",message:"上传成功"})},handleCurrentChange:function(e){this.pageNum=e,this.getGoldPriceList()},handleSizeChange:function(e){this.pageSize=e,this.getGoldPriceList()}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"配置模块:"}},[a("el-select",{attrs:{placeholder:"全部"},on:{change:e.changeModual},model:{value:e.queryparam.id,callback:function(t){e.$set(e.queryparam,"id",t)},expression:"queryparam.id"}},e._l(e.modualArr,function(e){return a("el-option",{key:e.id,attrs:{label:e.activityName,value:e.id}})}))],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:e.release}},[e._v("发布")]),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.add}},[e._v("新增专区")]),e._v(" "),a("el-button",{attrs:{type:"warning",icon:"el-icon-edit"},on:{click:e.editName}},[e._v("修改名称")]),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:e.deletetName}},[e._v("删除专区")]),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.addGoods}},[e._v("新增奖品")])],1)],1),e._v(" "),a("section",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.dataList,border:"",align:"center"}},[a("el-table-column",{attrs:{prop:"prizeName",align:"center",label:"奖品标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.prizeName,callback:function(a){e.$set(t.row,"prizeName",a)},expression:"scope.row.prizeName"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"consumeGold",align:"center",label:"兑换金额"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.consumeGold,callback:function(a){e.$set(t.row,"consumeGold",a)},expression:"scope.row.consumeGold"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"prizeSort",align:"center",label:"奖品顺序"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.prizeSort,callback:function(a){e.$set(t.row,"prizeSort",a)},expression:"scope.row.prizeSort"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"prizeImg",align:"center",label:"奖品图片"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"100px",height:"100px"},attrs:{src:t.row.prizeImg,fit:"contain"},on:{click:function(a){e.$store.dispatch("openImgPreview",{url:t.row.prizeImg})}}}),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{headers:e.uploadHeader,action:e.uploadUrl,"show-file-list":!1,"on-success":e.handleAvatarSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){e.upLoad(t.row,t.$index)}}},[e._v("重新上传")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"prizeLimit",align:"center",label:"每日奖品数量上限"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.prizeLimit,callback:function(a){e.$set(t.row,"prizeLimit",a)},expression:"scope.row.prizeLimit"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.status?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){e.enableLine(t.row,-1,t.$index)}}},[e._v("点击禁用")]):e._e(),e._v(" "),-1===t.row.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.enableLine(t.row,1,t.$index)}}},[e._v("点击启用")]):e._e(),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.deleteLine(t.row,t.$index)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.totalSize>0,expression:"totalSize>0"}],staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,30,40,50],"page-size":e.pageSize,total:e.totalSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.dialogModual},on:{"update:visible":function(t){e.dialogModual=t}}},[a("el-form",{attrs:{model:e.form}},[a("el-form-item",{attrs:{label:"活动名称","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveNewModule}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(r,s,!1,function(e){a("76OH")},null,null);t.default=c.exports}});