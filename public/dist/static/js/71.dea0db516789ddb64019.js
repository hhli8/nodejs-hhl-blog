webpackJsonp([71],{Frpc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("Dd8w"),i=n.n(a),l=n("V/8j"),s=n("NYxO"),r={name:"config",data:function(){return{list:null,listLoading:!0,currentPage:1,pageSize:20,totalPage:0}},filters:{statusFilter:function(e){return{1:"success",2:"gray",3:"danger"}[e]},valueTypeFilter:function(e){return{1:"文字",2:"数字"}[e]}},created:function(){this.fetchData()},computed:i()({},Object(s.b)(["menus"])),methods:{fetchData:function(){var e=this;this.listLoading=!0,Object(l.c)(this.currentPage,this.pageSize).then(function(t){var n=t.dataList;e.currentPage=t.currentPage,e.pageSize=t.pageSize,e.totalPage=t.totalPage,e.listLoading=!1,e.list=n.map(function(t){return e.$set(t,"edit",!1),t.originalValue=t.value,t})})},cancelEdit:function(e){e.value=e.originalValue,e.edit=!1,this.$message({message:"取消修改",type:"warning"})},confirmEdit:function(e){var t=this;e.edit=!1,e.originalValue=e.value,Object(l.f)(e).then(function(e){t.$message({message:"修改成功",type:"success"})})},handleSizeChange:function(e){this.pageSize=e,this.fetchData()},handleCurrentChange:function(e){this.currentPage=e,this.fetchData()}}},o={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"序号",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.$index+1)+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"配置名称",width:"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.name)+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"配置标识",width:"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("span",[e._v(" "+e._s(t.row.code))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"配置值",width:"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[n("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.value,callback:function(n){e.$set(t.row,"value",n)},expression:"scope.row.value"}}),e._v(" "),n("el-button",{staticClass:"cancel-btn",attrs:{size:"small",icon:"el-icon-refresh",type:"warning"},on:{click:function(n){e.cancelEdit(t.row)}}},[e._v("取消")])]:n("span",[e._v(" "+e._s(t.row.value))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"配置描述",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.description)+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"类型",width:"100",align:"center","class-name":"status-col"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-tag",{attrs:{type:e._f("statusFilter")(t.row.valueType)}},[e._v(e._s(e._f("valueTypeFilter")(t.row.valueType)))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"创建时间",width:"200",prop:"created_at",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon-time"}),e._v(" "),n("span",[e._v(e._s(t.row.createTime))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-circle-check-outline"},on:{click:function(n){e.confirmEdit(t.row)}}},[e._v("提交")]):n("el-button",{directives:[{name:"show",rawName:"v-show",value:-1!==e.menus.indexOf("system.config.modify"),expression:"menus.indexOf('system.config.modify')!==-1"}],attrs:{type:"primary",size:"small",icon:"el-icon-edit"},on:{click:function(e){t.row.edit=!t.row.edit}}},[e._v("编辑")])]}}])})],1),e._v(" "),[n("div",{staticClass:"block page-container"},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalPage},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]],2)},staticRenderFns:[]};var c=n("VU/8")(r,o,!1,function(e){n("pgI8")},"data-v-46ac8dee",null);t.default=c.exports},pgI8:function(e,t){}});