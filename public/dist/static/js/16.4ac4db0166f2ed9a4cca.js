webpackJsonp([16],{"E/TR":function(e,t){e.exports=function(){return Function.call.apply(Array.prototype.concat,arguments)}},K5b3:function(e,t){},KGN9:function(e,t){},dXij:function(e,t,a){e.exports={default:a("E/TR"),__esModule:!0}},jv8b:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("dXij"),n=a.n(r),i=a("c/Tr"),l=a.n(i),o=a("7+uW");function c(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,n=[];return l()(e).forEach(function(e){void 0===e._expanded&&o.default.set(e,"_expanded",t);var i=1;if(void 0!==r&&null!==r&&(i=r+1),o.default.set(e,"_level",i),a&&o.default.set(e,"parent",a),n.push(e),e.children&&e.children.length>0){var l=c(e.children,t,e,i);n=n.concat(l)}}),n}var s={name:"treeTable",props:{data:{type:[Array,Object],required:!0},columns:{type:Array,default:function(){return[]}},evalFunc:Function,operateFunc:{type:[Array,Object]},evalArgs:Array,expandAll:{type:Boolean,default:!1}},computed:{formatData:function(){var e=void 0;e=Array.isArray(this.data)?this.data:[this.data];var t=this.evalFunc||c,a=this.evalArgs?n()([e,this.expandAll],this.evalArgs):[e,this.expandAll];return t.apply(null,a)}},methods:{showRow:function(e){var t=!e.row.parent||e.row.parent._expanded&&e.row.parent._show;return e.row._show=t,t?"animation:treeTableShow 1s;-webkit-animation:treeTableShow 1s;":"display:none;"},toggleExpanded:function(e){var t=this.formatData[e];t._expanded=!t._expanded},iconShow:function(e,t){return 0===e&&t.children&&t.children.length>0},firstLeft:function(e){return 0===e?"left":"center"}}},d={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-table",e._b({attrs:{data:e.formatData,"row-style":e.showRow}},"el-table",e.$attrs,!1),[0===e.columns.length?a("el-table-column",{attrs:{width:"150",align:"center","header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._l(t.row._level,function(e){return a("span",{key:e,staticClass:"ms-tree-space"})}),e._v(" "),e.iconShow(0,t.row)?a("span",{staticClass:"tree-ctrl",on:{click:function(a){e.toggleExpanded(t.$index)}}},[t.row._expanded?a("i",{staticClass:"el-icon-caret-bottom"}):a("i",{staticClass:"el-icon-plus"})]):e._e(),e._v("\n            "+e._s(t.$index)+"\n        ")]}}])}):e._l(e.columns,function(t,r){return a("el-table-column",{key:t.value,attrs:{label:t.text,width:t.width,align:e.firstLeft(r),"header-align":"center"},scopedSlots:e._u([{key:"default",fn:function(n){return[e._l(n.row._level,function(t){return 0===r?a("span",{key:t,staticClass:"ms-tree-space"}):e._e()}),e._v(" "),e.iconShow(r,n.row)?a("span",{staticClass:"tree-ctrl",on:{click:function(t){e.toggleExpanded(n.$index)}}},[n.row._expanded?a("i",{staticClass:"el-icon-caret-bottom"}):a("i",{staticClass:"el-icon-caret-right"})]):e._e(),e._v("\n            "+e._s(n.row[t.value])+"\n            "),e._l(e.operateFunc,function(t){return a("el-button",{directives:[{name:"show",rawName:"v-show",value:r===e.columns.length-1,expression:"index === columns.length-1"}],key:t.name,attrs:{type:"primary",size:"small"},on:{click:function(e){t.operate(n.row)}}},[e._v(e._s(t.name))])})]}}])})})],2)},staticRenderFns:[]};var u=a("VU/8")(s,d,!1,function(e){a("K5b3"),a("KGN9")},"data-v-28452fca",null).exports,p=a("bQok"),h={name:"treeTableDemo",components:{treeTable:u},data:function(){return{loading:!0,columns:[{text:"菜单名",value:"name",width:200}],menus:[],operateFunc:[{name:"编辑",operate:this.modify}],dialogStatus:"",dialogFormVisible:!1,temp:{id:void 0,name:void 0,url:void 0,description:void 0,disable:!0},tempObj:{id:3,supplierId:1,categoryId:2175,categoryName:"肥肠",priceRatio:16,commissionRatio:2,bcRatio:12.8,ccRatio:12.8,endTaxPrice:12.8,transferCode:"dsfsfsfsf",usedTag:1,createDate:"2019-06-24T12:22:07.000+0000",creator:null,editDate:null,editor:null}}},created:function(){this.supplierId=this.$route.query.id,this.fetchData()},methods:{fetchData:function(){var e=this;this.loading=!0;var t={supplierId:this.supplierId};p.a.getPriceStategyList(t).then(function(t){if(t.result.categoryList.length<=0)for(var a=0;a<t.result.categoryList.length;a++)for(var r=0;r<t.result.categoryList[a].children.length&&t.result.categoryList[a].children[r].children.length>0;r++)for(var n=0;n<t.result.categoryList[a].children[r].children.length;n++)t.result.categoryList[a].children[r].children[n].priceRatio="",t.result.categoryList[a].children[r].children[n].commissionRatio="",t.result.categoryList[a].children[r].children[n].bcRatio="",t.result.categoryList[a].children[r].children[n].ccRatio="",t.result.categoryList[a].children[r].children[n].endTaxPrice="",t.result.categoryList[a].children[r].children[n].transferCode="";else for(var i=0;i<t.result.categoryList.length;i++)for(var l=0;l<t.result.categoryList[i].children.length;l++)for(var o=0;o<t.result.categoryList[i].children[l].children.length;o++)for(var c=0;c<t.result.priceStrategyList.length;c++)t.result.priceStrategyList[c].categoryId===t.result.categoryList[i].children[l].children[o].categoryId&&(t.result.categoryList[i].children[l].children[o].priceRatio=t.result.priceStrategyList[c].priceRatio,t.result.categoryList[i].children[l].children[o].commissionRatio=t.result.priceStrategyList[c].commissionRatio,t.result.categoryList[i].children[l].children[o].bcRatio=t.result.priceStrategyList[c].bcRatio,t.result.categoryList[i].children[l].children[o].ccRatio=t.result.priceStrategyList[c].ccRatio,t.result.categoryList[i].children[l].children[o].endTaxPrice=t.result.priceStrategyList[c].endTaxPrice,t.result.categoryList[i].children[l].children[o].transferCode=t.result.priceStrategyList[c].transferCode,t.result.categoryList[i].children[l].children[o].id=t.result.priceStrategyList[c].id);e.menus=t.result.categoryList,e.loading=!1})},modify:function(e){this.temp.id=e.id,this.temp.name=e.name,this.temp.url=e.url,this.temp.disable=0===e.deleted,this.temp.description=e.description,this.dialogStatus="modify",this.dialogFormVisible=!0},saveLine:function(e){var t=this;console.log(e);var a=new FormData;a.append("bcRatio",e.bcRatio),a.append("categoryId",e.categoryId),a.append("categoryLevel",e.categoryLevel),a.append("categoryName",e.categoryName),a.append("commissionRatio",e.commissionRatio),a.append("endTaxPrice",e.endTaxPrice),a.append("parentId",e.parentId),a.append("priceRatio",e.priceRatio),a.append("transferCode",e.transferCode),a.append("supplierId",JSON.parse(this.supplierId)),a.append("ccRatio",e.ccRatio),e.id&&a.append("id",e.id),p.a.savePriceStategy(a).then(function(e){t.$message({type:"success",message:e.resultMessage}),t.fetchData()}).catch()},clearLine:function(e){var t=this,a=new FormData;a.append("priceStategyId",e.id),p.a.clearLine(a).then(function(e){t.$message({type:"success",message:e.resultMessage}),t.fetchData()}).catch()},back:function(){history.go(-1)}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("div",[a("el-button",{on:{click:e.fetchData}},[e._v("刷新")]),e._v(" "),a("el-button",{on:{click:e.back}},[e._v("确定")])],1),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.menus,align:"center"}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-table",{attrs:{align:"center",data:t.row.children}},[a("el-table-column",{attrs:{type:"expand"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-table",{attrs:{data:t.row.children,align:"center"}},[a("el-table-column",{attrs:{align:"center",width:"80",prop:"categoryName",label:"三级类目"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"priceRatio",label:"系统定价比例"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"系统定价比例",type:"text"},model:{value:t.row.priceRatio,callback:function(a){e.$set(t.row,"priceRatio",a)},expression:"scope.row.priceRatio"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"commissionRatio",label:"返佣比例"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"返佣比例"},model:{value:t.row.commissionRatio,callback:function(a){e.$set(t.row,"commissionRatio",a)},expression:"scope.row.commissionRatio"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"bcRatio",label:"跨境清关BC"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"跨境清关BC"},model:{value:t.row.bcRatio,callback:function(a){e.$set(t.row,"bcRatio",a)},expression:"scope.row.bcRatio"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"ccRatio",label:"标准清关CC"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"标准清关CC"},model:{value:t.row.ccRatio,callback:function(a){e.$set(t.row,"ccRatio",a)},expression:"scope.row.ccRatio"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"endTaxPrice",label:"完税价格"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"完税价格"},model:{value:t.row.endTaxPrice,callback:function(a){e.$set(t.row,"endTaxPrice",a)},expression:"scope.row.endTaxPrice"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"transferCode",label:"转运商品品类编码"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"转运商品品类编码"},model:{value:t.row.transferCode,callback:function(a){e.$set(t.row,"transferCode",a)},expression:"scope.row.transferCode"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"categoryName",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.saveLine(t.row)}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.clearLine(t.row)}}},[e._v("清空")])]}}])})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"二级类目",prop:"categoryName"}})],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"一级类目",prop:"categoryName"}})],1)],1)},staticRenderFns:[]},g=a("VU/8")(h,f,!1,null,null,null);t.default=g.exports}});