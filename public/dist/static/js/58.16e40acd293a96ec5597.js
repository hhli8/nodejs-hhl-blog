webpackJsonp([58],{lYtR:function(e,t){},s5aZ:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("Dd8w"),i=n.n(s),o=n("V/8j"),a=n("NYxO"),c={name:"config",data:function(){return{list:null,listLoading:!0}},filters:{statusFilter:function(e){return{1:"success",2:"gray",3:"danger"}[e]}},created:function(){this.fetchData()},computed:i()({},Object(a.b)(["menus"])),methods:{fetchData:function(){var e=this;this.listLoading=!0,this.listLoading=!1,Object(o.e)({}).then(function(t){e.list=t.dataList.map(function(t){return e.$set(t,"edit",!1),t.originalValue=t.value,t.isConcurrent=1===t.isConcurrent,t.jobStatus=1===t.jobStatus,t})})},cancelEdit:function(e){e.value=e.originalValue,e.edit=!1,this.$message({message:"取消修改",type:"warning"})},confirmEdit:function(e){var t=this;e.edit=!1,e.originalValue=e.value,Object(o.g)(e).then(function(e){t.$message({message:"修改成功",type:"success"})})},deleteDialog:function(e){var t=this;this.$confirm("确定删除该配置, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){Object(o.b)(e).then(function(e){t.$message({type:"success",message:"删除成功!"}),t.fetchData()})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},modifyConcorrent:function(e){var t=this;Object(o.g)(e).then(function(n){t.$message({message:e.isConcurrent?"开启并发":"禁止并发",type:"success"})})},modifyStatus:function(e){var t=this;e.jobStatus?Object(o.i)(e).then(function(e){t.$message({message:"开启成功",type:"success"})}):Object(o.h)(e).then(function(e){t.$message({message:"暂停成功",type:"success"})})},trigger:function(e){var t=this;Object(o.j)(e).then(function(e){t.$message({message:"触发成功",type:"success"})})}}},l={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"app-container"},[n("el-table",{directives:[{name:"loading",rawName:"v-loading.body",value:e.listLoading,expression:"listLoading",modifiers:{body:!0}}],attrs:{data:e.list,"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":""}},[n("el-table-column",{attrs:{align:"center",label:"序号",width:"80"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.$index+1)+"\n        ")]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"任务描述",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[n("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.description,callback:function(n){e.$set(t.row,"description",n)},expression:"scope.row.description"}})]:n("span",[e._v(" "+e._s(t.row.description))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"cron表达式",width:"300",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?[n("el-input",{staticClass:"edit-input",attrs:{size:"small"},model:{value:t.row.cronExpression,callback:function(n){e.$set(t.row,"cronExpression",n)},expression:"scope.row.cronExpression"}}),e._v(" "),n("el-button",{staticClass:"cancel-btn",attrs:{size:"small",icon:"el-icon-refresh",type:"warning"},on:{click:function(n){e.cancelEdit(t.row)}}},[e._v("取消")])]:n("span",[e._v(" "+e._s(t.row.cronExpression))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"是否并发",width:"100",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(n){e.modifyConcorrent(t.row)}},model:{value:t.row.isConcurrent,callback:function(n){e.$set(t.row,"isConcurrent",n)},expression:"scope.row.isConcurrent"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"状态",width:"100",align:"center","class-name":"status-col"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(n){e.modifyStatus(t.row)}},model:{value:t.row.jobStatus,callback:function(n){e.$set(t.row,"jobStatus",n)},expression:"scope.row.jobStatus"}})]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"创建时间",width:"200",prop:"created_at",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon-time"}),e._v(" "),n("span",[e._v(e._s(t.row.createTime))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"修改时间",width:"200",prop:"created_at",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("i",{staticClass:"el-icon-time"}),e._v(" "),n("span",[e._v(e._s(t.row.modifyTime))])]}}])}),e._v(" "),n("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.edit?n("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-circle-check-outline"},on:{click:function(n){e.confirmEdit(t.row)}}},[e._v("提交")]):n("el-button",{directives:[{name:"show",rawName:"v-show",value:-1!==e.menus.indexOf("system.scheduleJob.modify"),expression:"menus.indexOf('system.scheduleJob.modify')!==-1"}],attrs:{type:"primary",size:"small"},on:{click:function(e){t.row.edit=!t.row.edit}}},[e._v("编辑")]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:-1!==e.menus.indexOf("system.scheduleJob.modify"),expression:"menus.indexOf('system.scheduleJob.modify')!==-1"}],attrs:{size:"small"},on:{click:function(n){e.trigger(t.row)}}},[e._v("触发")]),e._v(" "),n("el-button",{directives:[{name:"show",rawName:"v-show",value:-1!==e.menus.indexOf("system.scheduleJob.delete"),expression:"menus.indexOf('system.scheduleJob.delete')!==-1"}],attrs:{type:"danger",size:"small"},on:{click:function(n){e.deleteDialog(t.row)}}},[e._v("删除")])]}}])})],1)],1)},staticRenderFns:[]};var r=n("VU/8")(c,l,!1,function(e){n("lYtR")},"data-v-82e118a4",null);t.default=r.exports}});