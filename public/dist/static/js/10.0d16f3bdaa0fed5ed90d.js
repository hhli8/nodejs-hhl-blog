webpackJsonp([10],{"14dk":function(e,t){},"9BHI":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o("Xxa5"),r=o.n(i),n=o("exGp"),s=o.n(n),a=o("Dd8w"),l=o.n(a),d=o("XpEf"),c=(o("v2ns"),o("7QTg")),u={props:["noteImage"],data:function(){return{swiperOptionTop:{spaceBetween:10,navigation:{nextEl:".swiper-button-next",prevEl:".swiper-button-prev"}},swiperOptionThumbs:{spaceBetween:10,centeredSlides:!0,slidesPerView:"auto",touchRatio:.2,slideToClickedSlide:!0},swiperSlides:[],swiperSlidesThumb:[]}},watch:{noteImage:{handler:function(e){var t=this;this.swiperSlides=e,this.$nextTick(function(){var e=t.$refs.swiperTop.swiper,o=t.$refs.swiperThumbs.swiper;e.controller.control=o,o.controller.control=e})},immediate:!0}},components:{swiper:c.swiper,swiperSlide:c.swiperSlide},mounted:function(){}},p={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"swiperPopup"},[o("swiper",{ref:"swiperTop",staticClass:"gallery-top swiper-container",attrs:{options:e.swiperOptionTop}},[e._l(e.swiperSlides,function(e,t){return o("swiper-slide",{key:t,staticClass:"swiper-item",class:"slide-"+e.id},[o("img",{attrs:{alt:"",src:e}})])}),e._v(" "),o("div",{staticClass:"swiper-button-next swiper-button-white",attrs:{slot:"button-next"},slot:"button-next"}),e._v(" "),o("div",{staticClass:"swiper-button-prev swiper-button-white",attrs:{slot:"button-prev"},slot:"button-prev"})],2),e._v(" "),o("swiper",{ref:"swiperThumbs",staticClass:"gallery-thumbs",attrs:{options:e.swiperOptionThumbs}},e._l(e.swiperSlides,function(e,t){return o("swiper-slide",{key:t,staticClass:"swiper-slide",class:"slide-"+e.id},[o("img",{attrs:{alt:"",src:e}})])}))],1)},staticRenderFns:[]};var h={name:"",components:{swiperPopup:o("VU/8")(u,p,!1,function(e){o("HNUm"),o("14dk")},null,null).exports},props:{},data:function(){return{loading:!1,noteType:null,noteImage:[],editId:"",pageSize:20,totalSize:0,currentPage:1,playerOptions:{playbackRates:[.7,1,1.5,2],autoplay:!0,muted:!1,loop:!1,preload:"auto",language:"zh-CN",aspectRatio:"4:3",fluid:!0,sources:[{type:"",src:"http://xiaoxiangyoupin.oss-cn-hangzhou.aliyuncs.com/dy%2Fd59d13b51d5fb57d49e43bc10332276a.mp4"}],poster:"",width:document.documentElement.clientWidth,notSupportedMessage:"此视频暂无法播放，请稍后再试",controlBar:{timeDivider:!0,durationDisplay:!0,remainingTimeDisplay:!1,fullscreenToggle:!0}},dialogVisibleDelete:!1,dialogFormVisibleModOrder:!1,dialogVisibleVideo:!1,dialogVisibleImage:!1,dialogFormVisibleHotNew:!1,formLabelWidth:"120px",fromModOrder:{noteSort:""},usersForm:{videoId:"",userId:"",userPhone:"",userType:""},formHotNew:{noteId:"",noteSort:""},optionsGole:[],tableData:[]}},computed:{player:function(){return this.$refs.videoPlayer.player}},mounted:function(){var e=this.$route.query.type;this.noteType=e,"hotsearch"===e?this.hotNoteList():this.noteList(),this.userRole()},methods:{hotAddNote:function(e){var t,o=this,i=this.$route.query.keyText,r=void 0;if(1===e)t=this.formHotNew,r=l()({type:e,name:i},t);else{var n=this.fromModOrder.noteSort;r={type:e,noteId:this.editId,name:i,noteSort:n}}Object(d.m)(r).then(function(t){o.$message({message:"恭喜你，"+(1===e?"新增":"修改")+"成功",type:"success"}),o.hotNoteList()})},seeNoteImgurl:function(){var e=this;Object(d.y)({id:this.editId}).then(function(t){if(0===t.data.length)return e.$message.error("无图片数据"),!1;e.noteImage=t.data,e.dialogVisibleImage=!0})},hotNoteList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=this.$route.query.keyText;this.loading=!0,Object(d.n)({keyText:o,currentPage:this.currentPage},t).then(function(t){e.loading=!1,0!==t.dataList.length?(e.totalSize=t.totalSize-0,e.pageSize=t.pageSize-0,e.tableData=t.dataList):e.$message.error("暂无数据")}).catch(function(t){e.loading=!1,e.$message.error(t)})},seeVideo:function(){var e=this;Object(d.z)({videoId:this.editId}).then(function(t){e.playerOptions.sources[0].src=t.data.videoCorner,e.dialogVisibleVideo=!0})},noteDelete:function(){var e=this;Object(d.s)({noteId:this.editId}).then(function(t){"hotsearch"===e.noteType?e.hotNoteList():e.noteList(),e.$message({message:"恭喜你，删除成功",type:"success"})})},noteUpdateOrder:function(){var e=this;Object(d.t)({noteId:this.editId,order:this.fromModOrder.noteSort}).then(function(t){e.noteList(),e.$message({message:"恭喜你，修改顺序成功",type:"success"})})},noteList:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,o=this.usersForm,i=this.$route.query.id,r=l()({},o,{noteId:i,derive:Boolean(t),currentPage:this.currentPage});this.loading=!0,"topic"===this.noteType?Object(d.J)(r,t).then(function(o){e.requestReturn(o,t),e.loading=!1}).catch(function(t){e.loading=!1,e.$message.error(t)}):"tag"===this.noteType?Object(d.C)(r,t).then(function(o){e.requestReturn(o,t),e.loading=!1}).catch(function(t){e.loading=!1,e.$message.error(t)}):(this.loading=!1,this.$message.error("url参数不正确，请从相关页面跳转的管理笔记"))},requestReturn:function(e,t){var o=e.dataList;if(Array.isArray(o)&&0===o.length)this.$message.error("暂无数据");else if(t){var i=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document;charset=utf-8"}),r=document.createElement("a"),n=window.URL.createObjectURL(i);r.href=n,r.download=Date.now()+".xls",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)}else this.totalSize=e.totalSize-0,this.pageSize=e.pageSize-0,this.tableData=e.dataList},userRole:function(){var e=this;Object(d.N)().then(function(t){e.optionsGole=t.dataList})},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e),"hotsearch"!==this.noteType?this.noteList():this.hotNoteList()},videoPlayerPlay:function(e){e.playbackRate(2)},handleSure:function(e){switch(e){case 1:this.noteDelete(),this.dialogVisibleDelete=!1;break;case 2:if(!this.fromModOrder.noteSort)return void this.$message.error("请输入笔记顺序");"hotsearch"===this.noteType?this.hotAddNote(2):this.noteUpdateOrder(),this.dialogFormVisibleModOrder=!1;break;case 3:var t=this.formHotNew;if(!t.noteId)return void this.$message.error("请输入笔记id");if(!t.noteSort)return void this.$message.error("请输入笔记顺序");this.dialogFormVisibleHotNew=!1,this.hotAddNote(1)}},handleEdit:function(e,t,o){switch(this.editId=t&&t.id,o){case 1:1===t.noteType?this.seeVideo():this.seeNoteImgurl();break;case 2:this.fromModOrder.noteSort=t.noteOrder,this.dialogFormVisibleModOrder=!0;break;case 3:this.dialogVisibleDelete=!0;break;case 4:this.dialogFormVisibleHotNew=!0;break;case 5:this.open()}},open:function(){var e=this;this.$confirm("确定要导出数据?","导出数据",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(s()(r.a.mark(function t(){return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:0===e.tableData.length?e.$message.warning("暂无数据，导出失败"):e.totalSize-0>5e4?e.$message.warning("导出数据大于5万条，请筛选后在导出！"):e.noteList(1);case 1:case"end":return t.stop()}},t,e)}))).catch(function(){e.$message.info("已取消操作")})},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})}}},m={render:function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("div",{staticClass:"faceworld-runnotes"},[o("el-container",[o("el-header",[o("div",{staticClass:"hotsearch-nav"},[o("h3",[e._v("管理笔记")]),e._v(" "),"hotsearch"===e.noteType?o("ul",{staticClass:"hotsearch-nav-right"},[o("li",{on:{click:function(t){e.handleEdit(null,null,4)}}},[e._v("+新建")])]):e._e()])]),e._v(" "),o("el-header",[o("div",{staticClass:"runnotes-header"},["hotsearch"!==e.noteType?o("ul",[o("li",[o("el-input",{attrs:{placeholder:"视频id",clearable:""},model:{value:e.usersForm.videoId,callback:function(t){e.$set(e.usersForm,"videoId",t)},expression:"usersForm.videoId"}})],1),e._v(" "),o("li",[o("el-input",{attrs:{placeholder:"用户id",clearable:""},model:{value:e.usersForm.userId,callback:function(t){e.$set(e.usersForm,"userId",t)},expression:"usersForm.userId"}})],1),e._v(" "),o("li",[o("el-input",{attrs:{placeholder:"手机号",clearable:""},model:{value:e.usersForm.userPhone,callback:function(t){e.$set(e.usersForm,"userPhone",t)},expression:"usersForm.userPhone"}})],1),e._v(" "),o("li",[o("el-select",{attrs:{placeholder:"用户角色",clearable:""},model:{value:e.usersForm.userType,callback:function(t){e.$set(e.usersForm,"userType",t)},expression:"usersForm.userType"}},e._l(e.optionsGole,function(e){return o("el-option",{key:e.id,attrs:{label:e.author,value:e.id}})}))],1),e._v(" "),o("li",[o("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){e.noteList(0)}}},[e._v("查询")])],1),e._v(" "),o("li",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleEdit(null,null,5)}}},[e._v("导出")])],1)]):o("ul",[o("li",[o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.hotNoteList(0)}}},[e._v("刷新")])],1)])])]),e._v(" "),o("el-main",[o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"",stripe:""}},[o("el-table-column",{attrs:{prop:"id",label:"视频id",align:"center",width:"140"}}),e._v(" "),o("el-table-column",{attrs:{prop:"playNumber",label:"播放量",align:"center",width:"120"}}),e._v(" "),o("el-table-column",{attrs:{prop:"praiseNumber",label:"点赞数",align:"center",width:"140"}}),e._v(" "),o("el-table-column",{attrs:{prop:"commentNumber",label:"评论数",align:"center",width:"140"}}),e._v(" "),o("el-table-column",{attrs:{prop:"shareNumber",label:"分享数",align:"center",width:"140"}}),e._v(" "),o("el-table-column",{attrs:{prop:"userId",label:"用户id",align:"center",width:"100"}}),e._v(" "),o("el-table-column",{attrs:{prop:"userPhone",label:"手机号",align:"center",width:"120"}}),e._v(" "),o("el-table-column",{attrs:{prop:"userType",label:"用户角色",align:"center",width:"90"}}),e._v(" "),o("el-table-column",{attrs:{prop:"noteOrder",label:"笔记顺序",align:"center",width:"80"}}),e._v(" "),o("el-table-column",{attrs:{prop:"",label:"操作",fixed:"right","min-width":"450",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[o("el-button",{attrs:{size:"mini"},on:{click:function(o){e.handleEdit(t.$index,t.row,1)}}},[e._v(e._s(1===t.row.noteType?"查看视频":"查看图文"))]),e._v(" "),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){e.handleEdit(t.$index,t.row,2)}}},[e._v("修改顺序")]),e._v(" "),o("el-button",{attrs:{size:"mini"},on:{click:function(o){e.handleEdit(t.$index,t.row,3)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),o("div",{staticClass:"pagination-container"},[o("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1),e._v(" "),o("div",{staticClass:"userPopup"},[o("el-dialog",{attrs:{title:"提示",visible:e.dialogVisibleDelete,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisibleDelete=t}}},[o("span",[e._v("确定要删除热该话题吗？")]),e._v(" "),o("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogVisibleDelete=!1}}},[e._v("取消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSure(1)}}},[e._v("确定")])],1)]),e._v(" "),o("el-dialog",{attrs:{title:"修改顺序",visible:e.dialogFormVisibleModOrder},on:{"update:visible":function(t){e.dialogFormVisibleModOrder=t}}},[o("el-form",{attrs:{model:e.fromModOrder}},[o("el-form-item",{attrs:{label:"笔记顺序","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off",placeholder:""},model:{value:e.fromModOrder.noteSort,callback:function(t){e.$set(e.fromModOrder,"noteSort",t)},expression:"fromModOrder.noteSort"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFormVisibleModOrder=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSure(2)}}},[e._v("确 定")])],1)],1),e._v(" "),o("el-dialog",{attrs:{title:"查看视频",visible:e.dialogVisibleVideo,width:"30%"},on:{"update:visible":function(t){e.dialogVisibleVideo=t}}},[o("div",{staticClass:"runnotes-player"},[o("video-player",{ref:"videoPlayer",staticClass:"video-player-box",attrs:{playsinline:!0,options:e.playerOptions},on:{play:function(t){e.videoPlayerPlay(t)}}})],1)]),e._v(" "),o("el-dialog",{attrs:{title:"查看图片",visible:e.dialogVisibleImage,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVisibleImage=t}}},[o("swiper-popup",{attrs:{noteImage:e.noteImage}})],1),e._v(" "),o("el-dialog",{attrs:{title:"新建笔记",visible:e.dialogFormVisibleHotNew},on:{"update:visible":function(t){e.dialogFormVisibleHotNew=t}}},[o("el-form",{attrs:{model:e.formHotNew}},[o("el-form-item",{attrs:{label:"笔记id","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off",placeholder:""},model:{value:e.formHotNew.noteId,callback:function(t){e.$set(e.formHotNew,"noteId",t)},expression:"formHotNew.noteId"}})],1),e._v(" "),o("el-form-item",{attrs:{label:"笔记顺序","label-width":e.formLabelWidth}},[o("el-input",{attrs:{autocomplete:"off",placeholder:""},model:{value:e.formHotNew.noteSort,callback:function(t){e.$set(e.formHotNew,"noteSort",t)},expression:"formHotNew.noteSort"}})],1)],1),e._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(t){e.dialogFormVisibleHotNew=!1}}},[e._v("取 消")]),e._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSure(3)}}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var f=o("VU/8")(h,m,!1,function(e){o("WAcd"),o("dx85")},"data-v-5ba709a5",null);t.default=f.exports},HNUm:function(e,t){},WAcd:function(e,t){},dx85:function(e,t){}});