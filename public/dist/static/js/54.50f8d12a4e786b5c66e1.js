webpackJsonp([54],{P7aX:function(e,t){},pdC2:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("oedn"),s=a("TIfe"),r={name:"brandSet",data:function(){return{uploadUrl:"https://www.xiaoxiangyoupin.com/xxyp-manager/upload/uploadPic",dataList:[],currentPage:1,pageSize:10,totalSize:0,brandName:"",curRowIndex:null}},created:function(){this.getBrandList()},computed:{uploadHeader:function(){return{Token:Object(s.c)()}}},methods:{search:function(){this.currentPage=1,this.getBrandList()},getBrandList:function(){var e=this,t={pageNum:e.currentPage,pageSize:e.pageSize,brandName:e.brandName};n.a.getbrandList(t).then(function(t){e.dataList=t.dataList,e.totalSize=t.totalSize}).catch()},addNewLine:function(){this.dataList.push({})},dosomething:function(e){console.log(e)},save:function(e){var t=this,a=this,s=e;e.id?n.a.updateBrand(s).then(function(e){a.$message({type:"success",message:e.message}),a.getBrandList()}).catch():n.a.saveBrand(s).then(function(e){a.$message({type:"success",message:e.message}),t.getBrandList()}).catch()},enable:function(e){var t=this,a=1===e.brandStatus?0:1,s={id:e.id,brandStatus:a};n.a.enableBrand(s).then(function(e){e&&(t.$message({type:"success",message:e.message}),t.getBrandList())}).catch()},deleteLine:function(e,t){var a=this;if(e.id){var s={id:e.id,brandStatus:-1};n.a.enableBrand(s).then(function(e){e&&(a.$message({type:"success",message:e.message}),a.getBrandList())}).catch()}else a.dataList.splice(t,1)},handleAvatarSuccess:function(e){console.log(this.curRowIndex),this.dataList[this.curRowIndex].brandBackGround=e.data},handleAvatarSuccessLogo:function(e){this.dataList[this.curRowIndex].brandLogo=e.data},handleSizeChange:function(e){this.pageSize=e,this.getBrandList()},handleCurrentChange:function(e){this.currentPage=e,this.getBrandList()}}},o={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container",attrs:{id:"brandset"}},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{staticClass:"fl",attrs:{label:"品牌名:"}},[a("el-input",{model:{value:e.brandName,callback:function(t){e.brandName=t},expression:"brandName"}})],1),e._v(" "),a("el-form-item",{staticClass:"fl"},[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("搜索")])],1),e._v(" "),a("el-form-item",{staticClass:"fr"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addNewLine}},[e._v("新增")])],1)],1),e._v(" "),a("section",[a("el-table",{staticStyle:{width:"100%"},attrs:{border:"",stripe:"",data:e.dataList}},[a("el-table-column",{attrs:{align:"center",prop:"brandName",label:"品牌名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{disabled:!!t.row.id},model:{value:t.row.brandName,callback:function(a){e.$set(t.row,"brandName",a)},expression:"scope.row.brandName"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"date",label:"品牌中文名称",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.brandTranslateName,callback:function(a){e.$set(t.row,"brandTranslateName",a)},expression:"scope.row.brandTranslateName"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"name",label:"商品LOGO",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("img",{attrs:{width:"120px",src:t.row.brandLogo,alt:""}}),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{headers:e.uploadHeader,action:e.uploadUrl,"on-success":e.handleAvatarSuccessLogo}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){e.curRowIndex=t.$index}}},[e._v("重新上传")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"brandCountry",label:"来源国家"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.brandCountry,callback:function(a){e.$set(t.row,"brandCountry",a)},expression:"scope.row.brandCountry"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"address",label:"品牌管品牌标题"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.brandTitle,callback:function(a){e.$set(t.row,"brandTitle",a)},expression:"scope.row.brandTitle"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"countryEnName",label:"国家英文缩写"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.countryEnName,callback:function(a){e.$set(t.row,"countryEnName",a)},expression:"scope.row.countryEnName"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"address",label:"品牌背景图"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("img",{attrs:{width:"120px",src:t.row.brandBackGround,alt:""}}),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{headers:e.uploadHeader,action:e.uploadUrl,"on-success":e.handleAvatarSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){e.curRowIndex=t.$index}}},[e._v("重新上传")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"right",prop:"address",width:"220",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.save(t.row)}}},[e._v("保存")]),e._v(" "),1===t.row.brandStatus?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.enable(t.row)}}},[e._v("禁用")]):e._e(),e._v(" "),0===t.row.brandStatus?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){e.enable(t.row)}}},[e._v("启用")]):e._e(),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.deleteLine(t.row,t.$index)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40,50],"page-size":e.pageSize,total:e.totalSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)},staticRenderFns:[]};var i=a("VU/8")(r,o,!1,function(e){a("P7aX")},"data-v-b24fca18",null);t.default=i.exports}});