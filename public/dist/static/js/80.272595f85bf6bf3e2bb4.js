webpackJsonp([80],{KggS:function(e,t){},jdeO:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("mvHQ"),o=a.n(r),i=a("Y3Gt"),s={data:function(){return{secondName:"",secondData:[],crawparamDialog:!1,outerVisible:!1,priceConf:{sysPriceRatio:"",gRate:""},formLabelWidth:"120px",crawParam:{searchWords:"",repurchaseRate:""},pageNum:1,pageSize:10,currentPage:1,totalSize:0}},created:function(){this.secondName=this.$route.query.categoryName,this.categoryId=this.$route.query.categoryId,this.getSecondLst()},methods:{getSecondLst:function(){var e=this,t={pageNum:e.pageNum,pageSize:e.pageSize,level:2,categoryId:e.categoryId};i.a.getCategoryList(t).then(function(t){for(var a=0;a<t.dataList.length;a++)t.dataList[a].firstname=e.secondName;e.secondData=t.dataList,e.totalSize=t.totalSize}).catch()},goSecondList:function(e,t){console.log(t),this.$router.push({name:"thirdCategory",query:{parentId:t.categoryId,categoryName:t.categoryName,categorOneyName:this.secondName,categoryId:t.categoryId}})},updateStatus:function(e,t){var a=this,r={categoryId:t.categoryId,status:1===t.status?0:1},o=new FormData;o.append("categoryId",r.categoryId),o.append("status",r.status),i.a.enableCategory(o).then(function(e){a.$message({type:"success",message:e.message}),a.getSecondLst()}).catch()},editPrice:function(e,t){this.priceConf.id=t.categoryId,this.priceConf.level=t.categoryLevel,this.priceConf.gRate=t.gRate,this.priceConf.sysPriceRatio=t.sysPriceRatio,this.outerVisible=!0},setGoodsParam:function(e,t){this.crawParam.id=t.categoryId,this.crawParam.level=t.categoryLevel,this.crawParam.searchWords=t.searchWords,this.crawParam.repurchaseRate=t.repurchaseRate,this.crawparamDialog=!0},savePriceConfig:function(){var e=this,t=JSON.parse(o()(e.priceConf)),a=new FormData;a.append("sysPriceRatio",encodeURI(t.sysPriceRatio)),a.append("gRate",encodeURI(t.gRate)),a.append("id",t.id),a.append("level",t.level),i.a.setPriceConfig(a).then(function(t){e.$message({type:"success",message:t.message}),e.outerVisible=!1,e.getSecondLst()}).catch()},saveCrawparam:function(){var e=this,t=JSON.parse(o()(e.crawParam)),a=new FormData;a.append("searchWords",t.searchWords),a.append("repurchaseRate",encodeURI(t.repurchaseRate)),a.append("id",t.id),a.append("level",t.level),i.a.setCrawparam(a).then(function(t){e.$message({type:"success",message:t.message}),e.outerVisible=!1,e.crawparamDialog=!1,e.getSecondLst()}).catch()},handleCurrentChange:function(e){this.pageNum=e,this.getSecondLst()},handleSizeChange:function(e){this.pageSize=e,this.getSecondLst()}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("section",[a("el-table",{attrs:{data:e.secondData,border:"",align:"center"}},[a("el-table-column",{attrs:{prop:"firstname",align:"center",label:"一级类目"}}),e._v(" "),a("el-table-column",{attrs:{prop:"categoryName",align:"center",width:"200",label:"二级类目"}}),e._v(" "),a("el-table-column",{attrs:{prop:"goodsCount",align:"center",width:"150",label:"商品总数"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",align:"center",width:"150",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(1===t.row.status?"启用":"禁用"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"categoryName",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.goSecondList(t.$index,t.row)}}},[e._v("三级类目")]),e._v(" "),1===t.row.status?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.updateStatus(t.$index,t.row)}}},[e._v("停用")]):e._e(),e._v(" "),0===t.row.status?a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.updateStatus(t.$index,t.row)}}},[e._v("启用")]):e._e(),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.setGoodsParam(t.$index,t.row)}}},[e._v("爬虫参数设置")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.editPrice(t.$index,t.row)}}},[e._v("定价策略")])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40,50],"page-size":e.pageSize,total:e.totalSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:"定价策略",visible:e.outerVisible},on:{"update:visible":function(t){e.outerVisible=t}}},[a("el-form",{attrs:{model:e.priceConf}},[a("el-form-item",{attrs:{label:"系统定价比例","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.priceConf.sysPriceRatio,callback:function(t){e.$set(e.priceConf,"sysPriceRatio",t)},expression:"priceConf.sysPriceRatio"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"返佣","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.priceConf.gRate,callback:function(t){e.$set(e.priceConf,"gRate",t)},expression:"priceConf.gRate"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.outerVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.savePriceConfig}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"爬虫参数设置",visible:e.crawparamDialog},on:{"update:visible":function(t){e.crawparamDialog=t}}},[a("el-form",{attrs:{model:e.crawParam}},[a("el-form-item",{attrs:{label:"搜索词","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.crawParam.searchWords,callback:function(t){e.$set(e.crawParam,"searchWords",t)},expression:"crawParam.searchWords"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"复购率 >=","label-width":e.formLabelWidth}},[a("el-input",{model:{value:e.crawParam.repurchaseRate,callback:function(t){e.$set(e.crawParam,"repurchaseRate",t)},expression:"crawParam.repurchaseRate"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.crawparamDialog=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.saveCrawparam}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(s,n,!1,function(e){a("KggS")},null,null);t.default=c.exports}});