webpackJsonp([19],{"Ekt/":function(t,e){},Hy0g:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("mvHQ"),i=a.n(o),s=a("Xxa5"),r=a.n(s),n=a("exGp"),l=a.n(n),c=a("o+mB"),u={data:function(){return{currentPage:1,pagesize:20,totalSize:0,multipleSelection:[],headerStyle:{"text-align":"center"}}},created:function(){},methods:{handleSizeChange:function(t){this.pagesize=t,this.getData()},handleCurrentChange:function(t){this.currentPage=t,this.getData()},handleClose:function(){this.previewVisible=!1,this.uploadVisible=!1,this.lookVisible=!1},cateChange:function(t){console.log(t)},cateDataChange:function(t){},handleSelectionChange:function(t){console.log(t),this.multipleSelection=t;for(var e=[],a=0;a<this.multipleSelection.length;a++)e.push(this.multipleSelection[a].idStr);this.idsArr=e,console.log(this.idsArr)},handleInput:function(t){t.target.value=t.target.value.match(/^\d*(\.?\d{0,1})/g)[0]||null}}},d=a("Dd8w"),g=a.n(d),p=a("TIfe"),h={data:function(){return{shopList:[],indexBannerId:null,dialogActiveDetail:!1,seleShopRow:[],activeShopPage:{pageNum:1,pageSize:20,total:0}}},computed:{setHeader:function(){return{Token:Object(p.c)()}},upFileApi:function(){return"https://www.xiaoxiangyoupin.com/xxyp-manager/buyer/banner/config/uploadBannerGoods"}},methods:{discountValueChange:function(t){parseFloat(t.discountValue)>100&&(this.$message.error("折扣不可超过100%"),this.$nextTick(function(){t.discountValue=100}))},getActiveShopList:function(){var t=this;return l()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.j)({bannerId:t.indexBannerId,pageNum:t.activeShopPage.pageNum,pageSize:t.activeShopPage.pageSize});case 2:a=e.sent,t.shopList=a.dataList,t.activeShopPage.total=a.totalSize,t.activeShopPage.pageNum=a.currentPage;case 6:case"end":return e.stop()}},e,t)}))()},setCategoryShops:function(t){t.bannerId?(this.indexBannerId=t.bannerId,this.getActiveShopList(),this.dialogActiveDetail=!0):this.$message.error("请先保存专场在配置商品")},deletShop:function(t){var e=this;return l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(c.e)({ids:t});case 2:e.$message.success("删除商品成功"),e.getActiveShopList();case 4:case"end":return a.stop()}},a,e)}))()},saveGoods:function(t){var e=this;return l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t.discountType=2,a.next=3,Object(c.p)({goodsDTOs:[t]});case 3:e.$message.success("保存商品成功"),e.getActiveShopList();case 5:case"end":return a.stop()}},a,e)}))()},editGoodStatus:function(t){var e=this;return l()(r.a.mark(function a(){var o;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o=1===t.status?-1:1,a.next=3,Object(c.p)({goodsDTOs:[g()({},t,{status:o})]});case 3:e.$message.success("修改商品状态成功"),e.getActiveShopList();case 5:case"end":return a.stop()}},a,e)}))()},batchDelGoods:function(){if(this.seleShopRow.length>0){var t=this.seleShopRow.map(function(t){return t.id}).join();this.deletShop(t)}else this.showTip()},batchEditGoodsStatus:function(t){var e=this;return l()(r.a.mark(function a(){return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!(e.seleShopRow.length>0)){a.next=8;break}return e.seleShopRow.forEach(function(e){e.status=t}),a.next=4,Object(c.p)({goodsDTOs:e.seleShopRow});case 4:e.$message.success("批量修改商品状态成功"),e.getActiveShopList(),a.next=9;break;case 8:e.showTip();case 9:case"end":return a.stop()}},a,e)}))()},batchSaveGoods:function(){var t=this;return l()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.seleShopRow.length>0)){e.next=8;break}return t.seleShopRow.forEach(function(t){t.discountType=2}),e.next=4,Object(c.p)({goodsDTOs:t.seleShopRow});case 4:t.$message.success("批量保存商品成功"),t.getActiveShopList(),e.next=9;break;case 8:t.showTip();case 9:case"end":return e.stop()}},e,t)}))()},showTip:function(){this.$message.error("请先选中商品")},shopUpSucc:function(t){this.$confirm(t.data,"提示",{confirmButtonText:"确定",type:"warning"}),this.getActiveShopList()},handleShopSelectionChange:function(t){this.seleShopRow=t},handleCurrentActiveShopChange:function(t){this.activeShopPage.pageNum=t,this.getActiveShopList()},handleSizeActiveShopChange:function(t){this.activeShopPage.pageSize=t,this.getActiveShopList()}}},m=a("jZhI"),f=this,v={name:"uploadImg",props:{uploadUrl:{type:String,required:!0},handleAvatarSuccess:{type:Function,required:!0},onUploadError:{type:Function,default:function(){f.alertMessage("error","上传图片失败，请重新上传")}},imgUrl:{type:String,required:!0}},computed:{uploadHeader:function(){return{Token:Object(p.c)()}}},alertMessage:function(t,e){this.$message({type:t,message:e})}},S={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upload-img"},[a("el-upload",{staticClass:"avatar-uploader",attrs:{action:t.uploadUrl,headers:t.uploadHeader,"show-file-list":!1,"on-success":t.handleAvatarSuccess,"on-error":t.onUploadError}},[a("div",{staticClass:"upload-area"},[t.imgUrl?a("img",{staticClass:"avatar firstImg",attrs:{src:t.imgUrl}}):a("div",{staticClass:"noImgDisplay"},[t._v("\n        请点击上传按钮"),a("br"),t._v("上传图片\n      ")]),t._v(" "),t._t("default")],2)])],1)},staticRenderFns:[]};var b={name:"banner",components:{uploadImg:a("VU/8")(v,S,!1,function(t){a("Ekt/")},"data-v-2b62ed42",null).exports,pagination:a("+ThO").a},mixins:[u,h,m.a],data:function(){return{pageSize:10,tabledata:[],shelvesArr:[],shelvesData:"非嵌套专场配置",localName:null,localList:[],businessData:"小象买手",showType:9,bannerIndex:1,bannerIndexArr:[],uploadUrl:"https://www.xiaoxiangyoupin.com/xxyp-manager/upload/uploadPic",dialogActiveSetting:!1,addActiveFrom:""}},created:function(){this.getBannerTypeList()},methods:{getBannerTypeList:function(){var t=this;return l()(r.a.mark(function e(){var a;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(c.h)({type:9});case 2:a=e.sent,t.localList=a.data,t.localName=t.localList[0].type,t.getData();case 6:case"end":return e.stop()}},e,t)}))()},getData:function(){var t=this,e={type:this.localName,showType:this.showType,pageNum:this.currentPage,pageSize:this.pageSize};Object(c.g)(e).then(function(e){var a=e.dataList;t.tabledata=a.reverse(),t.bannerIndexArr=a[0].numList,t.totalSize=a.length})},btnType:function(t){var e="success";return 1===t&&(e="warning"),e},uploadImgDisplay:function(t){this.currentIndex=t},saveStateDelete:function(){var t=this;this.$confirm("你确定要删除当前数据吗？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then(function(){t.deleteConfirm()}).catch(function(e){t.deleteCancel(e)})},addStateDelete:function(){this.alertMessage("error","当前数据不存在，请先保存！")},demove:function(t,e){this.row=e,this.row.bannerId?this.saveStateDelete():this.tabledata.splice(t,1)},deleteConfirm:function(){var t=this;Object(c.c)({bannerId:this.row.bannerId}).then(function(){t.getData(),t.$message({type:"success",message:"删除成功!"})})},deleteCancel:function(t){this.$message({type:"info",message:"取消删除"})},save:function(t,e){var a=this;e.showType=this.showType,""!==e.name.trim()?Object(c.n)({bannerDTOs:[e]}).then(function(){a.getData(),a.alertMessage("success","保存成功")}):this.alertMessage("warning","请填写完整数据")},activeSetting:function(t,e){this.addActiveFrom=JSON.parse(i()(t)),this.setActiveIndex=e,this.dialogActiveSetting=!0},saveActiveSetting:function(){this.dialogActiveSetting=!1,this.save(this.setActiveIndex,this.addActiveFrom)},alertMessage:function(t,e){this.$message({type:t,message:e})},onUpdateStatus:function(t,e){var a=this;e.status=1===e.status?-1:1,Object(c.n)({bannerDTOs:[e]}).then(function(){a.getData(),a.alertMessage("success","状态切换成功")})},addData:function(){this.tabledata.splice(0,0,{name:"",displayType:1,colour:"",gotoUrl:"",status:1,type:this.localName,bannerType:this.showType,imgUrl:"",isByStages:1,display:2})},localNameChange:function(){this.getData()},handleAvatarSuccess:function(t){this.tabledata[this.currentIndex].imgUrl=t.data,this.alertMessage("success","图片上传成功")}}},y={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"xiaoxiang-wrapper xiaoxiang-wrapper-2"},[a("div",{staticClass:"header"},[a("el-form",{staticClass:"pd-15",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"所属业务"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.businessData,callback:function(e){t.businessData=e},expression:"businessData"}},[a("el-option",{attrs:{label:"小象买手",value:"小象买手"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"专场类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.shelvesData,callback:function(e){t.shelvesData=e},expression:"shelvesData"}},[a("el-option",{attrs:{label:"非嵌套专场配置",value:"非嵌套专场配置"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"位置名称"}},[a("el-select",{attrs:{placeholder:"请选择"},on:{change:t.localNameChange},model:{value:t.localName,callback:function(e){t.localName=e},expression:"localName"}},t._l(t.localList,function(t){return a("el-option",{key:t.type,attrs:{label:t.typeName,value:t.type}})}))],1),t._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:t.addData}},[t._v("新增专场")])],1)],1),t._v(" "),a("el-table",{staticClass:"lists",attrs:{border:"",data:t.tabledata,"empty-text":"暂无数据"}},[a("el-table-column",{attrs:{prop:"bannerId",label:"专场id",width:"65",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"name",label:"专场名称",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{placeholder:"专场名称",clearable:""},model:{value:e.row.name,callback:function(a){t.$set(e.row,"name",a)},expression:"scope.row.name"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"gotoUrl",label:"跳转链接"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{placeholder:"跳转链接",clearable:""},model:{value:e.row.gotoUrl,callback:function(a){t.$set(e.row,"gotoUrl",a)},expression:"scope.row.gotoUrl"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"imgUrl",label:"专场背景图片",width:"240",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("span",[a("uploadImg",{attrs:{"upload-url":t.uploadUrl,"handle-avatar-success":t.handleAvatarSuccess,"img-url":e.row.imgUrl}},[a("el-button",{staticClass:"uploadButton",attrs:{size:"small",type:"primary"},on:{click:function(a){t.uploadImgDisplay(e.$index)}}},[t._v(t._s(e.row.imgUrl?"重新上传":"图片上传"))])],1)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(a){t.save(e.$index,e.row)}}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(a){t.activeSetting(e.row,e.$index)}}},[t._v("专场设置")]),t._v(" "),20!==e.row.type?a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(a){t.setCategoryShops(e.row)}}},[t._v("配置商品")]):a("el-button",{attrs:{size:"medium",type:"primary"},on:{click:function(a){t.setBazaarCategoryShop(e.row.bannerId)}}},[t._v("配置商品")]),t._v(" "),a("el-button",{attrs:{size:"medium",type:t.btnType(e.row.status)},on:{click:function(a){t.onUpdateStatus(e.$index,e.row)}}},[t._v(t._s(1===e.row.status?"停用":"启用"))]),t._v(" "),a("el-button",{attrs:{size:"medium",type:"danger"},on:{click:function(a){t.demove(e.$index,e.row)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("el-pagination",{staticClass:"pagination other-pagination",attrs:{"current-page":t.currentPage,"page-sizes":[20,30,40,50],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.totalSize},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{attrs:{title:"专场详情",width:"96%",visible:t.dialogActiveDetail},on:{"update:visible":function(e){t.dialogActiveDetail=e}}},[a("div",{staticClass:"active-content"},[a("div",{staticClass:"flex just-center",staticStyle:{"margin-bottom":"10px"}},[a("div",[a("el-button",{attrs:{type:"primary"},on:{click:t.batchSaveGoods}},[t._v("批量保存")]),t._v(" "),a("el-button",{attrs:{type:"success"},on:{click:function(e){t.batchEditGoodsStatus(1)}}},[t._v("批量启用")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(e){t.batchEditGoodsStatus(-1)}}},[t._v("批量禁用")]),t._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:t.batchDelGoods}},[t._v("批量删除")])],1),t._v(" "),a("div",{staticClass:"flex"},[a("el-upload",{staticClass:"upload-shop",staticStyle:{"margin-left":"10px"},attrs:{"show-file-list":!1,action:t.upFileApi,data:{bannerId:t.indexBannerId},headers:t.setHeader,"on-success":t.shopUpSucc}},[a("el-button",{attrs:{type:"primary"}},[t._v("导入商品")])],1)],1)]),t._v(" "),a("div",{staticClass:"table-list"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.shopList,border:"",height:"350"},on:{"selection-change":t.handleShopSelectionChange}},[a("el-table-column",{attrs:{type:"selection",fixed:"left",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsCode",label:"商品编号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsName",label:"商品名称",width:"300"}}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsOriginalPrice",label:"原价(元)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t._f("priceFilter")(e.row.goodsOriginalPrice)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsPrice",label:"现售价(元)",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t._f("priceFilter")(e.row.goodsOriginalPrice*(e.row.discountValue/100))))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"freight",label:"运费(元)"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t._f("priceFilter")(e.row.freight)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"discountValue",label:"折扣",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",[a("el-input",{staticStyle:{width:"140px"},attrs:{size:"mini",placeholder:"折扣"},on:{input:function(a){t.discountValueChange(e.row)}},model:{value:e.row.discountValue,callback:function(a){t.$set(e.row,"discountValue",a)},expression:"scope.row.discountValue"}},[a("template",{slot:"prepend"},[t._v("%")])],2)],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsLimitation",label:"限购数量",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:"限购数量"},model:{value:e.row.goodsLimitation,callback:function(a){t.$set(e.row,"goodsLimitation",a)},expression:"scope.row.goodsLimitation"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsImg",label:"图片",width:"100"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.goodsImg,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsTitle",label:"运营小标题(选填)",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-input",{attrs:{size:"mini",placeholder:"运营小标题"},model:{value:e.row.goodsTitle,callback:function(a){t.$set(e.row,"goodsTitle",a)},expression:"scope.row.goodsTitle"}})]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"运营标签",width:"500"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"flex"},[a("el-radio",{attrs:{label:0},model:{value:e.row.goodsTag,callback:function(a){t.$set(e.row,"goodsTag",a)},expression:"scope.row.goodsTag"}},[t._v("无")]),t._v(" "),a("el-radio",{attrs:{label:1},model:{value:e.row.goodsTag,callback:function(a){t.$set(e.row,"goodsTag",a)},expression:"scope.row.goodsTag"}},[t._v("新人独享价")]),t._v(" "),a("el-radio",{attrs:{label:2},model:{value:e.row.goodsTag,callback:function(a){t.$set(e.row,"goodsTag",a)},expression:"scope.row.goodsTag"}},[t._v("秒杀价")]),t._v(" "),a("el-radio",{attrs:{label:3},model:{value:e.row.goodsTag,callback:function(a){t.$set(e.row,"goodsTag",a)},expression:"scope.row.goodsTag"}},[t._v("尝鲜价")]),t._v(" "),a("el-radio",{attrs:{label:4},model:{value:e.row.goodsTag,callback:function(a){t.$set(e.row,"goodsTag",a)},expression:"scope.row.goodsTag"}},[t._v("拼团价")])],1)]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"操作",fixed:"right",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.saveGoods(e.row)}}},[t._v("保存")]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.editGoodStatus(e.row)}}},[t._v(t._s(1===e.row.status?"禁用":"启用"))]),t._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.deletShop(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),a("div",{staticClass:"tc pagination-box"},[a("pagination",{attrs:{total:t.activeShopPage.total},on:{handleCurrentChange:t.handleCurrentActiveShopChange,handleSizeChange:t.handleSizeActiveShopChange}})],1)],1)])]),t._v(" "),a("el-dialog",{attrs:{title:"专场设置",visible:t.dialogActiveSetting},on:{"update:visible":function(e){t.dialogActiveSetting=e}}},[a("el-form",{attrs:{model:t.addActiveFrom,"label-width":"110px"}},[a("el-form-item",{attrs:{label:"是否支持分期"}},[a("el-radio",{attrs:{label:1},model:{value:t.addActiveFrom.isByStages,callback:function(e){t.$set(t.addActiveFrom,"isByStages",e)},expression:"addActiveFrom.isByStages"}},[t._v("支持分期")]),t._v(" "),a("el-radio",{attrs:{label:2},model:{value:t.addActiveFrom.isByStages,callback:function(e){t.$set(t.addActiveFrom,"isByStages",e)},expression:"addActiveFrom.isByStages"}},[t._v("不支持分期")])],1),t._v(" "),a("el-form-item",{attrs:{label:"前台展示样式"}},[a("el-radio",{attrs:{label:1},model:{value:t.addActiveFrom.display,callback:function(e){t.$set(t.addActiveFrom,"display",e)},expression:"addActiveFrom.display"}},[t._v("大图")]),t._v(" "),a("el-radio",{attrs:{label:2},model:{value:t.addActiveFrom.display,callback:function(e){t.$set(t.addActiveFrom,"display",e)},expression:"addActiveFrom.display"}},[t._v("样式1")]),t._v(" "),a("el-radio",{attrs:{label:3},model:{value:t.addActiveFrom.display,callback:function(e){t.$set(t.addActiveFrom,"display",e)},expression:"addActiveFrom.display"}},[t._v("样式2")])],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogActiveSetting=!1}}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.saveActiveSetting}},[t._v("保存")])],1)],1),t._v(" "),a("el-dialog",{attrs:{title:"配置商品",visible:t.dialogFormVisible,width:"90%"},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.dialogSetCategoryShopForm,inline:!0}},[a("el-form-item",{attrs:{label:"一级类目","label-width":"120"}},[a("el-select",{attrs:{size:"mini",placeholder:"请选择一级类目"},on:{change:t.dialogCategoryChangeOne},model:{value:t.dialogSetCategoryShopForm.gGategory1,callback:function(e){t.$set(t.dialogSetCategoryShopForm,"gGategory1",e)},expression:"dialogSetCategoryShopForm.gGategory1"}},t._l(t.dialogCategoryList.oneCategory,function(t){return a("el-option",{key:t.id,attrs:{label:t.categoryName,value:JSON.stringify({id:t.id,value:t.categoryName})}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"二级类目","label-width":"120"}},[a("el-select",{attrs:{size:"mini",placeholder:"请选择二级类目"},on:{change:t.dialogCategoryChangeTwo},model:{value:t.dialogSetCategoryShopForm.gGategory2,callback:function(e){t.$set(t.dialogSetCategoryShopForm,"gGategory2",e)},expression:"dialogSetCategoryShopForm.gGategory2"}},t._l(t.dialogCategoryList.twoCategory,function(t){return a("el-option",{key:t.id,attrs:{label:t.categoryName,value:JSON.stringify({id:t.id,value:t.categoryName})}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"三级类目","label-width":"120"}},[a("el-select",{attrs:{size:"mini",placeholder:"请选择三级类目"},model:{value:t.dialogSetCategoryShopForm.gGategory3,callback:function(e){t.$set(t.dialogSetCategoryShopForm,"gGategory3",e)},expression:"dialogSetCategoryShopForm.gGategory3"}},t._l(t.dialogCategoryList.threeCategory,function(t){return a("el-option",{key:t.id,attrs:{label:t.categoryName,value:JSON.stringify({id:t.id,value:t.categoryName})}})}))],1),t._v(" "),a("el-form-item",{attrs:{label:"商家名","label-width":"120"}},[a("el-input",{attrs:{size:"mini"},model:{value:t.dialogSetCategoryShopForm.shopName,callback:function(e){t.$set(t.dialogSetCategoryShopForm,"shopName",e)},expression:"dialogSetCategoryShopForm.shopName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品名称","label-width":"120"}},[a("el-input",{attrs:{size:"mini"},model:{value:t.dialogSetCategoryShopForm.goodsName,callback:function(e){t.$set(t.dialogSetCategoryShopForm,"goodsName",e)},expression:"dialogSetCategoryShopForm.goodsName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"商品编号","label-width":"120"}},[a("el-input",{attrs:{size:"mini"},model:{value:t.dialogSetCategoryShopForm.gId,callback:function(e){t.$set(t.dialogSetCategoryShopForm,"gId",e)},expression:"dialogSetCategoryShopForm.gId"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.clearShopForm}},[t._v("重置")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){t.getDiaLogShopList(1)}}},[t._v("查询")])],1)],1),t._v(" "),a("div",{staticClass:"flex flex-right",staticStyle:{"margin-bottom":"10px"}},[a("div",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){t.setGoodsStatus(t.seleShopGid,0)}}},[t._v("批量上架")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(e){t.setGoodsStatus(t.seleShopGid,1)}}},[t._v("批量下架")]),t._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:t.reloadShopDailog}},[t._v("刷新")])],1)]),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.shopDataList,border:"",height:"400"},on:{"selection-change":t.catgoryShopSeleChange}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"gId",label:"商品编号",width:"140","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"gTitle",label:"商品名称",width:"240","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"gImg",label:"商品主图",width:"100"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{height:"60px"},attrs:{src:t.row.gImg,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"purchasePrice",label:"起批价"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t._f("priceFilter")(e.row.purchasePrice)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"suggestPrice",label:"建议零售价",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t._f("priceFilter")(e.row.suggestPrice)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"gPrice",label:"售价"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t._f("priceFilter")(e.row.gPrice)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"gGategory1",label:"类目",width:"200","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(e.row.gGategory1)+"-"+t._s(e.row.gGategory2)+"-"+t._s(e.row.gGategory3))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"shopName",label:"商家名称",width:"200","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{prop:"gRate",label:"返佣比例"}}),t._v(" "),a("el-table-column",{attrs:{prop:"freight",label:"运费"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t._f("priceFilter")(e.row.freight)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"monthVolume",label:"30天成交量(1688)"}}),t._v(" "),a("el-table-column",{attrs:{prop:"skuCount",label:"sku",widtt:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.getShopSkuList(e.row.gId)}}},[t._v(t._s(e.row.skuCount)+"组sku")])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"goodsStatus",label:"上架状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(0===e.row.goodsStatus?"上架中":"已下架"))])]}}])}),t._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){t.setGoodsStatus(e.row.gId,0===e.row.goodsStatus?1:0)}}},[t._v(t._s(0===e.row.goodsStatus?"下架":"上架"))])]}}])})],1),t._v(" "),a("el-dialog",{attrs:{width:"90%",title:"sku详情",visible:t.dialogShopSkuDetails,"append-to-body":""},on:{"update:visible":function(e){t.dialogShopSkuDetails=e}}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.shopSkuDataList,border:"",height:"350"}},[a("el-table-column",{attrs:{type:"selection",width:"55"}}),t._v(" "),a("el-table-column",{attrs:{prop:"skuCode",label:"sku编号"}}),t._v(" "),a("el-table-column",{attrs:{prop:"skuStrs",label:"sku属性",width:"150"}}),t._v(" "),a("el-table-column",{attrs:{prop:"address",label:"图片"},scopedSlots:t._u([{key:"default",fn:function(t){return[a("img",{staticStyle:{width:"100px"},attrs:{src:t.row.gImg,alt:""}})]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"contractPrice",label:"起批价"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t._f("priceFilter")(e.row.contractPrice)))])]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"skuPrice",label:"售价"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("p",[t._v(t._s(t._f("priceFilter")(e.row.skuPrice)))])]}}])})],1)],1),t._v(" "),a("div",{staticClass:"margin-wrap pagination-wrap"},[a("el-pagination",{attrs:{background:"","current-page":t.dialogPageConfig.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.dialogPageConfig.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.dialogPageConfig.total},on:{"size-change":t.handleDailogShopSizeChange,"current-change":t.handleDailogShopCurrentChange}})],1)],1)],1)},staticRenderFns:[]};var _=a("VU/8")(b,y,!1,function(t){a("vbh9")},null,null);e.default=_.exports},jZhI:function(t,e,a){"use strict";var o=a("Dd8w"),i=a.n(o),s=a("Xxa5"),r=a.n(s),n=a("Gu7T"),l=a.n(n),c=a("exGp"),u=a.n(c),d=a("vk9j"),g=a("vLgD");function p(t){return Object(g.a)({url:"/msgoods/banner/getGoodsList",method:"POST",str:!0,data:t})}var h={data:function(){return{shopDataList:[],shopSkuDataList:[],dialogFormVisible:!1,dialogShopSkuDetails:!1,dialogPageConfig:{pageNum:1,pageSize:20,total:null},dialogSetCategoryShopForm:{gGategory1:"全部",gGategory2:"全部",gGategory3:"全部",status:2,shopName:"",goodsName:"",gId:""},seleShopGid:[],dialogCategoryList:{oneCategory:[{categoryName:"全部",id:"-1"}],twoCategory:[{categoryName:"全部",id:"-1"}],threeCategory:[{categoryName:"全部",id:"-1"}]}}},watch:{dialogFormVisible:function(t){t&&this.getCategoryDailogList({type:"oneCategory"})}},methods:{categoryShopFormInit:function(){this.dialogSetCategoryShopForm={gGategory1:"全部",gGategory2:"全部",gGategory3:"全部",shopName:"",goodsName:"",gId:"",status:2}},reloadShopDailog:function(){this.categoryShopFormInit(),this.lastQueryStatus=!1,this.dialogPageConfig.pageNum=1,this.getDiaLogShopList()},setBazaarCategoryShop:function(t){this.dialogFormVisible=!0,this.setbannerId=t,this.shopDataList=[],this.reloadShopDailog()},setCategoryShop:function(t){this.dialogFormVisible=!0,this.setCategoryId=t,this.shopDataList=[],this.reloadShopDailog()},getCategoryDailogList:function(t){var e=this,a=t.id,o=t.type;return u()(r.a.mark(function t(){var i;return r.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(d.d)(a);case 2:i=t.sent,e.dialogCategoryList[o]=[].concat(l()(e.dialogCategoryList[o]),l()(i.data));case 4:case"end":return t.stop()}},t,e)}))()},getDiaLogShopList:function(t){var e=this;return u()(r.a.mark(function a(){var o,s;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(1===t&&(e.dialogPageConfig.pageNum=1),(o=i()({},e.dialogSetCategoryShopForm,e.dialogPageConfig,{categoryName1:"",categoryName2:"",categoryName3:"",status:2})).categoryId=e.setCategoryId,o.bannerId=e.setbannerId,e.dialogSetCategoryShopForm.gGategory1.indexOf("{")>-1&&(o.categoryName1=JSON.parse(e.dialogSetCategoryShopForm.gGategory1).value),e.dialogSetCategoryShopForm.gGategory2.indexOf("{")>-1&&(o.categoryName2=JSON.parse(e.dialogSetCategoryShopForm.gGategory2).value),e.dialogSetCategoryShopForm.gGategory3.indexOf("{")>-1&&(o.categoryName3=JSON.parse(e.dialogSetCategoryShopForm.gGategory3).value),(1===t||e.lastQueryStatus)&&(o.status=1,e.lastQueryStatus=!0),s=void 0,1!==e.shopConfigType){a.next=15;break}return a.next=12,Object(d.e)(o);case 12:s=a.sent,a.next=18;break;case 15:return a.next=17,p(o);case 17:s=a.sent;case 18:e.dialogPageConfig.total=s.totalSize,e.shopDataList=s.dataList;case 20:case"end":return a.stop()}},a,e)}))()},dialogCategoryChangeOne:function(t){var e=JSON.parse(t).id;this.dialogCategoryList.twoCategory=[{categoryName:"全部",id:"-1"}],this.dialogSetCategoryShopForm.gGategory2="全部",this.dialogSetCategoryShopForm.gGategory3="全部",this.getCategoryDailogList({id:e,type:"twoCategory"})},dialogCategoryChangeTwo:function(t){var e=JSON.parse(t).id;this.dialogCategoryList.threeCategory=[{categoryName:"全部",id:"-1"}],this.dialogSetCategoryShopForm.gGategory3="全部",this.getCategoryDailogList({id:e,type:"threeCategory"})},changeVal:function(){},addCategory:function(){this.categoryDataList.push({categoryName:"",goodsCount:"",sort:""})},getShopSkuList:function(t){var e=this;return u()(r.a.mark(function a(){var o;return r.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return e.dialogShopSkuDetails=!0,a.next=3,Object(d.f)({goodsCode:t});case 3:o=a.sent,e.shopSkuDataList=o.data;case 5:case"end":return a.stop()}},a,e)}))()},setGoodsStatus:function(t,e){var a=this,o="下架",i="string"==typeof t?1:t.length;0!==i?(0===e&&(o="上架"),this.$confirm("确认"+(i>1?"批量":"")+o+"这"+i+"个商品吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(u()(r.a.mark(function s(){return r.a.wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(1!==a.shopConfigType){s.next=5;break}return s.next=3,Object(d.h)({categoryId:a.setCategoryId,goodsCodes:i>1?t.join():t,goodsStatus:e});case 3:s.next=7;break;case 5:return s.next=7,r={bannerId:a.setbannerId,goodsCodes:i>1?t.join():t,goodsStatus:e},void 0,void 0,void 0,n=r.bannerId,l=r.goodsCodes,c=r.goodsStatus,Object(g.a)({url:"/msgoods/banner/upperOrLowerGoods",method:"POST",str:!0,data:{bannerId:n,goodsCodes:l,goodsStatus:c}});case 7:a.$message.success(o+"成功"),a.getDiaLogShopList();case 9:case"end":return s.stop()}var r,n,l,c},s,a)})))):this.$message.error("请选择商品在进行上下架操作!")},clearShopForm:function(){for(var t in this.dialogSetCategoryShopForm)this.dialogSetCategoryShopForm[t]=""},catgoryShopSeleChange:function(t){this.seleShopGid=t.map(function(t){return t.gId})},handleDailogShopSizeChange:function(t){this.dialogPageConfig.pageSize=t,this.getDiaLogShopList()},handleDailogShopCurrentChange:function(t){this.dialogPageConfig.pageNum=t,this.getDiaLogShopList()},handleSizeChange:function(t){this.pageConfig.pageSize=t,this.getCategoryList()},handleCurrentChange:function(t){this.pageConfig.currentPage=t,this.getCategoryList()},getOldVal:function(t){var e=this.tabledata[t];this.oldSort=e.bannerIndex,this.bannerId=e.id}}};e.a=h},vbh9:function(t,e){},vk9j:function(t,e,a){"use strict";e.c=function(t){var e=t.businessName,a=t.positionName,i=t.pageNum,s=void 0===i?1:i,r=t.pageSize,n=void 0===r?20:r;return Object(o.a)({url:"/msgoods/tab/getCategory",method:"get",params:{businessName:e,positionName:a,pageNum:s,pageSize:n}})},e.g=function(t){return Object(o.a)({url:"/msgoods/tab/saveCategory",method:"POST",params:t})},e.a=function(t){return console.log(t),Object(o.a)({url:"/msgoods/tab/delCategory",method:"POST",params:{cid:t}})},e.b=function(t){var e=t.cid,a=t.status;return Object(o.a)({url:"/msgoods/tab/modifyStatus",method:"POST",str:!0,data:{cid:e,status:a}})},e.d=function(t){return Object(o.a)({url:"/msgoods/categoryLinkage",method:"POST",params:{id:t}})},e.h=function(t){var e=t.categoryId,a=t.goodsCodes,i=t.goodsStatus;return Object(o.a)({url:"/msgoods/tab/upperOrLowerGoods",method:"POST",str:!0,data:{categoryId:e,goodsCodes:a,goodsStatus:i}})},e.e=function(t){return Object(o.a)({url:"/msgoods/tab/getGoodsList",method:"POST",str:!0,data:t})},e.f=function(t){return Object(o.a)({url:"/msgoods/getGsGoodSkuList",method:"POST",str:!0,data:t})};var o=a("vLgD")}});