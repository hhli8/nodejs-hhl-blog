webpackJsonp([64],{"+T/6":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("Dd8w"),s=i.n(a),o=i("mvHQ"),n=i.n(o),c=i("Xxa5"),r=i.n(c),l=i("Gu7T"),d=i.n(l),u=i("exGp"),v=i.n(u),p=i("o+mB"),f=i("TIfe"),m={data:function(){return{form:{},activeList:[],activeTime:[],shopList:[],defaultActiveTime:{},defaultActiveTimeId:null,addActiveFrom:{},dialogAddActive:!1,dialogActiveDetail:!1,dialogAddActiveTime:!1,dialogActiveSetting:!1,activeShopPage:{pageNum:1,pageSize:20,total:0}}},computed:{setHeader:function(){return{Token:Object(f.c)()}},upLoadActiveApi:function(){return"https://www.xiaoxiangyoupin.com/xxyp-manager/buyer/banner/config/uploadKillGoods"},upFileApi:function(){return"https://www.xiaoxiangyoupin.com/xxyp-manager/buyer/banner/config/uploadBannerGoods"}},components:{pagination:i("+ThO").a},watch:{defaultActiveTimeId:function(t,e){t!==e&&this.getActiveShopList()}},mounted:function(){this.getSekillList()},methods:{issueActiveTime:function(){var t=this;return v()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.p)({goodsDTOs:[].concat(d()(t.shopList))});case 2:t.$message.success("发布成功"),t.getActiveShopList();case 4:case"end":return e.stop()}},e,t)}))()},ActiveUpSucc:function(t){this.$confirm(t.data,"提示",{confirmButtonText:"确定",type:"warning"}),this.getSekillList()},discountValueChange:function(t){parseFloat(t.discountValue)>100&&(this.$message.error("折扣不可超过100%"),this.$nextTick(function(){t.discountValue=100}))},getSekillList:function(){var t=this;return v()(r.a.mark(function e(){var i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.k)();case 2:i=e.sent,t.activeList=i.data;case 4:case"end":return e.stop()}},e,t)}))()},getSKillActiveTimeList:function(t){var e=this;return v()(r.a.mark(function i(){var a;return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(p.g)({type:13,saleDate:t});case 2:a=i.sent,e.activeTime=a.dataList,e.addActiveTimeIndex=t,e.dialogActiveDetail=!0;try{e.defaultActiveTimeId=a.dataList[0].bannerId,e.defaultActiveTime=JSON.parse(n()(a.dataList[0]))}catch(t){e.$message.error(t)}case 7:case"end":return i.stop()}},i,e)}))()},rowDbClick:function(t){var e=t.saleDate;this.getSKillActiveTimeList(e)},getActiveShopList:function(){var t=this;return v()(r.a.mark(function e(){var i;return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.j)({bannerId:t.defaultActiveTimeId,pageNum:t.activeShopPage.pageNum,pageSize:t.activeShopPage.pageSize});case 2:i=e.sent,t.shopList=i.dataList,t.activeShopPage.total=i.totalSize,t.activeShopPage.pageNum=i.currentPage;case 6:case"end":return e.stop()}},e,t)}))()},deletShop:function(t){var e=this;return v()(r.a.mark(function i(){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(p.e)({ids:t});case 2:e.$message.success("删除商品成功"),e.getActiveShopList();case 4:case"end":return i.stop()}},i,e)}))()},saveGoods:function(t){var e=this;return v()(r.a.mark(function i(){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t.discountType=2,i.next=3,Object(p.p)({goodsDTOs:[t]});case 3:e.$message.success("保存商品成功"),e.getActiveShopList();case 5:case"end":return i.stop()}},i,e)}))()},editGoodStatus:function(t){var e=this;return v()(r.a.mark(function i(){var a;return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return a=1===t.status?-1:1,i.next=3,Object(p.p)({goodsDTOs:[s()({},t,{status:a})]});case 3:e.$message.success("修改商品状态成功"),e.getActiveShopList();case 5:case"end":return i.stop()}},i,e)}))()},addActiveSkill:function(){var t=this;return v()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.n)({bannerDTOs:[{type:13,code:2,showType:10,saleDate:t.addActiveFrom.saleDate,status:1,isByStages:1}]});case 2:t.dialogAddActive=!1,t.$message.success("新增专场成功"),t.getSekillList();case 5:case"end":return e.stop()}},e,t)}))()},addActiveTimeSkill:function(){var t=this;return v()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.n)({bannerDTOs:[{type:13,code:2,showType:10,saleDate:t.addActiveTimeIndex,saleTime:t.addActiveFrom.time,status:1,isByStages:1}]});case 2:t.dialogAddActiveTime=!1,t.$message.success("新增成功"),t.getSKillActiveTimeList(t.addActiveTimeIndex);case 5:case"end":return e.stop()}},e,t)}))()},editActiveSkTime:function(){var t=this;return v()(r.a.mark(function e(){return r.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(p.n)({bannerDTOs:[t.defaultActiveTime]});case 2:t.$message.success("修改成功"),t.dialogActiveSetting=!1,t.getSKillActiveTimeList(t.addActiveTimeIndex);case 5:case"end":return e.stop()}},e,t)}))()},delectActiveTime:function(t){var e=this;this.$confirm("确认删除该专场吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(v()(r.a.mark(function i(){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(p.c)({bannerId:t.bannerId});case 2:e.getSKillActiveTimeList(e.addActiveTimeIndex),e.$message.success("删除专场成功!");case 4:case"end":return i.stop()}},i,e)})))},delectActive:function(t){var e=this;this.$confirm("确认删除该专场吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(v()(r.a.mark(function i(){return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,Object(p.r)({saleDate:t.saleDate,type:2});case 2:e.$message.success("删除专场成功!"),e.getSekillList();case 4:case"end":return i.stop()}},i,e)})))},shopUpSucc:function(t){this.$confirm(t.data,"提示",{confirmButtonText:"确定",type:"warning"}),this.getActiveShopList()},activeEditStatus:function(t){var e=this;this.$confirm("确认修改该专场状态吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(v()(r.a.mark(function i(){var a;return r.a.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return a=1===t.status?-1:1,i.next=3,Object(p.r)({saleDate:t.saleDate,type:1,status:a});case 3:e.$message.success("专场状态修改成功"),t.status=a;case 5:case"end":return i.stop()}},i,e)})))},handleCurrentActiveShopChange:function(t){this.activeShopPage.pageNum=t,this.getActiveShopList()},handleSizeActiveShopChange:function(t){this.activeShopPage.pageSize=t,this.getActiveShopList()}}},g={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"buyel-hot-sala pd-15"},[i("div",{staticClass:"form sele-active"},[i("el-form",{attrs:{inline:!0,model:t.form,"label-width":"80px"}},[i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:function(e){t.dialogAddActive=!0}}},[t._v("新增专场")])],1),t._v(" "),i("el-form-item",[i("el-upload",{staticClass:"upload-shop",staticStyle:{"margin-left":"10px"},attrs:{"show-file-list":!1,action:t.upLoadActiveApi,headers:t.setHeader,"on-success":t.ActiveUpSucc}},[i("el-button",{attrs:{type:"primary"}},[t._v("导入专场")])],1)],1)],1)],1),t._v(" "),i("div",[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.activeList,border:""},on:{"row-dblclick":t.rowDbClick}},[i("el-table-column",{attrs:{prop:"name",label:"专场时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("p",[t._v(t._s(e.row.saleDate))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"number",label:"专场数量"}}),t._v(" "),i("el-table-column",{attrs:{prop:"address",label:"操作",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini",type:1===e.row.status?"danger":"success"},on:{click:function(i){t.activeEditStatus(e.row)}}},[t._v("\n\t\t\t\t\t\t\t"+t._s(1===e.row.status?"禁用":"启用")+"\n\t\t\t\t\t\t")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){t.delectActive(e.row)}}},[t._v("删除\n\t\t\t\t\t\t")])]}}])})],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"专场详情",width:"96%",visible:t.dialogActiveDetail},on:{"update:visible":function(e){t.dialogActiveDetail=e}}},[i("div",{staticClass:"active-content"},[i("div",{staticClass:"flex just-center"},[i("div",{staticClass:"active-time"},t._l(t.activeTime,function(e){return i("span",{key:e.id,staticStyle:{"margin-right":"10px"},on:{click:function(i){t.defaultActiveTimeId=e.bannerId,t.defaultActiveTime=JSON.parse(JSON.stringify(e))}}},[i("el-tag",{attrs:{type:t.defaultActiveTimeId===e.bannerId?"primary":"info",closable:""},on:{close:function(i){t.delectActiveTime(e)}}},[t._v("\n\t\t\t\t\t\t\t\t"+t._s(e.saleTime)+"\n\t\t\t\t\t\t\t")])],1)})),t._v(" "),i("div",{staticClass:"flex",staticStyle:{width:"340px","min-width":"300px"}},[i("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(e){t.dialogAddActiveTime=!0}}},[t._v("新增专场")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"warning"},on:{click:function(e){t.dialogActiveSetting=!0}}},[t._v("专场设置")]),t._v(" "),i("el-button",{attrs:{size:"small",type:"warning"},on:{click:t.issueActiveTime}},[t._v("发布")]),t._v(" "),i("el-upload",{staticClass:"upload-shop",staticStyle:{"margin-left":"10px"},attrs:{"show-file-list":!1,action:t.upFileApi,data:{bannerId:t.defaultActiveTimeId},headers:t.setHeader,"on-success":t.shopUpSucc}},[i("el-button",{attrs:{type:"primary"}},[t._v("导入商品")])],1)],1)]),t._v(" "),i("div",{staticClass:"table-list"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.shopList,border:"",height:"350"}},[i("el-table-column",{attrs:{prop:"goodsCode",label:"商品编号"}}),t._v(" "),i("el-table-column",{attrs:{prop:"goodsName",label:"商品名称",width:"300"}}),t._v(" "),i("el-table-column",{attrs:{prop:"goodsOriginalPrice",label:"原价(元)"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("p",[t._v(t._s(t._f("priceFilter")(e.row.goodsOriginalPrice)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"goodsPrice",label:"现售价(元)",width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("p",[t._v(t._s(t._f("priceFilter")(e.row.goodsOriginalPrice*(e.row.discountValue/100))))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"freight",label:"运费(元)"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("p",[t._v(t._s(t._f("priceFilter")(e.row.freight)))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"discountValue",label:"折扣",width:"180"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",[i("el-input",{staticStyle:{width:"140px"},attrs:{size:"mini",placeholder:"折扣"},on:{input:function(i){t.discountValueChange(e.row)}},model:{value:e.row.discountValue,callback:function(i){t.$set(e.row,"discountValue",i)},expression:"scope.row.discountValue"}},[i("template",{slot:"prepend"},[t._v("%")])],2)],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"goodsLimitation",label:"限购数量",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{staticStyle:{width:"80px"},attrs:{size:"mini",placeholder:"限购数量"},model:{value:e.row.goodsLimitation,callback:function(i){t.$set(e.row,"goodsLimitation",i)},expression:"scope.row.goodsLimitation"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"goodsImg",label:"图片",width:"100"},scopedSlots:t._u([{key:"default",fn:function(t){return[i("img",{staticStyle:{height:"60px"},attrs:{src:t.row.goodsImg,alt:""}})]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"goodsTitle",label:"运营小标题(选填)",width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-input",{attrs:{size:"mini",placeholder:"运营小标题"},model:{value:e.row.goodsTitle,callback:function(i){t.$set(e.row,"goodsTitle",i)},expression:"scope.row.goodsTitle"}})]}}])}),t._v(" "),i("el-table-column",{attrs:{label:"运营标签",width:"400"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticClass:"flex"},[i("el-radio",{attrs:{label:0},model:{value:e.row.goodsTag,callback:function(i){t.$set(e.row,"goodsTag",i)},expression:"scope.row.goodsTag"}},[t._v("无")]),t._v(" "),i("el-radio",{attrs:{label:1},model:{value:e.row.goodsTag,callback:function(i){t.$set(e.row,"goodsTag",i)},expression:"scope.row.goodsTag"}},[t._v("新人独享价")]),t._v(" "),i("el-radio",{attrs:{label:2},model:{value:e.row.goodsTag,callback:function(i){t.$set(e.row,"goodsTag",i)},expression:"scope.row.goodsTag"}},[t._v("秒杀价")]),t._v(" "),i("el-radio",{attrs:{label:3},model:{value:e.row.goodsTag,callback:function(i){t.$set(e.row,"goodsTag",i)},expression:"scope.row.goodsTag"}},[t._v("尝鲜价")]),t._v(" "),i("el-radio",{attrs:{label:4},model:{value:e.row.goodsTag,callback:function(i){t.$set(e.row,"goodsTag",i)},expression:"scope.row.goodsTag"}},[t._v("拼团价")])],1)]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"address",label:"操作",fixed:"right",width:"240"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.saveGoods(e.row)}}},[t._v("保存")]),t._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.editGoodStatus(e.row)}}},[t._v(t._s(1===e.row.status?"禁用":"启用"))]),t._v(" "),i("el-button",{attrs:{size:"mini"},on:{click:function(i){t.deletShop(e.row.id)}}},[t._v("删除")])]}}])})],1),t._v(" "),i("div",{staticClass:"tc pagination-box"},[i("pagination",{attrs:{total:t.activeShopPage.total},on:{handleCurrentChange:t.handleCurrentActiveShopChange,handleSizeChange:t.handleSizeActiveShopChange}})],1)],1)])]),t._v(" "),i("el-dialog",{attrs:{title:"新建专场",visible:t.dialogAddActive},on:{"update:visible":function(e){t.dialogAddActive=e}}},[i("el-form",{attrs:{model:t.addActiveFrom,"label-width":"110px"}},[i("el-form-item",{attrs:{label:"选择专场时间"}},[i("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:t.addActiveFrom.saleDate,callback:function(e){t.$set(t.addActiveFrom,"saleDate",e)},expression:"addActiveFrom.saleDate"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogAddActive=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.addActiveSkill}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"新建专场",visible:t.dialogAddActiveTime},on:{"update:visible":function(e){t.dialogAddActiveTime=e}}},[i("el-form",{attrs:{model:t.addActiveFrom,"label-width":"110px"}},[i("el-form-item",{attrs:{label:"选择专场时间"}},[i("el-time-select",{attrs:{"picker-options":{start:"00:00",step:"00:60",end:"23:59:00"},placeholder:"选择时间"},model:{value:t.addActiveFrom.time,callback:function(e){t.$set(t.addActiveFrom,"time",e)},expression:"addActiveFrom.time"}})],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogAddActiveTime=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.addActiveTimeSkill}},[t._v("确 定")])],1)],1),t._v(" "),i("el-dialog",{attrs:{title:"专场设置",visible:t.dialogActiveSetting},on:{"update:visible":function(e){t.dialogActiveSetting=e}}},[i("el-form",{attrs:{model:t.defaultActiveTime,"label-width":"110px"}},[i("el-form-item",{attrs:{label:"开始时间"}},[i("el-time-select",{attrs:{"picker-options":{start:"00:00",step:"00:60",end:"23:59:00"},placeholder:"选择时间"},model:{value:t.defaultActiveTime.saleTime,callback:function(e){t.$set(t.defaultActiveTime,"saleTime",e)},expression:"defaultActiveTime.saleTime"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"是否支持分期"}},[i("el-radio",{attrs:{label:1},model:{value:t.defaultActiveTime.isByStages,callback:function(e){t.$set(t.defaultActiveTime,"isByStages",e)},expression:"defaultActiveTime.isByStages"}},[t._v("支持分期")]),t._v(" "),i("el-radio",{attrs:{label:2},model:{value:t.defaultActiveTime.isByStages,callback:function(e){t.$set(t.defaultActiveTime,"isByStages",e)},expression:"defaultActiveTime.isByStages"}},[t._v("不支持分期")])],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogActiveSetting=!1}}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:t.editActiveSkTime}},[t._v("保存")])],1)],1)],1)},staticRenderFns:[]};var h=i("VU/8")(m,g,!1,function(t){i("uOj9")},"data-v-59d288c4",null);e.default=h.exports},uOj9:function(t,e){}});