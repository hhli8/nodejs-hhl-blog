webpackJsonp([53],{KbTa:function(e,a){},n9W3:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("Xxa5"),l=t.n(r),n=t("exGp"),s=t.n(n),c=t("sRFG"),o={name:"dataPge",components:{},props:{},data:function(){return{activeTabName:"totalData",searchData:{DataValue:[new Date,new Date],userId:"",userPhone:"",nickName:"",authId:""},roleOptions:[{value:"2",label:"普通用户"},{value:"3",label:"白名单用户"},{value:"1",label:"PGC用户"}],tableData:[{id:"1",dataTime:"11",noteCount:"22",praiseNumber:"33",commentNumber:"44",shareNumber:"55",focusNumber:"66",collectNumber:"77",userId:"1111",nickName:"03",userPhone:"1234556453",userType:1}],targetType:1,totalPage:0,totalSize:0,currentPage:1,pageSize:20,loading:!1}},watch:{activeTabName:{handler:function(e){switch(e){case"totalData":this.targetType=1;break;case"userData":this.targetType=2}this.currentPage=1,this.tableData=[],this.handlerGetDataList(!1)},immediate:!0},searchData:{handler:function(e){e.DataValue||(e.DataValue=[new Date,new Date]),console.log(e),console.log(this.timeFilter(this.searchData.DataValue[0]),this.timeFilter(this.searchData.DataValue[1]))},deep:!0}},computed:{},mounted:function(){this.handlerGetDataList(!1)},methods:{getUserType:function(e){var a="";return 1===e?a="pgc用户":2===e?a="普通用户":3===e&&(a="白名单用户"),a},handlerGetDataList:function(e){var a=this;this.loading=!0;var t=this.searchData.DataValue?this.timeFilter(this.searchData.DataValue[0]):new Date,r=this.searchData.DataValue?this.timeFilter(this.searchData.DataValue[1]):new Date;return console.log(t),Object(c.a)({startTime:t,endTime:r,userId:this.searchData.userId,userPhone:this.searchData.userPhone,authId:this.searchData.authId,nickName:this.searchData.nickName,device:e,type:this.targetType,currentPage:this.currentPage,pageSize:this.pageSize}).then(function(e){a.tableData=e.dataList,a.totalSize=e.totalSize,a.currentPage=e.currentPage,a.loading=!1}).catch(function(e){a.loading=!0,console.log(e)})},handlerExportData:function(e){var a=this;this.$confirm("确定要导出数据?","导出数据",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(s()(l.a.mark(function t(){return l.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,a.handlerExportDataList(e);case 2:a.$message({type:"success",message:"操作成功!"});case 3:case"end":return t.stop()}},t,a)}))).catch(function(){a.$message({type:"info",message:"已取消操作"})})},handlerExportDataList:function(e){var a=this,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=this.searchData.DataValue?this.timeFilter(this.searchData.DataValue[0]):"",l=this.searchData.DataValue?this.timeFilter(this.searchData.DataValue[1]):"";return Object(c.a)({startTime:r,endTime:l,userId:this.searchData.userId,userPhone:this.searchData.userPhone,authId:this.searchData.authId,nickName:this.searchData.nickName,device:e,type:this.targetType,currentPage:this.currentPage,pageSize:this.pageSize},t).then(function(e){console.log(e);var t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document;charset=utf-8"}),n=document.createElement("a"),s=window.URL.createObjectURL(t);n.href=s;var c=1===a.targetType?"总体数据汇总":"用户事件记录";r&&l&&(c=c+r+"_"+l),n.download=c+".xls",document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(s)}).catch(function(e){a.$message.error(e)})},handleCurrentChange:function(){this.currentPage=1,this.pageSize=20,this.searchData={DataValue:"",userId:"",userPhone:"",nickName:"",authId:""}},timeFilter:function(e){var a=new Date(e),t=a.getFullYear(),r=a.getMonth()+1,l=a.getDate(),n=a.getHours(),s=a.getMinutes(),c=a.getSeconds();return t+"-"+(r=r<10?"0"+r:r)+"-"+(l=l<10?"0"+l:l)+" "+(n=n<10?"0"+n:n)+":"+(s=s<10?"0"+s:s)+":"+(c=c<10?"0"+c:c)}}},i={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"faceworld-data"},[t("el-container",[t("el-tabs",{staticStyle:{width:"100%"},attrs:{type:"border-card"},on:{"tab-click":e.handleCurrentChange},model:{value:e.activeTabName,callback:function(a){e.activeTabName=a},expression:"activeTabName"}},[t("el-tab-pane",{attrs:{label:"总体数据",name:"totalData"}},[t("el-container",[t("el-header",[t("div",{staticClass:"data-header"},[t("el-row",[t("el-col",{staticStyle:{"line-height":"40px"},attrs:{span:1}},[e._v("\n                    日期:\n                  ")]),e._v(" "),t("el-col",{attrs:{span:10}},[t("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchData.DataValue,callback:function(a){e.$set(e.searchData,"DataValue",a)},expression:"searchData.DataValue"}})],1),e._v(" "),t("el-col",{attrs:{span:6}},[t("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(a){e.handlerGetDataList(!1)}}},[e._v("查询")]),e._v(" "),t("el-button",{attrs:{plain:"",icon:"el-icon-upload2"},on:{click:function(a){e.handlerExportData(!0)}}},[e._v("导出")])],1)],1)],1)]),e._v(" "),t("el-main",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{prop:"id",label:"序号",width:"50",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"dataTime",label:"日期",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"noteCount",label:"上传笔记数",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"praiseNumber",label:"点赞数",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"commentNumber",label:"评论数",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"shareNumber",label:"分享数",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"focusNumber",label:"关注笔记数",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"focusUserNumber",label:"关注用户数",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"collectNumber",label:"收藏数",align:"center"}})],1)],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.totalSize>0,expression:"totalSize>0"}],staticClass:"pagination-container"},[t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"prev, pager, next, jumper",total:e.totalSize},on:{"current-change":function(a){e.handlerGetDataList(!1)},"update:currentPage":function(a){e.currentPage=a}}})],1)],1)],1),e._v(" "),t("el-tab-pane",{attrs:{label:"用户事件记录",name:"userData"}},[t("el-container",[t("el-header",[t("div",{staticClass:"data-header"},[t("el-row",{attrs:{gutter:10}},[t("el-col",{attrs:{span:3}},[t("el-input",{attrs:{placeholder:"用户ID"},model:{value:e.searchData.userId,callback:function(a){e.$set(e.searchData,"userId",a)},expression:"searchData.userId"}})],1),e._v(" "),t("el-col",{attrs:{span:3}},[t("el-input",{attrs:{placeholder:"手机号"},model:{value:e.searchData.userPhone,callback:function(a){e.$set(e.searchData,"userPhone",a)},expression:"searchData.userPhone"}})],1),e._v(" "),t("el-col",{attrs:{span:3}},[t("el-input",{attrs:{placeholder:"昵称"},model:{value:e.searchData.nickName,callback:function(a){e.$set(e.searchData,"nickName",a)},expression:"searchData.nickName"}})],1),e._v(" "),t("el-col",{attrs:{span:3}},[t("el-select",{attrs:{placeholder:"用户角色"},model:{value:e.searchData.authId,callback:function(a){e.$set(e.searchData,"authId",a)},expression:"searchData.authId"}},e._l(e.roleOptions,function(e){return t("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1),e._v(" "),t("el-col",{attrs:{span:8}},[t("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期"},model:{value:e.searchData.DataValue,callback:function(a){e.$set(e.searchData,"DataValue",a)},expression:"searchData.DataValue"}})],1),e._v(" "),t("el-col",{attrs:{span:4}},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){e.handlerGetDataList(!1)}}},[e._v("查询")]),e._v(" "),t("el-button",{attrs:{plain:"",icon:"el-icon-upload2"},on:{click:function(a){e.handlerExportData(!0)}}},[e._v("导出")])],1)],1)],1)]),e._v(" "),t("el-main",[t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:""}},[t("el-table-column",{attrs:{type:"index",width:"50",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"dataTime",label:"日期",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"userId",label:"用户ID",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"userPhone",label:"用户手机号",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"nickName",label:"昵称",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"userType",label:"用户角色",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n                    "+e._s(e.getUserType(a.row.userType))+"\n                  ")]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"noteCount",label:"上传笔记数",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"focusNumber",label:"粉丝数",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"praiseNumber",label:"点赞数",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"commentNumber",label:"评论数",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"shareNumber",label:"分享数",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"focusTopicNumber",label:"关注笔记数",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"focusUserNumber",label:"关注用户数",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"collectNumber",label:"收藏数",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"",label:"互动数",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[e._v("\n                    "+e._s(a.row.focusNumber+a.row.praiseNumber+a.row.commentNumber+a.row.shareNumber+a.row.collectNumber)+"\n                  ")]}}])})],1)],1),e._v(" "),t("div",{directives:[{name:"show",rawName:"v-show",value:e.totalSize>0,expression:"totalSize>0"}],staticClass:"pagination-container"},[t("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"prev, pager, next, jumper",total:e.totalSize},on:{"current-change":function(a){e.handlerGetDataList(!1)},"update:currentPage":function(a){e.currentPage=a}}})],1)],1)],1)],1)],1)],1)},staticRenderFns:[]};var u=t("VU/8")(o,i,!1,function(e){t("KbTa")},"data-v-b2ad81c8",null);a.default=u.exports}});