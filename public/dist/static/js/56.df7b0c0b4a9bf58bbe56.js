webpackJsonp([56],{"4BzJ":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=a("mvHQ"),s=a.n(o),i=a("vLgD");function l(t){return Object(i.a)({url:"hotSearch/shoppingguide/list",method:"post",params:t})}var n={name:"spiderHotSearch",components:{},props:{},data:function(){return{pageNum:1,total:0,pageSize:10,searchkey:"",tableData:[],postdata:{hotSearchName:null,orderNum:null},dialogFormVisible:!1,dialogTitle:"新增热门搜索",formLabelWidth:"120px",totalPage:1}},computed:{},created:function(){this.getListFn()},watch:{totalPage:function(t){var e=this;this.pageNum>t&&(this.pageNum=t,l({key:this.searchkey,pageNum:this.pageNum,pageSize:this.pageSize}).then(function(t){console.log(t),e.tableData=t.dataList,e.total=t.totalSize,e.totalPage=t.totalPage}))}},mouted:function(){},methods:{clearsearch:function(){this.searchkey="",this.searchFn()},addBtnClick:function(){this.postdata={hotSearchName:null,orderNum:null},this.dialogTitle="新增热门搜索",this.dialogFormVisible=!0},addHotSearchFn:function(){var t,e=this;(t=this.postdata,Object(i.a)({url:"hotSearch/shoppingguide/save",method:"post",params:t})).then(function(t){console.log(t),e.dialogFormVisible=!1,e.$message({type:"success",message:"新增成功!"}),e.getListFn()})},editHotSearchFn:function(){var t,e=this;(t=this.postdata,Object(i.a)({url:"hotSearch/shoppingguide/update",method:"post",params:t})).then(function(t){console.log(t),e.dialogFormVisible=!1,e.$message({type:"success",message:"修改成功!"}),e.getListFn()})},postFn:function(){this.postdata.id?this.editHotSearchFn():this.addHotSearchFn()},backFn:function(){this.dialogFormVisible=!1},searchFn:function(){this.pageNum=1,this.getListFn()},getListFn:function(){var t=this;l({key:this.searchkey,pageNum:this.pageNum,pageSize:this.pageSize}).then(function(e){console.log(e),t.tableData=e.dataList,t.total=e.totalSize,t.totalPage=e.totalPage})},editClick:function(t,e){this.postdata=JSON.parse(s()(t)),console.log(t,"row"),this.dialogTitle="修改热门搜索",this.dialogFormVisible=!0},deleteClick:function(t,e){var a=this;console.log(t,"index"),console.log(e,"index"),this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var e;(e={id:t.id},Object(i.a)({url:"hotSearch/shoppingguide/delete",method:"post",params:e})).then(function(t){a.$message({type:"success",message:"删除成功!"}),a.getListFn()})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},handleSizeChange:function(t){console.log("每页 "+t+" 条"),this.pageSize=t,this.getListFn()},handleCurrentChange:function(t){console.log("当前页: "+t),this.pageNum=t,this.getListFn()}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"spiderHotSearch"},[a("el-row",{staticClass:"add-hot-search"},[a("el-col",{staticClass:"hotsearch",attrs:{span:5}},[a("div",[a("el-input",{staticClass:"input-with-select",attrs:{clearable:"",placeholder:"请输入内容"},model:{value:t.searchkey,callback:function(e){t.searchkey=e},expression:"searchkey"}},[a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.searchFn},slot:"append"})],1)],1)]),t._v(" "),a("el-button",{staticClass:"add-btn",attrs:{size:"small",type:"primary",icon:"el-icon-plus"},on:{click:t.addBtnClick}},[t._v("新增")]),t._v(" "),a("el-button",{staticClass:"add-btn",attrs:{plain:""},on:{click:t.clearsearch}},[t._v("重置搜索")])],1),t._v(" "),a("el-row",{staticClass:"hot-search-list"},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[a("el-table-column",{attrs:{prop:"hotSearchName",align:"center",label:"热门搜索标题"}}),t._v(" "),a("el-table-column",{attrs:{prop:"orderNum",align:"center",label:"排序"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.editClick(e.row,e.index)}}},[t._v("编辑")]),t._v(" "),a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){t.deleteClick(e.row,e.index)}}},[t._v("删除")])]}}])})],1)],1),t._v(" "),a("el-row",{staticClass:"page-box"},[a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"page-sizes":[10,20,30,40],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]),t._v(" "),t.dialogFormVisible?a("el-dialog",{attrs:{title:t.dialogTitle,visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{attrs:{model:t.postdata}},[a("el-form-item",{attrs:{label:"热门搜索标题","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.postdata.hotSearchName,callback:function(e){t.$set(t.postdata,"hotSearchName",e)},expression:"postdata.hotSearchName"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"排序","label-width":t.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off"},model:{value:t.postdata.orderNum,callback:function(e){t.$set(t.postdata,"orderNum",e)},expression:"postdata.orderNum"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.backFn}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:t.postFn}},[t._v("确 定")])],1)],1):t._e()],1)},staticRenderFns:[]};var r=a("VU/8")(n,c,!1,function(t){a("Im1A")},null,null);e.default=r.exports},Im1A:function(t,e){}});