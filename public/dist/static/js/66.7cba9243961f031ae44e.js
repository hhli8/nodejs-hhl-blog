webpackJsonp([66],{"0Kxs":function(e,a){},bEm2:function(e,a,t){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var r=t("mvHQ"),o=t.n(r),i=t("Y3Gt"),s={data:function(){return{secondName:"",secondData:[],crawparamDialog:!1,outerVisible:!1,priceConf:{sysPriceRatio:"",gRate:""},formLabelWidth:"120px",crawParam:{searchWords:"",repurchaseRate:"",monthVolume:"",minPrice:"",maxPrice:""},pageSize:10,pageNum:1,currentPage:1,totalSize:0}},created:function(){this.secondName=this.$route.query.categoryName,this.categorOneyName=this.$route.query.categorOneyName,this.categoryId=this.$route.query.categoryId,this.getSecondLst()},methods:{getSecondLst:function(){var e=this,a={pageNum:e.pageNum,pageSize:e.pageSize,level:3,categoryName:e.secondName,categoryId:e.categoryId};i.a.getCategoryList(a).then(function(a){for(var t=0;t<a.dataList.length;t++)a.dataList[t].categorTwoyName=e.secondName,a.dataList[t].categorOneyName=e.categorOneyName;e.secondData=a.dataList,e.totalSize=a.totalSize}).catch()},goSecondList:function(e){console.log(e),this.$router.push({name:"thirdCategory",query:{parentId:e.categoryId,categoryName:e.categoryName}})},updateStatus:function(e,a){var t=this,r={categoryId:a.categoryId,status:1===a.status?0:1},o=new FormData;o.append("categoryId",r.categoryId),o.append("status",r.status),i.a.enableCategory(o).then(function(e){t.$message({type:"success",message:e.message}),t.getSecondLst()}).catch()},editPrice:function(e,a){console.log(a),this.priceConf.level=a.categoryLevel,this.priceConf.id=a.categoryId,this.priceConf.gRate=a.gRate,this.priceConf.sysPriceRatio=a.sysPriceRatio,this.outerVisible=!0},setGoodsParam:function(e,a){this.crawParam.id=a.categoryId,this.crawParam.level=a.categoryLevel,this.crawParam.searchWords=a.searchWords,this.crawParam.repurchaseRate=a.repurchaseRate,this.crawParam.monthVolume=a.monthVolume,this.crawParam.minPrice=a.minPrice/100,this.crawParam.maxPrice=a.maxPrice/100,this.crawparamDialog=!0},savePriceCOnfig:function(){var e=this,a=JSON.parse(o()(e.priceConf)),t=new FormData;t.append("sysPriceRatio",encodeURI(a.sysPriceRatio)),t.append("gRate",encodeURI(a.gRate)),t.append("id",a.id),t.append("level",a.level),i.a.setPriceConfig(t).then(function(a){e.$message({type:"success",message:a.message}),e.outerVisible=!1,e.getSecondLst()}).catch()},saveCrawparam:function(){var e=this,a=JSON.parse(o()(e.crawParam)),t=new FormData;t.append("searchWords",a.searchWords),t.append("repurchaseRate",encodeURI(a.repurchaseRate)),t.append("id",a.id),t.append("level",a.level),t.append("monthVolume",a.monthVolume),t.append("minPrice",100*a.minPrice),t.append("maxPrice",100*a.maxPrice),i.a.setCrawparam(t).then(function(a){e.$message({type:"success",message:a.message}),e.outerVisible=!1,e.crawparamDialog=!1,e.getSecondLst()}).catch()},handleCurrentChange:function(e){this.pageNum=e,this.getSecondLst()},handleSizeChange:function(e){this.pageSize=e,this.getSecondLst()},crawGoods:function(e){var a=this,t=new FormData;t.append("categoryId",e.categoryId),i.a.crawGoods(t).then(function(e){"1"===e.data.crawlerStatus?a.$message({type:"success",message:"爬取中"}):a.$message({type:"success",message:e.message}),a.getSecondLst()}).catch()}}},c={render:function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",{staticClass:"app-container"},[t("section",[t("el-table",{attrs:{data:e.secondData,border:"",align:"center"}},[t("el-table-column",{attrs:{prop:"categorOneyName",align:"center",width:"200",label:"一级类目"}}),e._v(" "),t("el-table-column",{attrs:{prop:"categorTwoyName",align:"center",width:"200",label:"二级类目"}}),e._v(" "),t("el-table-column",{attrs:{prop:"categoryName",align:"center",width:"200",label:"三级类目"}}),e._v(" "),t("el-table-column",{attrs:{prop:"goodsCount",align:"center",width:"150",label:"商品总数"}}),e._v(" "),t("el-table-column",{attrs:{prop:"status",align:"center",width:"150",label:"状态"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("span",[e._v(e._s(1===a.row.status?"启用":"禁用"))])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"categoryName",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{size:"mini"},on:{click:function(t){e.crawGoods(a.row)}}},[e._v("爬取")]),e._v(" "),1===a.row.status?t("el-button",{attrs:{size:"mini"},on:{click:function(t){e.updateStatus(a.$index,a.row)}}},[e._v("停用")]):e._e(),e._v(" "),0===a.row.status?t("el-button",{attrs:{size:"mini"},on:{click:function(t){e.updateStatus(a.$index,a.row)}}},[e._v("启用")]):e._e(),e._v(" "),t("el-button",{attrs:{size:"mini"},on:{click:function(t){e.setGoodsParam(a.$index,a.row)}}},[e._v("爬虫参数设置")]),e._v(" "),t("el-button",{attrs:{size:"mini"},on:{click:function(t){e.editPrice(a.$index,a.row)}}},[e._v("定价策略")])]}}])})],1),e._v(" "),t("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40,50],"page-size":e.pageSize,total:e.totalSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1),e._v(" "),t("el-dialog",{attrs:{title:"定价策略",visible:e.outerVisible},on:{"update:visible":function(a){e.outerVisible=a}}},[t("el-form",{attrs:{model:e.priceConf}},[t("el-form-item",{attrs:{label:"系统定价比例","label-width":e.formLabelWidth}},[t("el-input",{model:{value:e.priceConf.sysPriceRatio,callback:function(a){e.$set(e.priceConf,"sysPriceRatio",a)},expression:"priceConf.sysPriceRatio"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"返佣","label-width":e.formLabelWidth}},[t("el-input",{model:{value:e.priceConf.gRate,callback:function(a){e.$set(e.priceConf,"gRate",a)},expression:"priceConf.gRate"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.outerVisible=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.savePriceCOnfig}},[e._v("确 定")])],1)],1),e._v(" "),t("el-dialog",{attrs:{title:"爬虫参数设置",visible:e.crawparamDialog},on:{"update:visible":function(a){e.crawparamDialog=a}}},[t("el-form",{attrs:{model:e.crawParam}},[t("el-form-item",{attrs:{label:"搜索词","label-width":e.formLabelWidth}},[t("el-input",{model:{value:e.crawParam.searchWords,callback:function(a){e.$set(e.crawParam,"searchWords",a)},expression:"crawParam.searchWords"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"复购率 >=","label-width":e.formLabelWidth}},[t("el-input",{model:{value:e.crawParam.repurchaseRate,callback:function(a){e.$set(e.crawParam,"repurchaseRate",a)},expression:"crawParam.repurchaseRate"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"30天成交量 >=","label-width":e.formLabelWidth}},[t("el-input",{model:{value:e.crawParam.monthVolume,callback:function(a){e.$set(e.crawParam,"monthVolume",a)},expression:"crawParam.monthVolume"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"商品价格范围","label-width":e.formLabelWidth}},[t("el-input",{staticStyle:{width:"49%"},model:{value:e.crawParam.minPrice,callback:function(a){e.$set(e.crawParam,"minPrice",a)},expression:"crawParam.minPrice"}}),e._v("-"),t("el-input",{staticStyle:{width:"49%"},model:{value:e.crawParam.maxPrice,callback:function(a){e.$set(e.crawParam,"maxPrice",a)},expression:"crawParam.maxPrice"}})],1)],1),e._v(" "),t("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.crawparamDialog=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:e.saveCrawparam}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var n=t("VU/8")(s,c,!1,function(e){t("0Kxs")},null,null);a.default=n.exports}});