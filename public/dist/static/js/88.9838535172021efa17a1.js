webpackJsonp([88],{"8Qfi":function(e,t){},desV:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=a("Xxa5"),o=a.n(i),l=a("exGp"),r=a.n(l),n=a("BO1k"),s=a.n(n),c=a("d7EF"),d=a.n(c),h=a("XpEf"),m={name:"hotsearch",components:{},props:{},data:function(){return{loading:!1,pageSize:20,totalSize:0,currentPage:1,editId:0,newAndEditorial:!1,fileImg:"",searchForm:{inputMsg:null},activeName:"first",tableDataHot:[],tableDataSearch:[{userId:"12345678",userPhone:"15538396517",userGender:"男",startTime:"",endTime:""}],dialogFormVisibleCorner:!1,dialogFormVisibleSetUp:!1,dialogVisibleDelete:!1,dialogFormVisibleNewHot:!1,dialogFormVisibleNewSearch:!1,dialogFormVisibleNewReco:!1,formNewSearch:{hotWord:"",hotValue:"",startTime:"",endTime:""},formSetUp:{},formLabelWidth:"120px"}},computed:{},mounted:function(){this.settingList(),this.hotSearchList(0)},methods:{hotSearchList:function(){var e,t,a,i=this,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,l=this.activeName;t=this.searchForm.inputMsg,"first"===l?(e=1,a="热搜词列表"):"second"===l?(e=3,a="搜索词列表"):"three"===l&&(e=6,a="搜索推荐词列表"),this.loading=!0,Object(h.q)({type:e,topName:t,derive:Boolean(o),currentPage:this.currentPage},o).then(function(e){if(i.loading=!1,o){var t=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document;charset=utf-8"}),l=document.createElement("a"),r=window.URL.createObjectURL(t);l.href=r,l.download=a+".xls",document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(r)}else{i.totalSize=e.totalSize,i.pageSize=e.pageSize;var n=e.dataList;i.releaseStatus(n)}}).catch(function(e){i.loading=!1,i.$message.error(e)})},releaseStatus:function(e){var t=!0,a=!1,i=void 0;try{for(var o,l=s()(e.entries());!(t=(o=l.next()).done);t=!0){var r=o.value,n=d()(r,1)[0];e[n].orderNum=n+1}}catch(e){a=!0,i=e}finally{try{!t&&l.return&&l.return()}finally{if(a)throw i}}this.tableDataHot=e},beforeUpload:function(e){if(!(e.size/1024<5e3))return this.$message.error("上传图片大小不能超过 5000kb!"),!1},myImgUpload:function(e){var t=this,a=e.file,i=new FormData;i.append("file",a),Object(h.K)(i).then(function(e){t.fileImg=e.data,t.$message({message:"恭喜你，图片上传成功",type:"success"})}).catch(function(e){console.log(e),t.$message.error("图片上传失败"+e)})},uploadUrl:function(){return"https://www.xiaoxiangyoupin.com/xxyp-manager/xxyp-manager/upload/uploadPic"},handleSizeChange:function(e){console.log("每页 "+e+" 条")},handleCurrentChange:function(e){console.log("当前页: "+e),this.hotSearchList()},handleClick:function(e,t){console.log(e,t),this.tableDataHot=[],this.totalSize=0,this.hotSearchList(0)},changeHotMsg:function(e){var t=this.newAndEditorial;switch(e){case 1:return t?"新建热搜":"编辑热搜";case 2:return t?"新建搜索词":"编辑搜索词";case 3:return t?"新建搜索推荐词":"编辑搜索推荐词"}},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},handleEdit:function(e,t,a){this.formNewSearch={hotWord:"",hotValue:"",startTime:"",endTime:""};var i=this.activeName;switch(this.editId=t&&t.id,a){case 1:this.newAndEditorial=!0,"first"===i?this.dialogFormVisibleNewHot=!0:"second"===i?this.dialogFormVisibleNewSearch=!0:"three"===i&&(this.dialogFormVisibleNewReco=!0);break;case 2:this.dialogFormVisibleSetUp=!0;break;case 3:this.newAndEditorial=!1,this.formNewSearch={hotWord:t.keyText,hotValue:t.sort,startTime:new Date(Date.parse(t.startTime)),endTime:new Date(Date.parse(t.endTime))},"first"===i?this.dialogFormVisibleNewHot=!0:"second"===i?this.dialogFormVisibleNewSearch=!0:"three"===i&&(this.dialogFormVisibleNewReco=!0);break;case 4:this.dialogVisibleDelete=!0;break;case 5:this.fileImg="",this.dialogFormVisibleCorner=!0;break;case 6:this.$router.push({name:"runnotes",query:{type:"hotsearch",keyText:t.keyText}});break;case 7:this.open()}},handleSure:function(e){var t=this.formNewSearch;switch(e){case 1:this.hotSearchDelete(),this.dialogVisibleDelete=!1;break;case 2:this.settingSave(),this.dialogFormVisibleSetUp=!1;break;case 3:t.hotWord?t.hotValue?(this.hotSearchEdit(),this.dialogFormVisibleNewHot=!1):this.$message.error("请输入火爆值"):this.$message.error("请输入热搜词");break;case 4:t.hotWord?t.hotValue?t.startTime?t.endTime?(this.hotSearchEdit(),this.dialogFormVisibleNewSearch=!1):this.$message.error("请输入结束时间"):this.$message.error("请选择起始时间"):this.$message.error("请输入顺序"):this.$message.error("请输入搜索词");break;case 5:t.hotWord?t.hotValue?t.startTime?t.endTime?(this.hotSearchEdit(),this.dialogFormVisibleNewReco=!1):this.$message.error("请输入结束时间"):this.$message.error("请选择起始时间"):this.$message.error("请输入顺序"):this.$message.error("请输入推荐词");break;case 6:this.fileImg?(this.corner(),this.dialogFormVisibleCorner=!1):this.$message.error("请上传图片")}},hotSearchEdit:function(){var e,t,a,i,o=this,l=this.activeName,r=this.newAndEditorial,n=this.formNewSearch;"first"===l?e=1:"second"===l?e=3:"three"===l&&(e=6),t=r?0:this.editId,a=n.startTime&&n.startTime.getTime(),i=n.endTime&&n.endTime.getTime();var s={type:e,id:t,topName:n.hotWord,topValue:n.hotValue,startTime:a,endTime:i};Object(h.p)(s).then(function(e){o.hotSearchList()})},hotSearchDelete:function(){var e,t=this,a=this.activeName,i=this.editId;"first"===a?e=1:"second"===a?e=3:"three"===a&&(e=6);var o={type:e,id:i};Object(h.o)(o).then(function(e){t.hotSearchList()})},corner:function(){var e=this,t=this.editId,a=this.fileImg;Object(h.g)({videoId:t,videoCorner:a}).then(function(t){e.$message({message:"恭喜你，加角标成功",type:"success"})})},settingList:function(){var e=this;Object(h.A)().then(function(t){e.formSetUp=t.data})},settingSave:function(){var e=this;Object(h.B)(this.formSetUp).then(function(t){e.settingList(),e.$message({message:"恭喜你，设置刷新时间成功",type:"success"})})},open:function(){var e=this;this.$confirm("确定要导出数据?","导出数据",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(r()(o.a.mark(function t(){return o.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:0===e.tableDataHot.length?e.$message.warning("暂无数据，导出失败"):e.totalSize-0>5e4?e.$message.warning("导出数据大于5万条，请筛选后在导出！"):e.hotSearchList(1);case 1:case"end":return t.stop()}},t,e)}))).catch(function(){e.$message.info("已取消操作")})}}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"faceworld-hotsearch"},[a("el-container",[a("el-header",[a("div",{staticClass:"hotsearch-nav"},[a("h3",[e._v("热搜管理")]),e._v(" "),a("ul",{staticClass:"hotsearch-nav-right"},[a("li",{on:{click:function(t){e.handleEdit(null,null,1)}}},[e._v("+新建")]),e._v(" "),a("li",{directives:[{name:"show",rawName:"v-show",value:"first"===e.activeName,expression:"activeName === 'first'"}],on:{click:function(t){e.handleEdit(null,null,2)}}},[e._v("设置")])])])]),e._v(" "),a("el-main",[a("el-tabs",{on:{"tab-click":e.handleClick},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"热搜词",name:"first"}},[a("div",{staticClass:"hotsearch-header"},[a("ul",[a("li",[a("el-input",{attrs:{placeholder:"热搜词",clearable:""},model:{value:e.searchForm.inputMsg,callback:function(t){e.$set(e.searchForm,"inputMsg",t)},expression:"searchForm.inputMsg"}})],1),e._v(" "),a("li",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){e.hotSearchList(0)}}},[e._v("查询")])],1),e._v(" "),a("li",[a("el-button",{attrs:{plain:"",icon:"el-icon-upload2"},on:{click:function(t){e.handleEdit(null,null,7)}}},[e._v("导出")])],1)])]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableDataHot,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"orderNum",label:"序号",align:"center",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"keyText",label:"热搜词",align:"center",width:"380"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sort",label:"火爆值",align:"center",width:"380"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleEdit(t.$index,t.row,3)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleEdit(t.$index,t.row,6)}}},[e._v("管理笔记")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleEdit(t.$index,t.row,4)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"搜索词",name:"second"}},[a("div",{staticClass:"hotsearch-header"},[a("ul",[a("li",[a("el-input",{attrs:{placeholder:"搜索词",clearable:""},model:{value:e.searchForm.inputMsg,callback:function(t){e.$set(e.searchForm,"inputMsg",t)},expression:"searchForm.inputMsg"}})],1),e._v(" "),a("li",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){e.hotSearchList(0)}}},[e._v("查询")])],1),e._v(" "),a("li",[a("el-button",{attrs:{plain:"",icon:"el-icon-upload2"},on:{click:function(t){e.handleEdit(null,null,7)}}},[e._v("导出")])],1)])]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableDataHot,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"orderNum",label:"序号",align:"center",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"keyText",label:"搜索词",align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sort",label:"顺序",align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"startTime",label:"起始时间",align:"center",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间",align:"center",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleEdit(t.$index,t.row,3)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleEdit(t.$index,t.row,5)}}},[e._v("加角标")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleEdit(t.$index,t.row,4)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"搜索推荐词",name:"three"}},[a("div",{staticClass:"hotsearch-header"},[a("ul",[a("li",[a("el-input",{attrs:{placeholder:"搜索推荐词",clearable:""},model:{value:e.searchForm.inputMsg,callback:function(t){e.$set(e.searchForm,"inputMsg",t)},expression:"searchForm.inputMsg"}})],1),e._v(" "),a("li",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:function(t){e.hotSearchList(0)}}},[e._v("查询")])],1),e._v(" "),a("li",[a("el-button",{attrs:{plain:"",icon:"el-icon-upload2"},on:{click:function(t){e.handleEdit(null,null,7)}}},[e._v("导出")])],1)])]),e._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableDataHot,border:"",stripe:""}},[a("el-table-column",{attrs:{prop:"orderNum",label:"序号",align:"center",width:"80"}}),e._v(" "),a("el-table-column",{attrs:{prop:"keyText",label:"搜索推荐词",align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"sort",label:"顺序",align:"center",width:"180"}}),e._v(" "),a("el-table-column",{attrs:{prop:"startTime",label:"起始时间",align:"center",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"endTime",label:"结束时间",align:"center",width:"200"}}),e._v(" "),a("el-table-column",{attrs:{prop:"",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleEdit(t.$index,t.row,3)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleEdit(t.$index,t.row,4)}}},[e._v("删除")])]}}])})],1)],1)],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.totalSize>0,expression:"totalSize>0"}],staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1),e._v(" "),a("div",{staticClass:"userPopup"},[a("el-dialog",{attrs:{title:"提示",visible:e.dialogVisibleDelete,width:"30%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisibleDelete=t}}},[a("span",[e._v("确定要删除热搜吗？")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisibleDelete=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSure(1)}}},[e._v("确 定")])],1)]),e._v(" "),a("el-dialog",{attrs:{title:"设置热搜",visible:e.dialogFormVisibleSetUp},on:{"update:visible":function(t){e.dialogFormVisibleSetUp=t}}},[a("el-form",{attrs:{model:e.formSetUp}},[a("el-form-item",{attrs:{label:"热搜刷新时间(秒)","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",placeholder:""},model:{value:e.formSetUp.hoteRefresh,callback:function(t){e.$set(e.formSetUp,"hoteRefresh",t)},expression:"formSetUp.hoteRefresh"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisibleSetUp=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSure(2)}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.changeHotMsg(1),visible:e.dialogFormVisibleNewHot},on:{"update:visible":function(t){e.dialogFormVisibleNewHot=t}}},[a("el-form",{attrs:{model:e.formNewSearch}},[a("el-form-item",{attrs:{label:"热搜词","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",placeholder:""},model:{value:e.formNewSearch.hotWord,callback:function(t){e.$set(e.formNewSearch,"hotWord",t)},expression:"formNewSearch.hotWord"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"火爆值","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"",type:"number"},model:{value:e.formNewSearch.hotValue,callback:function(t){e.$set(e.formNewSearch,"hotValue",t)},expression:"formNewSearch.hotValue"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisibleNewHot=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSure(3)}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.changeHotMsg(2),visible:e.dialogFormVisibleNewSearch},on:{"update:visible":function(t){e.dialogFormVisibleNewSearch=t}}},[a("el-form",{attrs:{model:e.formNewSearch}},[a("el-form-item",{attrs:{label:"搜索词","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",placeholder:""},model:{value:e.formNewSearch.hotWord,callback:function(t){e.$set(e.formNewSearch,"hotWord",t)},expression:"formNewSearch.hotWord"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"顺序","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"",type:"number"},model:{value:e.formNewSearch.hotValue,callback:function(t){e.$set(e.formNewSearch,"hotValue",t)},expression:"formNewSearch.hotValue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"起始时间","label-width":e.formLabelWidth}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.formNewSearch.startTime,callback:function(t){e.$set(e.formNewSearch,"startTime",t)},expression:"formNewSearch.startTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间","label-width":e.formLabelWidth}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.formNewSearch.endTime,callback:function(t){e.$set(e.formNewSearch,"endTime",t)},expression:"formNewSearch.endTime"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisibleNewSearch=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSure(4)}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.changeHotMsg(3),visible:e.dialogFormVisibleNewReco},on:{"update:visible":function(t){e.dialogFormVisibleNewReco=t}}},[a("el-form",{attrs:{model:e.formNewSearch}},[a("el-form-item",{attrs:{label:"搜索推荐词","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",placeholder:""},model:{value:e.formNewSearch.hotWord,callback:function(t){e.$set(e.formNewSearch,"hotWord",t)},expression:"formNewSearch.hotWord"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"顺序","label-width":e.formLabelWidth}},[a("el-input",{attrs:{autocomplete:"off",placeholder:"",type:"number"},model:{value:e.formNewSearch.hotValue,callback:function(t){e.$set(e.formNewSearch,"hotValue",t)},expression:"formNewSearch.hotValue"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"起始时间","label-width":e.formLabelWidth}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.formNewSearch.startTime,callback:function(t){e.$set(e.formNewSearch,"startTime",t)},expression:"formNewSearch.startTime"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"结束时间","label-width":e.formLabelWidth}},[a("el-date-picker",{attrs:{type:"date",placeholder:"选择日期"},model:{value:e.formNewSearch.endTime,callback:function(t){e.$set(e.formNewSearch,"endTime",t)},expression:"formNewSearch.endTime"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisibleNewReco=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSure(5)}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"默认设置",visible:e.dialogFormVisibleCorner},on:{"update:visible":function(t){e.dialogFormVisibleCorner=t}}},[a("div",{staticClass:"uploadBgc"},[a("p",[e._v("默认背景图")]),e._v(" "),a("el-upload",{ref:"bgcUpload",staticClass:"upload-demo",attrs:{drag:"",action:e.uploadUrl(),"show-file-list":!1,accept:".jpg,.jpeg,.png","http-request":e.myImgUpload,"before-upload":e.beforeUpload}},[a("i",{staticClass:"el-icon-upload"}),e._v(" "),a("div",{staticClass:"el-upload__text"},[e._v("将文件拖到此处，或\n\t\t\t\t\t\t"),a("em",[e._v("点击上传")])]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])])],1),e._v(" "),a("el-input",{attrs:{autocomplete:"off",placeholder:"图片链接"},model:{value:e.fileImg,callback:function(t){e.fileImg=t},expression:"fileImg"}}),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFormVisibleCorner=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.handleSure(6)}}},[e._v("确 定")])],1)],1)],1)],1)},staticRenderFns:[]};var f=a("VU/8")(m,u,!1,function(e){a("8Qfi")},"data-v-04fe900c",null);t.default=f.exports}});