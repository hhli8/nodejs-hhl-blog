webpackJsonp([44],{"6KuS":function(t,e){},"6VQb":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("mvHQ"),a=i.n(n),r=i("rqx2"),o=i("voil"),c=i("TQvf"),l=i.n(c),s={name:"promotionActivity",components:{Loading:o.a},props:{},data:function(){var t=this;return{showLoading:!1,issubmit:!1,showCreateActivityDialog:!1,title:"新增活动",multipleQueryGoodsTable:[],tableData3:[],value:"",pageNum:1,total:1,pageSize:20,activityParamrules:{activityTitle:[{required:!0,message:"请输入活动名称",trigger:"blur"},{min:2,max:12,message:"长度在 2 到 12 个字符",trigger:"blur"}],startTime:[{required:!0,message:"请选择开始时间",trigger:"blur"}],endTime:[{required:!0,message:"请选择结束时间",trigger:"blur"}],activityUrl:[{required:!1,message:"请输入活动地址链接",trigger:"blur"}]},tableData:[],dialogFormVisible:!1,formLabelWidth:"120px",totalPage:1,activityParam:{activityTitle:"",startTime:"",endTime:"",activityUrl:""},pickerStartTime:{disabledDate:function(e){return!!t.activityParam.endTime&&e.getTime()>new Date(t.activityParam.endTime).getTime()}},pickerEndTime:{disabledDate:function(e){return!!t.activityParam.startTime&&e.getTime()<new Date(t.activityParam.startTime).getTime()}},param:{pageNum:1,pageSize:20},url:""}},computed:{},created:function(){location.href.indexOf("/dev/")>0?this.url="bsdlks://h5-dev.xiaoxiangyoupin.com/shoponline/activity/":location.href.indexOf("/prod/")>0?this.url="bsdlks://h5.xiaoxiangyoupin.com/shoponline/activity/":this.url="bsdlks://h5-dev.xiaoxiangyoupin.com/shoponline/activity/",this.getActivityList()},mounted:function(){var t=this;t.$nextTick(function(){t.clipboard=new l.a(".btn"),t.clipboard.on("success",function(e){console.log(e),t.$message({type:"success",message:"复制成功"})})})},methods:{searchFn:function(){},getActivityList:function(){var t=this;t.showLoading=!0,r.a.queryActivityList(t.param).then(function(e){t.tableData=e.dataList,t.totalPage=e.totalSize,t.currentPage=e.currentPage,t.pageSize=e.pageSize,t.total=e.totalSize,t.showLoading=!1}).catch()},cancelCreateDialog:function(){this.showCreateActivityDialog=!1,this.activityParam={activityTitle:"",startTime:"",endTime:"",activityUrl:""},this.$refs.activityParam.resetFields()},editActivity:function(t,e){this.title="编辑活动",this.activityParam=JSON.parse(a()(t)),this.showCreateActivityDialog=!0},submitCreate:function(t){var e=this;if(e.issubmit=!0,new Date(e.activityParam.endTime).getTime()<=new Date(e.activityParam.startTime).getTime())return e.$message({type:"error",message:"活动结束时间不能早于开始时间"}),e.issubmit=!1,!1;e.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;e.activityParam.status=0,e.activityParam.activityRemark="1",e.activityParam.activityType=1,r.a.saveActivity(e.activityParam).then(function(t){200===t.code&&(e.issubmit=!1,e.getActivityList(),e.activityParam={activityTitle:"",startTime:"",endTime:"",activityUrl:""},e.$refs.activityParam.resetFields(),e.showCreateActivityDialog=!1)}).catch()})},submitUpdate:function(){this.showCreateActivityDialog=!1},addActivity:function(t,e,i){this.title="新增活动",this.showCreateActivityDialog=!0,this.activityParam={activityTitle:"",startTime:"",endTime:"",activityUrl:""}},editClick:function(t,e){this.$router.push({name:"editActivity",query:{activityId:t.id,activityTitle:t.activityTitle}})},deleteClick:function(t,e){var i=this;if(t.status===e)return!1;var n={activityId:t.id,status:e},a=new Date(t.startTime).getTime(),r=new Date(t.endTime).getTime(),o=(new Date).getTime();1===t.status?o>r||o<a?i.$confirm("您确定要删除该条活动吗","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.deleteSure(n)}):i.$confirm("该活动正在进行，不可删除").then(function(){}):i.$confirm("您确定要删除该条活动吗","",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){i.deleteSure(n)}).catch(function(){i.$message({type:"warning",message:"取消操作"})})},deleteSure:function(t){var e=this;r.a.deleteActivity(t).then(function(t){e.$message({type:"success",message:"操作成功"}),e.getActivityList()}).catch()},upClick:function(t,e){var i=this;if(t.status===e)return!1;var n={activityId:t.id,status:e};r.a.deleteActivity(n).then(function(t){i.getActivityList()}).catch()},forId:function(t){return"for_"+t},val:function(t){return this.url+t},clip:function(t,e){return this.url+t+"?fullscreen=1&hide_title=1&id="+e},handleSizeChange:function(t){this.pageSizeDetail=t,this.param.pageSize=t,this.getActivityList()},handleCurrentChange:function(t){this.currentPage=t,this.param.pageNum=t,this.getActivityList()}}},u={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"spiderHotSearch"},[i("div",[i("el-row",[i("el-col",{attrs:{span:2}},[i("el-button",{staticStyle:{margin:"10px 0"},attrs:{icon:"el-icon-plus",type:"primary"},on:{click:t.addActivity}},[t._v("新增活动")])],1)],1),t._v(" "),i("el-row",{staticClass:"hot-search-list"},[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,border:""}},[i("el-table-column",{attrs:{type:"index",width:"100",align:"center",label:"序号"}}),t._v(" "),i("el-table-column",{attrs:{prop:"id",align:"center",label:"活动ID"}}),t._v(" "),i("el-table-column",{attrs:{prop:"activityTitle",align:"center",label:"活动名称"}}),t._v(" "),i("el-table-column",{attrs:{prop:"startTime",align:"center",label:"开始时间/结束时间"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",[t._v("开始"+t._s(e.row.startTime))]),i("br"),i("span",[t._v("结束"+t._s(e.row.endTime))])]}}])}),t._v(" "),i("el-table-column",{attrs:{prop:"count",align:"center",label:"参与人数/参与人次"}}),t._v(" "),i("el-table-column",{attrs:{prop:"statusStr",align:"center",label:"状态"}}),t._v(" "),i("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("span",{staticStyle:{display:"none"},attrs:{id:t.forId(e.row.id),value:t.val(e.row.activityUrl)}}),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.editActivity(e.row,e.index)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.editClick(e.row,e.index)}}},[t._v("配置商品")]),t._v(" "),i("el-button",{staticClass:"btn",attrs:{"data-clipboard-text":t.clip(e.row.activityUrl,e.row.id),type:"text",size:"small"}},[t._v("复制活动链接")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.deleteClick(e.row,-1)}}},[t._v("删除")]),t._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){t.upClick(e.row,1)}}},[t._v("发布")])]}}])})],1)],1),t._v(" "),i("el-row",{staticClass:"page-box",staticStyle:{margin:"30px 0px 0px 0"}},[i("div",{staticClass:"block"},[i("el-pagination",{attrs:{"page-sizes":[10,20,30,40],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])],1),t._v(" "),i("el-dialog",{attrs:{title:t.title,width:"60%",visible:t.showCreateActivityDialog},on:{"update:visible":function(e){t.showCreateActivityDialog=e}}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("div",{staticClass:"grid-content bg-purple"},[i("el-form",{ref:"activityParam",attrs:{"label-width":"140px",rules:t.activityParamrules,model:t.activityParam}},[i("el-form-item",{attrs:{label:"活动名称",prop:"activityTitle"}},[i("el-input",{attrs:{placeholder:"2-12个字"},model:{value:t.activityParam.activityTitle,callback:function(e){t.$set(t.activityParam,"activityTitle",e)},expression:"activityParam.activityTitle"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"活动时间",prop:"startTime"}},[i("el-col",{attrs:{span:11}},[i("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",align:"right","picker-options":t.pickerStartTime},model:{value:t.activityParam.startTime,callback:function(e){t.$set(t.activityParam,"startTime",e)},expression:"activityParam.startTime"}})],1),t._v(" "),i("el-col",{staticClass:"line",attrs:{span:2}},[t._v("-")]),t._v(" "),i("el-col",{attrs:{span:11,prop:"endTime"}},[i("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:"选择日期时间",align:"right","picker-options":t.pickerEndTime},model:{value:t.activityParam.endTime,callback:function(e){t.$set(t.activityParam,"endTime",e)},expression:"activityParam.endTime"}})],1)],1),t._v(" "),i("el-form-item",{attrs:{label:"活动链接",prop:"activityUrl"}},[i("el-input",{model:{value:t.activityParam.activityUrl,callback:function(e){t.$set(t.activityParam,"activityUrl",e)},expression:"activityParam.activityUrl"}})],1)],1)],1)])],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:t.cancelCreateDialog}},[t._v("取 消")]),t._v(" "),i("el-button",{attrs:{type:"primary",disabled:t.issubmit},on:{click:function(e){t.submitCreate("activityParam")}}},[t._v("确 定")])],1)],1),t._v(" "),i("Loading",{directives:[{name:"show",rawName:"v-show",value:t.showLoading,expression:"showLoading"}]})],1)},staticRenderFns:[]};var f=i("VU/8")(s,u,!1,function(t){i("6KuS")},"data-v-32b04fca",null);e.default=f.exports},TQvf:function(t,e,i){var n;n=function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var a=e[n]={i:n,l:!1,exports:{}};return t[n].call(a.exports,a,a.exports,i),a.l=!0,a.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var a in t)i.d(n,a,function(e){return t[e]}.bind(null,a));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),r=l(i(1)),o=l(i(3)),c=l(i(4));function l(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(t,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return n.resolveOptions(i),n.listenClick(t),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,o.default),a(e,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof t.action?t.action:this.defaultAction,this.target="function"==typeof t.target?t.target:this.defaultTarget,this.text="function"==typeof t.text?t.text:this.defaultText,this.container="object"===n(t.container)?t.container:document.body}},{key:"listenClick",value:function(t){var e=this;this.listener=(0,c.default)(t,"click",function(t){return e.onClick(t)})}},{key:"onClick",value:function(t){var e=t.delegateTarget||t.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new r.default({action:this.action(e),target:this.target(e),text:this.text(e),container:this.container,trigger:e,emitter:this})}},{key:"defaultAction",value:function(t){return u("action",t)}},{key:"defaultTarget",value:function(t){var e=u("target",t);if(e)return document.querySelector(e)}},{key:"defaultText",value:function(t){return u("text",t)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}],[{key:"isSupported",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:["copy","cut"],e="string"==typeof t?[t]:t,i=!!document.queryCommandSupported;return e.forEach(function(t){i=i&&!!document.queryCommandSupported(t)}),i}}]),e}();function u(t,e){var i="data-clipboard-"+t;if(e.hasAttribute(i))return e.getAttribute(i)}t.exports=s},function(t,e,i){"use strict";var n,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=i(2),c=(n=o)&&n.__esModule?n:{default:n};var l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.resolveOptions(e),this.initSelection()}return r(t,[{key:"resolveOptions",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=t.action,this.container=t.container,this.emitter=t.emitter,this.target=t.target,this.text=t.text,this.trigger=t.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var t=this,e="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return t.removeFake()},this.fakeHandler=this.container.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[e?"right":"left"]="-9999px";var i=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.style.top=i+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,this.container.appendChild(this.fakeElem),this.selectedText=(0,c.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(this.container.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(this.container.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,c.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var t=void 0;try{t=document.execCommand(this.action)}catch(e){t=!1}this.handleResult(t)}},{key:"handleResult",value:function(t){this.emitter.emit(t?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.trigger&&this.trigger.focus(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=t,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(t){if(void 0!==t){if(!t||"object"!==(void 0===t?"undefined":a(t))||1!==t.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&t.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(t.hasAttribute("readonly")||t.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=t}},get:function(){return this._target}}]),t}();t.exports=l},function(t,e){t.exports=function(t){var e;if("SELECT"===t.nodeName)t.focus(),e=t.value;else if("INPUT"===t.nodeName||"TEXTAREA"===t.nodeName){var i=t.hasAttribute("readonly");i||t.setAttribute("readonly",""),t.select(),t.setSelectionRange(0,t.value.length),i||t.removeAttribute("readonly"),e=t.value}else{t.hasAttribute("contenteditable")&&t.focus();var n=window.getSelection(),a=document.createRange();a.selectNodeContents(t),n.removeAllRanges(),n.addRange(a),e=n.toString()}return e}},function(t,e){function i(){}i.prototype={on:function(t,e,i){var n=this.e||(this.e={});return(n[t]||(n[t]=[])).push({fn:e,ctx:i}),this},once:function(t,e,i){var n=this;function a(){n.off(t,a),e.apply(i,arguments)}return a._=e,this.on(t,a,i)},emit:function(t){for(var e=[].slice.call(arguments,1),i=((this.e||(this.e={}))[t]||[]).slice(),n=0,a=i.length;n<a;n++)i[n].fn.apply(i[n].ctx,e);return this},off:function(t,e){var i=this.e||(this.e={}),n=i[t],a=[];if(n&&e)for(var r=0,o=n.length;r<o;r++)n[r].fn!==e&&n[r].fn._!==e&&a.push(n[r]);return a.length?i[t]=a:delete i[t],this}},t.exports=i},function(t,e,i){var n=i(5),a=i(6);t.exports=function(t,e,i){if(!t&&!e&&!i)throw new Error("Missing required arguments");if(!n.string(e))throw new TypeError("Second argument must be a String");if(!n.fn(i))throw new TypeError("Third argument must be a Function");if(n.node(t))return function(t,e,i){return t.addEventListener(e,i),{destroy:function(){t.removeEventListener(e,i)}}}(t,e,i);if(n.nodeList(t))return function(t,e,i){return Array.prototype.forEach.call(t,function(t){t.addEventListener(e,i)}),{destroy:function(){Array.prototype.forEach.call(t,function(t){t.removeEventListener(e,i)})}}}(t,e,i);if(n.string(t))return function(t,e,i){return a(document.body,t,e,i)}(t,e,i);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}},function(t,e){e.node=function(t){return void 0!==t&&t instanceof HTMLElement&&1===t.nodeType},e.nodeList=function(t){var i=Object.prototype.toString.call(t);return void 0!==t&&("[object NodeList]"===i||"[object HTMLCollection]"===i)&&"length"in t&&(0===t.length||e.node(t[0]))},e.string=function(t){return"string"==typeof t||t instanceof String},e.fn=function(t){return"[object Function]"===Object.prototype.toString.call(t)}},function(t,e,i){var n=i(7);function a(t,e,i,a,r){var o=function(t,e,i,a){return function(i){i.delegateTarget=n(i.target,e),i.delegateTarget&&a.call(t,i)}}.apply(this,arguments);return t.addEventListener(i,o,r),{destroy:function(){t.removeEventListener(i,o,r)}}}t.exports=function(t,e,i,n,r){return"function"==typeof t.addEventListener?a.apply(null,arguments):"function"==typeof i?a.bind(null,document).apply(null,arguments):("string"==typeof t&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(t){return a(t,e,i,n,r)}))}},function(t,e){var i=9;if("undefined"!=typeof Element&&!Element.prototype.matches){var n=Element.prototype;n.matches=n.matchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector||n.webkitMatchesSelector}t.exports=function(t,e){for(;t&&t.nodeType!==i;){if("function"==typeof t.matches&&t.matches(e))return t;t=t.parentNode}}}])},t.exports=n()}});