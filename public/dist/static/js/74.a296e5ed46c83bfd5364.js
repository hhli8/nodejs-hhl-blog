webpackJsonp([74],{KEbn:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a("mvHQ"),i=a.n(n),o=a("NU8M"),r=a("TIfe"),s={name:"alipaybanner",data:function(){return{queryparam:{type:2},modualArr:[],dataList:[],uploadUrl:"https://www.xiaoxiangyoupin.com/xxyp-manager/upload/uploadPic",pageSize:10,pageNum:1,currentPage:1,totalSize:0,curRowIndex:1}},computed:{uploadHeader:function(){return{Token:Object(r.c)()}}},created:function(){this.getType()},methods:{getType:function(){var e=this;o.a.getTypeList({showType:3}).then(function(t){e.modualArr=t.data,e.queryparam.type=e.modualArr[0].type,e.getBanner()}).catch()},getBanner:function(){var e=this,t={pageNum:e.pageNum,pageSize:e.pageSize,showType:3,type:e.queryparam.type};o.a.getbannerList(t).then(function(t){e.dataList=t.data.list,e.totalSize=t.data.total}).catch(function(){})},add:function(){this.dataList.unshift({status:-1,showType:3,type:this.queryparam.type})},updateLine:function(){},enableLine:function(e,t,a){this.dataList[a].status=t,console.log(this.dataList)},deleteLine:function(e,t){var a=this;e.id?a.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){var t={id:e.id};o.a.deleteBanner(t).then(function(e){a.$message({type:"success",message:e.message}),a.getBanner()}).catch()}):a.dataList.splice(t,1)},release:function(){var e=this,t={};t.bannerDTOs=JSON.parse(i()(e.dataList)),o.a.releaseBanner(t).then(function(t){e.$message({type:"success",message:t.message}),e.getBanner()}).catch()},changeModual:function(){this.pageNum=1,this.type=this.queryparam.type,console.log(this.type),this.getBanner()},upLoad:function(e,t,a){this.dataNow=e,this.currentRowIndex=t},handleAvatarSuccess:function(e){this.dataNow.imgUrl=e.data,this.$set(this.dataList,this.currentRowIndex,this.dataNow),this.$message({type:"success",message:"上传成功"})},handleCurrentChange:function(){},handleSizeChange:function(e){this.pageSize=e,this.getBanner()}}},l={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"配置模块:"}},[a("el-select",{attrs:{placeholder:"全部"},on:{change:e.changeModual},model:{value:e.queryparam.type,callback:function(t){e.$set(e.queryparam,"type",t)},expression:"queryparam.type"}},e._l(e.modualArr,function(e){return a("el-option",{key:e.bannerId,attrs:{label:e.typeName,value:e.type}})}))],1),e._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-check"},on:{click:e.release}},[e._v("发布")]),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:e.add}},[e._v("新增")])],1)],1),e._v(" "),a("section",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.dataList,border:"",align:"center"}},[a("el-table-column",{attrs:{prop:"name",align:"center",label:"活动名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"scope.row.name"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"bannerIndex",align:"center",label:"图片顺序"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.bannerIndex,callback:function(a){e.$set(t.row,"bannerIndex",a)},expression:"scope.row.bannerIndex"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"imgUrl",align:"center",label:"标题背景图"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-image",{staticStyle:{width:"200px",height:"100px"},attrs:{src:t.row.imgUrl,fit:"contain"},on:{click:function(a){e.$store.dispatch("openImgPreview",{url:t.row.imgUrl})}}}),e._v(" "),a("el-upload",{staticClass:"upload-demo",attrs:{headers:e.uploadHeader,action:e.uploadUrl,"show-file-list":!1,"on-success":e.handleAvatarSuccess}},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(a){e.upLoad(t.row,t.$index)}}},[e._v("重新上传")])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"gotoUrl",align:"center",label:"参数"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{model:{value:t.row.gotoUrl,callback:function(a){e.$set(t.row,"gotoUrl",a)},expression:"scope.row.gotoUrl"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"name",align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[1===t.row.status?a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){e.enableLine(t.row,-1,t.$index)}}},[e._v("点击禁用")]):e._e(),e._v(" "),-1===t.row.status?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.enableLine(t.row,1,t.$index)}}},[e._v("点击启用")]):e._e(),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.deleteLine(t.row,t.$index)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.totalSize>0,expression:"totalSize>0"}],staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,30,40,50],"page-size":e.pageSize,total:e.totalSize,layout:"total, sizes, prev, pager, next, jumper"},on:{"current-change":e.handleCurrentChange,"size-change":e.handleSizeChange}})],1)],1)],1)},staticRenderFns:[]};var c=a("VU/8")(s,l,!1,function(e){a("PiBL")},null,null);t.default=c.exports},PiBL:function(e,t){}});