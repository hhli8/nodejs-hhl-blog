webpackJsonp([34],{N1hw:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("RRo+"),s=a.n(r),i=a("Dd8w"),o=a.n(i),n=a("voil"),l=a("Y09M"),c=a("yu3o"),d={name:"specialList",data:function(){return{tableData:[],showCreateDialog:!1,createObj:{categoryName:"",specialName:"",status:"1",orderSeq:"",subtitle:"",categoryDescribe:"",searchSex:"未知"},buttonEvent:"create",title:"添加专题",createObjrules:{categoryName:[{required:!0,message:"请输入分类名称",trigger:"blur"}],specialName:[{required:!0,message:"请输入专题名称",trigger:"blur"}],orderSeq:[{type:"number",message:"排序必须为数字值,不填默认999",trigger:"blur"}]},formLabelWidth:"150px",showDelDialog:!1,showLoading:!1,currentPage:1,totalPage:1,totalSize:1,pagesize:10,delObj:{},showNewBrandDialog:!1,newBrandObj:{}}},created:function(){this.querySpecialListServe(1,10)},methods:{openCreateDialog:function(e,t,a){this.createObj={categoryName:"",specialName:"",status:"1",orderSeq:"",subtitle:"",categoryDescribe:"",searchSex:"未知"},"create"===e?(this.title="添加专题",this.buttonEvent="create"):"update"===e&&(this.title="编辑专题",this.buttonEvent="update",this.createObj.categoryName=a.categoryName,this.createObj.specialName=a.specialName,this.createObj.id=a.id,this.createObj.orderSeq=a.orderSeq,this.createObj.subtitle=a.subtitle,this.createObj.status=String(a.status),this.createObj.categoryDescribe=a.categoryDescribe),this.showCreateDialog=!0},cancelCreateDialog:function(){this.showCreateDialog=!1,this.createObj={categoryName:"",specialName:"",status:"1",orderSeq:"",subtitle:"",categoryDescribe:"",searchSex:"未知"},this.$refs.createObjRef.resetFields()},submitCreate:function(){this.showCreateDialog=!1,"未知"===this.createObj.searchSex&&delete this.createObj.searchSex,this.insertServe(this.createObj)},openDelDialog:function(e,t){this.delObj.id=t.id,this.showDelDialog=!0},cancelDelDialog:function(){this.showDelDialog=!1,this.delObj={}},submitDel:function(){this.showDelDialog=!1,this.delServe()},delServe:function(){var e=this;this.showLoading=!0,Object(c.b)({id:this.delObj.id}).then(function(t){e.showLoading=!1,e.$message({message:"删除成功",type:"success"}),e.querySpecialListServe(e.currentPage,e.pagesize)}).catch(function(t){e.showLoading=!1,e.$message.error(t)})},querySpecialListServe:function(e,t){var a=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;this.showLoading=!0,Object(c.h)({currentPage:e,pageSize:t,type:r}).then(function(e){a.showLoading=!1;var t=e.dataList;a.formatList(t),a.currentPage=e.currentPage,a.totalPage=e.totalPage,a.totalSize=e.totalSize}).catch(function(e){a.showLoading=!1,a.$message.error(e)})},formatList:function(e){var t=e;t.forEach(function(e){e.statusBool=!1,e.statusBool=1===Number(e.status)}),this.tableData=t},statusBool:function(e){return 1===e},handleCurrentChange:function(e){this.currentPage=e,this.querySpecialListServe(this.currentPage,this.pagesize)},handleSizeChange:function(e){this.pagesize=e,this.querySpecialListServe(this.currentPage,this.pagesize)},insertServe:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=o()({},e,{type:a,parentId:r});e.orderSeq?s.orderSeq=+e.orderSeq:s.orderSeq=999,delete s.id,this.showLoading=!0,Object(c.d)(s).then(function(e){t.showLoading=!1,t.$message({message:"添加成功",type:"success"}),t.createObj={categoryName:"",specialName:"",status:"1",orderSeq:"",subtitle:"",categoryDescribe:"",searchSex:"未知"},t.$refs.createObjRef.resetFields(),t.currentPage=1,t.querySpecialListServe(t.currentPage,t.pagesize)}).catch(function(e){t.showLoading=!1,t.$message.error(e)})},submitUpdate:function(){this.showCreateDialog=!1,"未知"===this.createObj.searchSex&&delete this.createObj.searchSex,this.updateServe(this.createObj)},updateServe:function(e){var t=this,a=o()({},e);e.orderSeq?a.orderSeq=+e.orderSeq:a.orderSeq=999,this.showLoading=!0,Object(c.j)(a).then(function(e){t.showLoading=!1,t.$message({message:"修改成功",type:"success"}),t.$refs.createObjRef.resetFields(),t.createObj={name:"",specialName:"",status:"1",detail:"",orderSeq:"",type:0,title:"添加专题",buttonEvent:"create"},t.querySpecialListServe(t.currentPage,t.pagesize)}).catch(function(e){t.showLoading=!1,t.$message.error(e)})},goBrandList:function(e,t){this.$router.push({name:"brandList",query:{id:t.id,fname:t.name}})},switchChange:function(e,t){var a=this;this.showLoading=!0,Object(c.j)({id:t.id,specialName:t.specialName,categoryName:t.categoryName,status:t.statusBool?1:0}).then(function(e){a.showLoading=!1,a.$message({message:"修改成功",type:"success"}),a.querySpecialListServe(a.currentPage,a.pagesize)}).catch(function(e){a.showLoading=!1,a.$message.error(e)})},cancelNewBrandDialog:function(){this.showNewBrandDialog=!1},openNewBrandDialog:function(e,t){this.newBrandObj.id=t.id,this.showNewBrandDialog=!0},orderSeqChange:function(e){s()(Number(e))?e&&Number(e)<1?this.createObj.orderSeq=1:Number(e)>999&&(this.createObj.orderSeq=999):this.createObj.orderSeq=""},serveSuccess:function(){this.showNewBrandDialog=!1,this.querySpecialListServe(this.currentPage,this.pagesize)}},components:{Loading:n.a,newBrand:l.a}},u={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"specialList"},[a("el-row",[a("el-col",{attrs:{span:2}},[a("el-button",{staticStyle:{margin:"10px 0"},attrs:{icon:"el-icon-plus",type:"success"},on:{click:function(t){e.openCreateDialog("create")}}},[e._v("添加")])],1)],1),e._v(" "),a("el-row",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.showLoading,expression:"showLoading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,border:"","header-cell-class-name":"center","cell-class-name":"center href-link"}},[a("el-table-column",{attrs:{label:"编号",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t.row.id))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"专题名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.specialName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"一级品类"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.categoryName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"二级品类数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[a("router-link",{attrs:{to:{name:"secondList",query:{parentId:t.row.id,fname:t.row.categoryName}}}},[e._v(e._s(t.row.categoryTwoCount))])],1)]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"品牌数量"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.brandCount))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"是否显示"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-switch",{on:{change:function(a){e.switchChange(t.$index,t.row)}},model:{value:t.row.statusBool,callback:function(a){e.$set(t.row,"statusBool",a)},expression:"scope.row.statusBool"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"排序"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("p",[e._v(e._s(t.row.orderSeq))])]}}])}),e._v(" "),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"primary "},on:{click:function(a){e.openCreateDialog("update",t.$index,t.row)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.openDelDialog(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:e.totalSize>0,expression:"totalSize>0"}],staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-sizes":[10,20,30,40],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),a("el-dialog",{attrs:{title:e.title,visible:e.showCreateDialog,"close-on-click-modal":!1,"before-close":e.cancelCreateDialog},on:{"update:visible":function(t){e.showCreateDialog=t}}},[a("el-form",{ref:"createObjRef",attrs:{model:e.createObj,rules:e.createObjrules}},[a("el-form-item",{attrs:{label:"专题名称","label-width":e.formLabelWidth,prop:"specialName"}},[a("el-input",{attrs:{placeholder:"请输入专题名称"},model:{value:e.createObj.specialName,callback:function(t){e.$set(e.createObj,"specialName",t)},expression:"createObj.specialName"}}),e._v(" "),a("el-tag",{attrs:{type:"danger"}},[e._v("专题名称用于前台展示")])],1),e._v(" "),a("el-form-item",{attrs:{label:"分类名称","label-width":e.formLabelWidth,prop:"categoryName"}},[a("el-input",{attrs:{placeholder:"请输入分类名称"},model:{value:e.createObj.categoryName,callback:function(t){e.$set(e.createObj,"categoryName",t)},expression:"createObj.categoryName"}}),e._v(" "),a("el-tag",{attrs:{type:"danger"}},[e._v("分类名称用于搜索引擎")])],1),e._v(" "),a("el-form-item",{attrs:{label:"排序","label-width":e.formLabelWidth,prop:"orderSeq"}},[a("el-input",{attrs:{placeholder:"请输入排序,不填默认999"},on:{change:e.orderSeqChange},model:{value:e.createObj.orderSeq,callback:function(t){e.$set(e.createObj,"orderSeq",e._n("string"==typeof t?t.trim():t))},expression:"createObj.orderSeq"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"副标题","label-width":e.formLabelWidth,prop:"subtitle"}},[a("el-input",{attrs:{placeholder:"副标题"},model:{value:e.createObj.subtitle,callback:function(t){e.$set(e.createObj,"subtitle",e._n("string"==typeof t?t.trim():t))},expression:"createObj.subtitle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否显示在导航栏","label-width":e.formLabelWidth}},[a("el-radio",{attrs:{label:"1"},model:{value:e.createObj.status,callback:function(t){e.$set(e.createObj,"status",t)},expression:"createObj.status"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:"0"},model:{value:e.createObj.status,callback:function(t){e.$set(e.createObj,"status",t)},expression:"createObj.status"}},[e._v("否")])],1),e._v(" "),a("el-form-item",{attrs:{label:"分类描述","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:e.createObj.categoryDescribe,callback:function(t){e.$set(e.createObj,"categoryDescribe",t)},expression:"createObj.categoryDescribe"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"品类logo","label-width":e.formLabelWidth}},[a("el-radio",{attrs:{label:"未知"},model:{value:e.createObj.searchSex,callback:function(t){e.$set(e.createObj,"searchSex",t)},expression:"createObj.searchSex"}},[e._v("未知")]),e._v(" "),a("el-radio",{attrs:{label:"男"},model:{value:e.createObj.searchSex,callback:function(t){e.$set(e.createObj,"searchSex",t)},expression:"createObj.searchSex"}},[e._v("男")]),e._v(" "),a("el-radio",{attrs:{label:"女"},model:{value:e.createObj.searchSex,callback:function(t){e.$set(e.createObj,"searchSex",t)},expression:"createObj.searchSex"}},[e._v("女")])],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancelCreateDialog}},[e._v("取 消")]),e._v(" "),"create"===e.buttonEvent?a("el-button",{attrs:{type:"primary"},on:{click:e.submitCreate}},[e._v("确 定")]):e._e(),e._v(" "),"update"===e.buttonEvent?a("el-button",{attrs:{type:"primary"},on:{click:e.submitUpdate}},[e._v("确 定")]):e._e()],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.showDelDialog,width:"30%",title:"删除该分类？","close-on-click-modal":!1,"before-close":e.cancelDelDialog},on:{"update:visible":function(t){e.showDelDialog=t}}},[a("p",[a("strong",{staticStyle:{"font-size":"18px"}},[e._v("该分类下的商品不会被删除")])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancelDelDialog}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitDel}},[e._v("确 定")])],1)]),e._v(" "),a("newBrand",{attrs:{showNewBrandDialog:e.showNewBrandDialog,type:"create",inputParentId:e.newBrandObj.id},on:{cancelNewBrandDialog:e.cancelNewBrandDialog,serveSuccess:e.serveSuccess}})],1)},staticRenderFns:[]};var b=a("VU/8")(d,u,!1,function(e){a("oH0K")},"data-v-a8d305e2",null);t.default=b.exports},Y09M:function(e,t,a){"use strict";var r=a("woOf"),s=a.n(r),i=a("RRo+"),o=a.n(i),n=a("Dd8w"),l=a.n(n),c=a("yu3o"),d=a("voil"),u=a("LLYX"),b={name:"newBrand",data:function(){return{showLoading:!1,formLabelWidth:"150px",createNewBrandObj:{},createNewBrandObjrules:{name:[{required:!0,message:"请输入品牌名称",trigger:"blur"}],orderSeq:[{type:"number",message:"排序必须为数字值,不填默认999",trigger:"blur"}]},selectList:[],parentId:"",currentSearchData:[],inputText:""}},methods:{cancelNewBrandDialog:function(){this.$emit("cancelNewBrandDialog"),this.createNewBrandObj={},this.$refs.newBrand.resetFields()},submitNewBrand:function(){this.addBrandServe()},queryAllSpecialServe:function(){var e=this;Object(c.f)().then(function(t){e.selectList=t.data})},addBrandServe:function(){var e=this;this.showLoading=!0;var t=l()({},this.createNewBrandObj,{categoryTwoId:this.inputParentId});this.createNewBrandObj.orderSeq?t.orderSeq=+this.createNewBrandObj.orderSeq:t.orderSeq=999;for(var a=this.currentSearchData,r=0,s=a.length;r<s;r++)if(a[r].brandName===t.brandName){t.id=a[r].id;break}Object(c.a)(t).then(function(t){e.showLoading=!1,e.$message({message:"新建成功",type:"success"}),e.$emit("serveSuccess"),e.createNewBrandObj={},e.$refs.newBrand.resetFields()}).catch(function(t){e.showLoading=!1,e.$message.error(t)})},emitLogoUrl:function(e){console.log(e),this.createNewBrandObj.logoUrl=e},emitImgUrl:function(e){console.log(e),this.createNewBrandObj.imgUrl=e},updateNewBrand:function(){this.updateBrandServe()},updateBrandServe:function(){var e=this;this.showLoading=!0;var t=l()({},this.createNewBrandObj);this.createNewBrandObj.orderSeq?t.orderSeq=+this.createNewBrandObj.orderSeq:t.orderSeq=999,Object(c.k)(t).then(function(t){e.showLoading=!1,e.$message({message:"更新成功",type:"success"}),e.$emit("updateEnd"),e.createNewBrandObj={},e.$refs.newBrand.resetFields()}).catch(function(t){e.showLoading=!1,e.$message.error(t)})},orderSeqChange:function(e){o()(Number(e))?e&&Number(e)<1?this.createNewBrandObj.orderSeq=1:Number(e)>999&&(this.createNewBrandObj.orderSeq=999):this.createNewBrandObj.orderSeq=""},querySearch:function(e,t){var a=this;e?(this.inputText=e,Object(c.i)({categoryTwoId:this.inputParentId,word:e}).then(function(e){a.showLoading=!1,e.data.forEach(function(e){e.value=e.brandName}),a.currentSearchData=e.data,t(e.data)}).catch(function(e){t([]),a.$message.error(e)})):t([])},handleSelect:function(e){e&&(this.createNewBrandObj=e)},handleInput:function(e){this.inputText&&this.inputText!==this.setObj.brandName&&(this.createNewBrandObj=s()(this.setObj,{brandName:this.inputText,id:this.setObj.id,categoryTwoId:this.setObj.categoryTwoId,imgUrl:"",logoUrl:"",searchWords:"",brandDescribe:""}))}},computed:{dialogTitle:function(){return"update"===this.type?"编辑品牌":"新增品牌"}},props:{showNewBrandDialog:{type:Boolean,default:!1},inputParentId:{type:Number},type:{type:String,default:"create"},setObj:{type:Object}},watch:{showNewBrandDialog:function(e){e&&"update"===this.type&&(this.createNewBrandObj=l()({},this.setObj))}},components:{Loading:d.a,imgUp:u.a}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"newBrand"},[a("el-dialog",{attrs:{title:e.dialogTitle,visible:e.showNewBrandDialog,"close-on-click-modal":!1,"before-close":e.cancelNewBrandDialog},on:{"update:visible":function(t){e.showNewBrandDialog=t}}},[a("el-form",{ref:"newBrand",attrs:{model:e.createNewBrandObj,rules:e.createNewBrandObjrules}},[a("el-form-item",{attrs:{label:"品牌名称","label-width":e.formLabelWidth,prop:"brandName"}},[a("el-autocomplete",{attrs:{placeholder:"请输入品牌名称","fetch-suggestions":e.querySearch},on:{select:e.handleSelect,blur:e.handleInput},model:{value:e.createNewBrandObj.brandName,callback:function(t){e.$set(e.createNewBrandObj,"brandName","string"==typeof t?t.trim():t)},expression:"createNewBrandObj.brandName"}}),e._v(" "),a("el-tag",{attrs:{type:"danger"}},[e._v("搜索联想词出现说明品牌重复")])],1),e._v(" "),a("el-form-item",{attrs:{label:"品牌logo","label-width":e.formLabelWidth,required:""}},[a("el-tag",{attrs:{type:"danger"}},[e._v("建议尺寸：150*150 px  （根据UI提供尺寸标注）")]),e._v(" "),a("imgUp",{attrs:{type:"movable",inputObj:{index:e.parentId,imgUrl:e.createNewBrandObj.logoUrl}},on:{emiturl:e.emitLogoUrl}})],1),e._v(" "),a("el-form-item",{attrs:{label:"品牌专区大图","label-width":e.formLabelWidth,required:""}},[a("el-tag",{attrs:{type:"danger"}},[e._v("建议尺寸：336*345 px  （根据UI提供尺寸标注）")]),e._v(" "),a("imgUp",{attrs:{type:"movable",inputObj:{index:e.parentId,imgUrl:e.createNewBrandObj.imgUrl}},on:{emiturl:e.emitImgUrl}})],1),e._v(" "),a("el-form-item",{attrs:{label:"是否显示","label-width":e.formLabelWidth}},[a("el-radio",{attrs:{label:1},model:{value:e.createNewBrandObj.status,callback:function(t){e.$set(e.createNewBrandObj,"status",t)},expression:"createNewBrandObj.status"}},[e._v("是")]),e._v(" "),a("el-radio",{attrs:{label:0},model:{value:e.createNewBrandObj.status,callback:function(t){e.$set(e.createNewBrandObj,"status",t)},expression:"createNewBrandObj.status"}},[e._v("否")])],1),e._v(" "),a("el-form-item",{attrs:{label:"排序","label-width":e.formLabelWidth,prop:"orderSeq"}},[a("el-input",{attrs:{placeholder:"请输入排序,不填默认999"},on:{change:e.orderSeqChange},model:{value:e.createNewBrandObj.orderSeq,callback:function(t){e.$set(e.createNewBrandObj,"orderSeq",e._n("string"==typeof t?t.trim():t))},expression:"createNewBrandObj.orderSeq"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"品牌描述","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:e.createNewBrandObj.brandDescribe,callback:function(t){e.$set(e.createNewBrandObj,"brandDescribe","string"==typeof t?t.trim():t)},expression:"createNewBrandObj.brandDescribe"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"搜索词","label-width":e.formLabelWidth}},[a("el-input",{attrs:{type:"textarea",autosize:"",placeholder:"请输入内容"},model:{value:e.createNewBrandObj.searchWords,callback:function(t){e.$set(e.createNewBrandObj,"searchWords","string"==typeof t?t.trim():t)},expression:"createNewBrandObj.searchWords"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:e.cancelNewBrandDialog}},[e._v("取 消")]),e._v(" "),"update"===e.type?a("el-button",{attrs:{type:"primary"},on:{click:e.updateNewBrand}},[e._v("确 定")]):a("el-button",{attrs:{type:"primary"},on:{click:e.submitNewBrand}},[e._v("确 定")])],1)],1),e._v(" "),a("Loading",{directives:[{name:"show",rawName:"v-show",value:e.showLoading,expression:"showLoading"}]})],1)},staticRenderFns:[]},g=a("VU/8")(b,h,!1,null,null,null);t.a=g.exports},oH0K:function(e,t){}});