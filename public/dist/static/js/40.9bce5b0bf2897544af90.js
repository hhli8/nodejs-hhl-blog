webpackJsonp([40],{uxHk:function(e,t){},vcAU:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("voil"),o=a("iIbE"),n={props:["visible","handleClose","options","callback","countryOptions"],data:function(){var e=function(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";""===t?a(new Error(""+r)):a()};return{dataForm:{warehouseName:"",warehouseCode:"",countryName:"",firstPrice:"",increasePrices:""},rules:{warehouseName:[{required:!0,validator:function(t,a,r){return e(t,a,r,"请选择海外仓库")},trigger:"blur"}],warehouseCode:[{required:!0,validator:function(t,a,r){return e(t,a,r,"请输入仓库代码")},trigger:"blur"}],countryName:[{required:!0,validator:function(t,a,r){return e(t,a,r,"请选择仓库所属国")},trigger:"blur"}],firstPrice:[{required:!0,validator:function(t,a,r){return e(t,a,r,"请输入首重价")},trigger:"blur"}],increasePrices:[{required:!0,validator:function(t,a,r){return e(t,a,r,"请输入续重价")},trigger:"blur"}]}}},methods:{onChooseWarehouse:function(e,t){this.options.map(function(a){a.wareHouseCode===e&&(t.warehouseCode=a.wareHouseCode,t.warehouseName=a.wareHouseName)})},saveFreight:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;Object(o.n)(t.dataForm).then(function(e){t.$message.success("新增成功"),t.callback()}).catch(function(e){t.$message.error(e)})})}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-dialog",{attrs:{title:"新增",visible:e.visible,"before-close":this.handleClose},on:{"update:visible":function(t){e.visible=t}}},[a("el-form",{ref:"dataForm",staticStyle:{width:"80%","margin-left":"8%"},attrs:{"label-position":"left","label-width":"150px",model:e.dataForm,rules:e.rules}},[a("el-form-item",{attrs:{label:"海外仓库:",prop:"warehouseName"}},[a("el-select",{attrs:{placeholder:"请选择货仓",width:"100%"},on:{change:function(t){return e.onChooseWarehouse(t,e.dataForm)}},model:{value:e.dataForm.warehouseName,callback:function(t){e.$set(e.dataForm,"warehouseName",t)},expression:"dataForm.warehouseName"}},e._l(e.options,function(e,t){return a("el-option",{key:t,attrs:{label:e.wareHouseName,value:e.wareHouseCode}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"仓库代码:",prop:"warehouseCode"}},[a("el-input",{attrs:{placeHolder:"请输入代码"},model:{value:e.dataForm.warehouseCode,callback:function(t){e.$set(e.dataForm,"warehouseCode",t)},expression:"dataForm.warehouseCode"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"仓库所属国:",prop:"countryName"}},[a("el-select",{attrs:{placeholder:"请选择货仓",width:"100%"},model:{value:e.dataForm.countryName,callback:function(t){e.$set(e.dataForm,"countryName",t)},expression:"dataForm.countryName"}},e._l(e.countryOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.name}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"首重价(元/0.5kg):",prop:"firstPrice"}},[a("el-input",{attrs:{placeHolder:"请输入首重价",maxlength:20,oninput:"this.value = (this.value.match(/^\\d*(\\.?\\d{0,2})/g)[0]) || null"},model:{value:e.dataForm.firstPrice,callback:function(t){e.$set(e.dataForm,"firstPrice",t)},expression:"dataForm.firstPrice"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"续重价(元/0.5kg):",prop:"increasePrices"}},[a("el-input",{attrs:{placeHolder:"请输入续重价",maxlength:20,oninput:"this.value = (this.value.match(/^\\d*(\\.?\\d{0,2})/g)[0]) || null"},model:{value:e.dataForm.increasePrices,callback:function(t){e.$set(e.dataForm,"increasePrices",t)},expression:"dataForm.increasePrices"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:this.handleClose}},[e._v("取消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.saveFreight("dataForm")}}},[e._v("保存")])],1)],1)],1)},staticRenderFns:[]};var s=a("VU/8")(n,i,!1,function(e){a("wK2u")},"data-v-214fefcd",null).exports,l={name:"freight",components:{Loading:r.a,AddFreightModal:s},data:function(){return{showLoading:!1,tabledata:[],options:[],countryOptions:[],queryParams:{currentPage:1,pageSize:20},totalSize:0,visible:!1}},created:function(){this.getCountryDictionary(),this.getDict4PLWarehousList(),this.getXxFreightConfigList()},methods:{indexMethod:function(e){return e+1+(this.queryParams.currentPage-1)*this.queryParams.pageSize},getCountryDictionary:function(){var e=this;Object(o.d)().then(function(t){e.countryOptions=t.dataList})},getDict4PLWarehousList:function(){var e=this;Object(o.e)(this.queryParams).then(function(t){e.options=t.dataList}).catch(function(t){e.$message.error(t)})},getXxFreightConfigList:function(){var e=this;this.showLoading=!0,Object(o.l)(this.queryParams).then(function(t){e.showLoading=!1,e.totalSize=t.totalSize||0,e.tabledata=t.dataList}).catch(function(t){e.showLoading=!1,e.$message.error(t)})},addFreight:function(){this.visible=!0},handleClose:function(){this.visible=!1},handleSizeChange:function(e){this.queryParams.pageSize=e,this.getXxFreightConfigList()},handleCurrentChange:function(e){this.queryParams.currentPage=e,this.getXxFreightConfigList()},onChooseWarehouse:function(e,t){this.options.map(function(a){a.wareHouseCode===e&&(t.warehouseCode=a.wareHouseCode,t.warehouseName=a.wareHouseName)})},saveSigleData:function(e){var t=this;Object(o.o)({id:e.id,warehouseCode:e.warehouseCode,warehouseName:e.warehouseName,firstPrice:e.firstPrice,increasePrices:e.increasePrices,countryName:e.countryName}).then(function(e){t.$message.success("保存成功"),t.getXxFreightConfigList()}).catch(function(e){t.$message.error(e)})},deleteSigleData:function(e){var t=this;this.$confirm("确定删除当前数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"error"}).then(function(){Object(o.b)({id:e}).then(function(e){t.$message.error("删除成功"),t.getXxFreightConfigList()}).catch(function(e){t.$message.error(e)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},callback:function(){this.handleClose(),this.getXxFreightConfigList()}}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"app-container freight"},[a("div",{staticClass:"operation-container m-header"},[a("span",[e._v("运费配置")]),e._v(" "),a("el-button",{staticClass:"fr",attrs:{type:"primary"},on:{click:e.addFreight}},[e._v("新增")])],1),e._v(" "),a("el-table",{staticClass:"lists",attrs:{data:e.tabledata}},[a("el-table-column",{attrs:{width:"180",label:"序号",type:"index",fixed:"",index:e.indexMethod}}),e._v(" "),a("el-table-column",{attrs:{prop:"warehouseName",label:"转运海外仓库"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择"},on:{change:function(a){return e.onChooseWarehouse(a,t.row)}},model:{value:t.row.warehouseName,callback:function(a){e.$set(t.row,"warehouseName",a)},expression:"scope.row.warehouseName"}},e._l(e.options,function(e,t){return a("el-option",{key:t,attrs:{label:e.wareHouseName,value:e.wareHouseCode}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"countryName",label:"仓库所属国"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.row.countryName,callback:function(a){e.$set(t.row,"countryName",a)},expression:"scope.row.countryName"}},e._l(e.countryOptions,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.name}})}))]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"warehouseCode",label:"仓库代码"}}),e._v(" "),a("el-table-column",{attrs:{prop:"firstPrice",label:"首重价(元/0.5kg)","show-overflow-tooltip":""},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{size:"medium",placeholder:"请输入首重价",maxlength:20,oninput:"this.value = (this.value.match(/^\\d*(\\.?\\d{0,2})/g)[0]) || null"},model:{value:t.row.firstPrice,callback:function(a){e.$set(t.row,"firstPrice",a)},expression:"scope.row.firstPrice"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"increasePrices",label:"续重价(元/0.5kg)"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-input",{attrs:{placeholder:"请输入续重价",maxlength:20,oninput:"this.value = (this.value.match(/^\\d*(\\.?\\d{0,2})/g)[0]) || null"},model:{value:t.row.increasePrices,callback:function(a){e.$set(t.row,"increasePrices",a)},expression:"scope.row.increasePrices"}})]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary"},on:{click:function(a){e.saveSigleData(t.row)}}},[e._v("保存")]),e._v(" "),a("el-button",{attrs:{type:"danger"},on:{click:function(a){e.deleteSigleData(t.row.id)}}},[e._v("删除")])]}}])})],1),e._v(" "),a("el-pagination",{staticClass:"pagination",attrs:{"current-page":e.queryParams.currentPage,"page-sizes":[20,30,40,50],"page-size":e.queryParams.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.totalSize},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}}),e._v(" "),a("AddFreightModal",{attrs:{visible:e.visible,handleClose:e.handleClose,options:e.options,callback:e.callback,countryOptions:e.countryOptions}}),e._v(" "),a("Loading",{directives:[{name:"show",rawName:"v-show",value:e.showLoading,expression:"showLoading"}]})],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(e){a("uxHk")},"data-v-66aa0cca",null);t.default=u.exports},wK2u:function(e,t){}});