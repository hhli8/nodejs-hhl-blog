webpackJsonp([1],{"5NM+":function(e,t){},QS4b:function(e,t){},TmNZ:function(e,t){},TrSm:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Xxa5"),n=a.n(r),i=a("exGp"),o=a.n(i),s=a("vLgD"),l=a("mw3O"),c=a.n(l);function u(e){return Object(s.a)({url:"/upload/uploadPic",method:"post",data:e})}var d={name:"",components:{},props:{},data:function(){return{issueOptions:[],allQuestionData:[],pageSize:10,totalSize:40,currentPage:1,totalCategorySize:40,currentCategoryPage:1,issueId:0,keyword:"",optionLoading:!1,issueName:0,allQuestionLoading:!1,questionDialogVisible:!1,EditCategoryDialogVisible:!1,AddCategoryDialogVisible:!1,replaceIssueDialogVisible:!1,fileUploadLoading:!1,QuestionformLabelAlign:{id:"",title:"",content:"",issueClass:"",sort:9,topic:0},categoryformLabelAlign:{id:"",issueName:"",icon:""},replaceformLabelAlign:{presentName:"",presentCls:"",replaCls:""},questionEditrules:{title:[{required:!0,message:"请输入问题标题",trigger:"blur"},{max:26,message:"标题最多输入26个字!",trigger:"blur"}],content:[{required:!0,message:"请输入解决方案",trigger:"blur"}],issueClass:[{required:!0,message:"请选择问题分类",trigger:"blur"}]},AddCategoryRules:{issueName:[{required:!0,message:"请输入分类标题",trigger:"blur"},{max:6,message:"标题最多输入6个字!",trigger:"blur"}]},iconUploadUrl:"http://localhost:8088/vain/api/upload/uploadPic",currentEditCategory:{}}},computed:{editCategoryArr:function(){return this.issueOptions.filter(function(e){return 1===e.status&&0!==e.id})},canUseCategoryArr:function(){return this.issueOptions.filter(function(e){return 1===e.status})},categoryCanEditArr:function(){return this.issueOptions.filter(function(e){return 0!==e.id})}},created:function(){this.handlerGetIssueList(),this.handlerGetIssueClassList(1)},methods:{issueOptionChange:function(e,t){var a=this;this.issueId=e;var r=this.canUseCategoryArr.filter(function(e){return e.id===a.issueId});console.log(r),r&&r.length?this.issueName=r[0].issueName:this.issueName="",this.currentPage=1,this.handlerGetIssueList()},resetEditForm:function(e,t){this.$refs[e].resetFields(),this[t]=!1,"EditForm"===e?this.QuestionformLabelAlign={id:"",title:"",content:"",issueClass:"",sort:9,topic:""}:"EditCategoryForm"===e?(this.categoryformLabelAlign={id:"",issueName:"",icon:""},this.currentCategoryPage=1):"replaceCategoryForm"===e&&(this.replaceformLabelAlign={presentName:"",presentCls:"",replaCls:""})},submitEditForm:function(e,t){var a,r=this;this.$refs[e].validate((a=o()(n.a.mark(function a(i){var o,s;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!i){a.next=19;break}if("EditForm"!==e){a.next=6;break}return a.next=4,r.handlerEditIssue(r.QuestionformLabelAlign);case 4:a.next=16;break;case 6:if("EditCategoryForm"!==e){a.next=11;break}return a.next=9,r.handlerEditIssueClass(r.categoryformLabelAlign);case 9:a.next=16;break;case 11:if("replaceCategoryForm"!==e){a.next=16;break}return o=r.replaceformLabelAlign.presentCls,s=r.replaceformLabelAlign.replaCls,a.next=16,r.handlerReplaceIssue(o,s);case 16:r.resetEditForm(e,t),a.next=21;break;case 19:return console.log("error submit!!"),a.abrupt("return",!1);case 21:case"end":return a.stop()}},a,r)})),function(e){return a.apply(this,arguments)}))},handlerIconUpload:function(e){var t=this,a=e.file,r=new FormData;r.append("file",a),console.log("handlerIconUpload",a),u(r).then(function(e){var a=e.data;t.categoryformLabelAlign.icon=a,console.log(t.categoryformLabelAlign)}).catch(function(e){console.log(e)})},handlerCategoryIconUpload:function(e){var t=this,a=e.file,r=new FormData;r.append("file",a),console.log("handlerCategoryIconUpload",e),u(r).then(function(e){var a=e.data;t.categoryCanEditArr.forEach(function(e,r){e.id===t.currentEditCategory.id&&t.$set(t.categoryCanEditArr[r],"icon",a)}),console.log(a)}).catch(function(e){console.log(e)})},handlerIconRemove:function(){this.categoryformLabelAlign.icon=""},handlerEditCategoryClose:function(e){this.currentCategoryPage=1,this.handlerGetIssueClassList(1),e()},handlerChangeCategoryEditStatus:function(e){var t,a=this;this.categoryCanEditArr.forEach((t=o()(n.a.mark(function t(r){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(r.id!==e.id){t.next=9;break}if(a.currentEditCategory=e,e.isEdit=!e.isEdit,e.isEdit){t.next=7;break}return t.next=6,a.handlerEditIssueClass(e);case 6:a.EditCategoryDialogVisible=!1;case 7:t.next=10;break;case 9:r.isEdit=!1;case 10:case"end":return t.stop()}},t,a)})),function(e){return t.apply(this,arguments)}))},handlerChangeCategoryStatus:function(e){var t=this;return o()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(1!==e.status){a.next=5;break}return a.next=3,t.handlerNoUseCategory(e.id);case 3:a.next=7;break;case 5:return a.next=7,t.handlerEditIssueClass({id:e.id,status:1},!0);case 7:case"end":return a.stop()}},a,t)}))()},handlerChangeCategorySearchCould:function(e){var t=this;return o()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(1!==e.searchCould){a.next=5;break}return a.next=3,t.handlerHiddenCategory(e.id);case 3:a.next=7;break;case 5:return a.next=7,t.handlerEditIssueClass({id:e.id,searchCould:1},!0);case 7:case"end":return a.stop()}},a,t)}))()},handlerEditQuestion:function(e){if(console.log(e),e)for(var t in this.QuestionformLabelAlign)this.QuestionformLabelAlign.hasOwnProperty(t)&&(this.QuestionformLabelAlign[t]=e[t]);else this.QuestionformLabelAlign={id:"",title:"",content:"",issueClass:"",sort:9,topic:0};this.questionDialogVisible=!0},handlerNoUseQuestion:function(e){var t=this;console.log(e),1===e.status?this.$confirm("停用此问题后，前端不再显示，是否停用？","停用",{confirmButtonText:"停用",cancelButtonText:"取消",type:"warning"}).then(o()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.handlerEditIssue({id:e.id,status:0});case 2:case"end":return a.stop()}},a,t)}))):0===e.status&&this.handlerEditIssue({id:e.id,status:1})},handlerDeleteQuestion:function(e){var t=this;this.$confirm("删除后无法恢复，是否删除？","删除问题",{confirmButtonText:"删除",cancelButtonText:"取消",type:"warning"}).then(o()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.handlerEditIssue({id:e.id,status:0});case 2:case"end":return a.stop()}},a,t)})))},handlerEditCategory:function(e){var t=this;return o()(n.a.mark(function a(){var r;return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(e)for(r in t.categoryformLabelAlign)t.categoryformLabelAlign.hasOwnProperty(r)&&(t.categoryformLabelAlign[r]=e[r]);else t.categoryformLabelAlign={id:"",issueName:"",icon:""};return a.next=3,t.handlerGetIssueClassList();case 3:t.EditCategoryDialogVisible=!0;case 4:case"end":return a.stop()}},a,t)}))()},handlerAddCategory:function(){this.AddCategoryDialogVisible=!0},handlerNoUseCategory:function(e){var t=this;this.$confirm("停用此分类后，前端不再显示，是否停用？","停用",{confirmButtonText:"停用",cancelButtonText:"取消",type:"warning"}).then(o()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.handlerEditIssueClass({id:e,status:0},!0);case 2:t.$message({type:"success",message:"操作成功!"});case 3:case"end":return a.stop()}},a,t)}))).catch(function(){t.$message({type:"info",message:"已取消操作"})})},handlerHiddenCategory:function(e){var t=this;return o()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:t.$confirm("隐藏此分类后，搜索不再展示此分类下所有问题，是否隐藏？","隐藏",{confirmButtonText:"隐藏",cancelButtonText:"取消",type:"warning"}).then(o()(n.a.mark(function a(){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,t.handlerEditIssueClass({id:e,searchCould:0},!0);case 2:t.$message({type:"success",message:"操作成功!"});case 3:case"end":return a.stop()}},a,t)}))).catch(function(){t.$message({type:"info",message:"已取消操作"})});case 1:case"end":return a.stop()}},a,t)}))()},handlerExportData:function(){var e=this;this.$confirm("您是否要导出数据?","导出数据",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(o()(n.a.mark(function t(){return n.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.handlerExportQuestionList();case 2:e.$message({type:"success",message:"操作成功!"});case 3:case"end":return t.stop()}},t,e)}))).catch(function(){e.$message({type:"info",message:"已取消操作"})})},handlerQuestionFileUpload:function(e){var t,a=this,r=e.file,n=new FormData;n.append("file",r),this.fileUploadLoading=!0,(t=n,Object(s.a)({url:"help/issueExcelTo.json",method:"post",data:t})).then(function(e){console.log(e),a.$refs.excelRef.clearFiles(),a.$message({type:"success",message:"文件导入成功!"}),a.fileUploadLoading=!1}).catch(function(e){console.log(e),a.fileUploadLoading=!1,a.$refs.excelRef.clearFiles(),a.$message({type:"error",message:"文件导入失败"})})},handlerGetIssueClassList:function(e){var t=this;this.optionLoading=!0;var a,r={};return e||(r={currentPage:this.currentCategoryPage,pageNum:10}),(a=r,Object(s.a)({url:"help/issueClassList.json",method:"post",data:c.a.stringify(a)})).then(function(e){e.dataList.unshift({id:0,issueName:"热门问题",status:1,sort:1}),t.issueOptions=e.dataList.map(function(e){return e.isEdit=!1,e}),t.totalCategorySize=e.totalSize,t.currentCategoryPage=e.currentPage,t.optionLoading=!1,console.log("issueOptions",e)}).catch(function(e){t.optionLoading=!1,console.log(e)})},handlerEditIssueClass:function(e,t){var a,r=this;return(a=e,Object(s.a)({url:"help/editIssueClass.json",method:"post",data:a,header:{"Content-Type":"application/json"}})).then(function(e){r.handlerGetIssueClassList(1),t&&r.handlerGetIssueList(),console.log(e)}).catch(function(e){console.log(e)})},handlerGetIssueList:function(){var e,t=this;return this.allQuestionLoading=!0,(e={currentPage:this.currentPage,keyword:this.keyword,cls:this.issueId,pageNum:10},Object(s.a)({url:"help/issueList.json",method:"post",data:c.a.stringify(e)})).then(function(e){t.allQuestionData=e.dataList,t.totalSize=e.totalSize,t.currentPage=e.currentPage,t.allQuestionLoading=!1}).catch(function(e){t.allQuestionLoading=!1,console.log(e)})},handlerEditIssue:function(e){var t,a=this;return(t=e,Object(s.a)({url:"help/editIssue.json",method:"post",data:t,header:{"Content-Type":"application/json"}})).then(function(e){console.log(e),a.$message({type:"success",message:"操作成功!"}),a.handlerGetIssueList()}).catch(function(e){a.$message({type:"info",message:"操作失败"}),console.log(e)})},handlerExportQuestionList:function(){var e,t=this;return(e={keyword:this.keyword,cls:this.issueId,status:1},Object(s.a)({url:"help/issueExcelFrom.json",method:"post",responseType:"blob",data:c.a.stringify(e)})).then(function(e){var a=new Blob([e],{type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document;charset=utf-8"}),r=document.createElement("a"),n=window.URL.createObjectURL(a);r.href=n;var i="客服问题汇总";t.issueName&&(i="客服问题_"+t.issueName),t.keyword&&(i+="_"+t.keyword),r.download=i+".xls",document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(n)})},handlerReplaceIssue:function(e,t){var a,r=this;return(a={presentCls:e,replaCls:t},Object(s.a)({url:"help/replaIssueClass.json",method:"post",data:c.a.stringify(a)})).then(function(e){r.handlerGetIssueClassList()})}}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-container",{staticClass:"allQuestion"},[a("el-header",[a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:4}},[a("el-input",{attrs:{placeholder:"请输入关键字","suffix-icon":"el-icon-search",clearable:""},on:{change:e.handlerGetIssueList},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}})],1),e._v(" "),a("el-col",{attrs:{span:4}},[a("el-select",{attrs:{placeholder:"请选择",loading:e.optionLoading},on:{change:e.issueOptionChange},model:{value:e.issueName,callback:function(t){e.issueName=t},expression:"issueName"}},e._l(e.canUseCategoryArr,function(e){return a("el-option",{key:e.id,attrs:{label:e.issueName,value:e.id}})}))],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(t){e.handlerEditCategory("")}}},[e._v("编辑分类")]),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(t){e.handlerEditQuestion("")}}},[e._v("添加问题")]),e._v(" "),a("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(t){e.handlerAddCategory("")}}},[e._v("添加分类")])],1),e._v(" "),a("el-col",{attrs:{span:5}},[a("el-upload",{ref:"excelRef",staticClass:"excelUploadBox",attrs:{action:"localhost:8088/xxyp-manager/help/issueExcelTo.json",accept:" application/vnd.openxmlformats-officedocument.spreadsheetml.sheet, application/vnd.ms-excel","show-file-list":!1,limit:1,"http-request":e.handlerQuestionFileUpload}},[a("el-button",{attrs:{icon:"el-icon-download",loading:e.fileUploadLoading}},[e._v("导入")])],1),e._v(" "),a("el-button",{attrs:{icon:"el-icon-upload2"},on:{click:e.handlerExportData}},[e._v("导出")])],1)],1)],1),e._v(" "),a("el-main",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.allQuestionLoading,expression:"allQuestionLoading"}],staticStyle:{width:"100%"},attrs:{data:e.allQuestionData,stripe:""}},[a("el-table-column",{attrs:{prop:"sort",label:"排列顺序",width:"100","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"title",label:"问题标题",width:"180","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"content",label:"解决方案","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"totalUv",label:"访问人数",width:"120",sortable:"","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"usedUv",label:"有用",width:"120",sortable:"","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"uselessUv",label:"无用",width:"120",sortable:"","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{fixed:"right",prop:"status",label:"操作","header-align":"center",align:"center",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(a){e.handlerEditQuestion(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:""},on:{click:function(a){e.handlerDeleteQuestion(t.row)}}}),e._v(" "),a("el-button",{attrs:{type:t.row.status?"danger":"success"},on:{click:function(a){e.handlerNoUseQuestion(t.row)}}},[e._v(e._s(t.row.status?"停用":"启用"))])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"prev, pager, next, jumper",total:e.totalSize},on:{"current-change":e.handlerGetIssueList,"update:currentPage":function(t){e.currentPage=t}}})],1),e._v(" "),a("el-dialog",{attrs:{visible:e.questionDialogVisible,width:"550px",center:""},on:{"update:visible":function(t){e.questionDialogVisible=t}}},[a("el-form",{ref:"EditForm",attrs:{"label-position":"left",rules:e.questionEditrules,"label-width":"100px",model:e.QuestionformLabelAlign}},[a("el-form-item",{attrs:{label:"问题标题",prop:"title",placeholder:"请填写问题标题"}},[a("el-input",{model:{value:e.QuestionformLabelAlign.title,callback:function(t){e.$set(e.QuestionformLabelAlign,"title",t)},expression:"QuestionformLabelAlign.title"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"解决方案",prop:"content",placeholder:"请填写解决方案"}},[a("el-input",{attrs:{type:"textarea",rows:4},model:{value:e.QuestionformLabelAlign.content,callback:function(t){e.$set(e.QuestionformLabelAlign,"content",t)},expression:"QuestionformLabelAlign.content"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"问题分类",prop:"issueClass"}},[a("el-select",{attrs:{placeholder:"请选择问题分类",loading:e.optionLoading},model:{value:e.QuestionformLabelAlign.issueClass,callback:function(t){e.$set(e.QuestionformLabelAlign,"issueClass",t)},expression:"QuestionformLabelAlign.issueClass"}},e._l(e.editCategoryArr,function(e){return a("el-option",{key:e.id,attrs:{label:e.issueName,value:e.id}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"标题排序",prop:"sort"}},[a("el-select",{attrs:{placeholder:"默认为9,1为在搜索结果页展示第一位"},model:{value:e.QuestionformLabelAlign.sort,callback:function(t){e.$set(e.QuestionformLabelAlign,"sort",t)},expression:"QuestionformLabelAlign.sort"}},e._l(9,function(e){return a("el-option",{key:e,attrs:{value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"加入热门问题"}},[a("el-switch",{attrs:{"active-value":1,"inactive-value":0,"active-text":"将此问题加入热门问题","active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:e.QuestionformLabelAlign.topic,callback:function(t){e.$set(e.QuestionformLabelAlign,"topic",t)},expression:"QuestionformLabelAlign.topic"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.resetEditForm("EditForm","questionDialogVisible")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitEditForm("EditForm","questionDialogVisible")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.EditCategoryDialogVisible,width:"900px",center:"","before-close":e.handlerEditCategoryClose},on:{"update:visible":function(t){e.EditCategoryDialogVisible=t}}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.optionLoading,expression:"optionLoading"}],staticStyle:{width:"100%"},attrs:{data:e.categoryCanEditArr,stripe:""}},[a("el-table-column",{attrs:{prop:"sort",label:"排列顺序",width:"100","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?a("el-select",{model:{value:t.row.sort,callback:function(a){e.$set(t.row,"sort",a)},expression:"scope.row.sort"}},e._l(9,function(e){return a("el-option",{key:e,attrs:{value:e}})})):a("div",[e._v(e._s(t.row.sort))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"issueName",label:"分类名称",width:"180","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?a("el-input",{model:{value:t.row.issueName,callback:function(a){e.$set(t.row,"issueName",a)},expression:"scope.row.issueName"}}):a("div",[e._v(e._s(t.row.issueName))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"图标",width:"190","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.isEdit?a("el-upload",{ref:"categoryImgUpload",staticClass:"categoryImg-uploader",attrs:{action:e.iconUploadUrl,accept:".jpg,.jpeg,.png","http-request":e.handlerCategoryIconUpload,limit:1,"show-file-list":!1}},[t.row.icon?a("img",{staticClass:"serviceIcon",attrs:{src:t.row.icon}}):a("i",{staticClass:"el-icon-plus service-uploader-icon"})]):t.row.icon?a("img",{staticClass:"serviceIcon",attrs:{src:t.row.icon}}):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"修改名称",width:"100","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:t.row.isEdit?"success":"danger"},on:{click:function(a){e.handlerChangeCategoryEditStatus(t.row)}}},[e._v(e._s(t.row.isEdit?"确定":"修改"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"是否停用",width:"100","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:1===t.row.status?"danger":"success"},on:{click:function(a){e.handlerChangeCategoryStatus(t.row)}}},[e._v(e._s(t.row.status?"停用":"启用"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"searchCould",label:"是否隐藏",width:"100","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:1===t.row.searchCould?"danger":"success"},on:{click:function(a){e.handlerChangeCategorySearchCould(t.row)}}},[e._v(e._s(t.row.searchCould?"隐藏":"显示"))])]}}])})],1),e._v(" "),a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"center"}},[a("el-pagination",{attrs:{"current-page":e.currentCategoryPage,"page-size":e.pageSize,layout:"prev, pager, next, jumper",total:e.totalCategorySize},on:{"current-change":e.handlerGetIssueClassList,"update:currentPage":function(t){e.currentCategoryPage=t}}})],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.AddCategoryDialogVisible,width:"550px",center:""},on:{"update:visible":function(t){e.AddCategoryDialogVisible=t}}},[a("el-form",{ref:"EditCategoryForm",attrs:{"label-position":"left","label-width":"100px",rules:e.AddCategoryRules,model:e.categoryformLabelAlign}},[a("el-form-item",{attrs:{label:"问题标题",prop:"issueName",placeholder:"请填写问题标题"}},[a("el-input",{model:{value:e.categoryformLabelAlign.issueName,callback:function(t){e.$set(e.categoryformLabelAlign,"issueName",t)},expression:"categoryformLabelAlign.issueName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"icon",prop:"icon"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:e.iconUploadUrl,accept:".jpg,.jpeg,.png","http-request":e.handlerIconUpload,limit:1,"list-type":"picture-card","on-remove":e.handlerIconRemove}},[a("el-button",{attrs:{type:"primary",size:"mini"}},[e._v(e._s(e.categoryformLabelAlign.icon?"重新上传":"上传"))]),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.resetEditForm("EditCategoryForm","AddCategoryDialogVisible")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitEditForm("EditCategoryForm","AddCategoryDialogVisible")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.replaceIssueDialogVisible,width:"550px",center:""},on:{"update:visible":function(t){e.replaceIssueDialogVisible=t}}},[a("el-form",{ref:"replaceCategoryForm",attrs:{"label-position":"left","label-width":"100px",model:e.replaceformLabelAlign}},[a("el-form-item",{attrs:{label:"当前分类",prop:"presentName"}},[a("el-input",{attrs:{readonlyreadonly:""},model:{value:e.replaceformLabelAlign.presentName,callback:function(t){e.$set(e.replaceformLabelAlign,"presentName",t)},expression:"replaceformLabelAlign.presentName"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"被替换分类",prop:"replaCls"}},[a("el-select",{attrs:{placeholder:"请选择被替换分类"},model:{value:e.replaceformLabelAlign.replaCls,callback:function(t){e.$set(e.replaceformLabelAlign,"replaCls",t)},expression:"replaceformLabelAlign.replaCls"}},e._l(e.editCategoryArr,function(e){return a("el-option",{key:e.id,attrs:{label:e.issueName,value:e.id}})}))],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.resetEditForm("replaceCategoryForm","replaceIssueDialogVisible")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitEditForm("replaceCategoryForm","replaceIssueDialogVisible")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var g={name:"",components:{},props:{},data:function(){return{tableData:[],pageSize:20,totalPage:2,totalSize:40,currentPage:1,serviceLoading:!1,serviceformLabelAlign:{id:"",serviceTitle:"",serviceUrl:"",icon:"",sort:""},ServiceEditrules:{serviceTitle:[{required:!0,message:"请输入问题标题",trigger:"blur"},{max:6,message:"标题最多输入6个字!",trigger:"blur"}],serviceUrl:[{required:!0,message:"请输入服务地址",trigger:"blur"}]},EditServiceDialogVisible:!1,iconUploadUrl:"http://localhost:8088/vain/api/upload/uploadPic"}},computed:{uploadIconArr:function(){return[{url:this.serviceformLabelAlign.icon}]}},created:function(){this.hanlderGetServiceList()},methods:{handleCurrentChange:function(e){this.handlerGetIssueList({currentPage:e})},handlerEditServiceClose:function(e){this.$refs.ServiceForm.resetFields(),this.$refs.serviceUpload.clearFiles(),this.EditServiceDialogVisible=!1,e()},resetEditForm:function(e,t){this.serviceformLabelAlign={id:"",serviceTitle:"",serviceUrl:"",icon:"",sort:""},this.$refs[e].resetFields(),this.$refs.serviceUpload.clearFiles(),this[t]=!1},submitEditForm:function(e,t){var a,r=this;this.$refs[e].validate((a=o()(n.a.mark(function a(i){return n.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!i){a.next=8;break}return a.next=3,r.handlerEditService(r.serviceformLabelAlign);case 3:r.$refs[e].resetFields(),r.$refs.serviceUpload.clearFiles(),r[t]=!1,a.next=10;break;case 8:return console.log("error submit!!"),a.abrupt("return",!1);case 10:case"end":return a.stop()}},a,r)})),function(e){return a.apply(this,arguments)}))},handlerIconUploadError:function(e){this.$message.error(e)},handlerIconUpload:function(e){var t=this;console.log(e);var a=e.file,r=new FormData;r.append("file",a),console.log("handlerIconUpload",a),u(r).then(function(e){var a=e.data;t.serviceformLabelAlign.icon=a,console.log(t.categoryformLabelAlign)}).catch(function(e){console.log(e)})},handlerIconRemove:function(){this.serviceformLabelAlign.icon=""},handleEditServiceLabelAlign:function(e){if(this.serviceformLabelAlign={id:"",serviceTitle:"",serviceUrl:"",icon:"",sort:""},e)for(var t in this.serviceformLabelAlign)this.serviceformLabelAlign.hasOwnProperty(t)&&(this.serviceformLabelAlign[t]=e[t]);this.EditServiceDialogVisible=!0},hanlderGetServiceList:function(){var e,t=this;return this.serviceLoading=!0,Object(s.a)({url:"help/serviceList.json",method:"post",data:e}).then(function(e){t.tableData=e.dataList,t.pageSize=e.pageSize,t.totalPage=e.totalPage,t.totalSize=e.totalSize,t.currentPage=e.currentPage,t.serviceLoading=!1,console.log(e)}).catch(function(e){t.serviceLoading=!1,t.$message.error(e)})},handlerEditService:function(e){var t,a=this;return(t=e,Object(s.a)({url:"help/editService.json",method:"post",data:t})).then(function(e){console.log(e),a.$message({type:"success",message:"操作成功!"})}).catch(function(e){a.$message.error(e)})}}},f={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"selfService"},[a("el-container",[a("el-header",[a("el-button",{attrs:{type:"success",icon:"el-icon-plus"},on:{click:function(t){e.handleEditServiceLabelAlign("")}}},[e._v("添加自助问题")])],1),e._v(" "),a("el-main",[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.serviceLoading,expression:"serviceLoading"}],staticStyle:{width:"100%"},attrs:{stripe:"",data:e.tableData}},[a("el-table-column",{attrs:{prop:"sort",label:"排序",width:"180","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceName",label:"服务名称",width:"180","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceTitle",label:"页面标题","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"serviceUrl",label:"url","header-align":"center",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作","header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleEditServiceLabelAlign(t.row)}}},[e._v("编辑")])]}}])})],1)],1),e._v(" "),a("div",{staticClass:"pagination-container"},[a("el-pagination",{attrs:{background:"","current-page":e.currentPage,"page-size":e.pageSize,layout:"prev, pager, next, jumper",total:e.totalSize},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t}}})],1)],1),e._v(" "),a("el-dialog",{attrs:{visible:e.EditServiceDialogVisible,width:"600px",center:"","before-close":e.handlerEditServiceClose},on:{"update:visible":function(t){e.EditServiceDialogVisible=t}}},[a("el-form",{ref:"ServiceForm",attrs:{"label-position":"left",rules:e.ServiceEditrules,"label-width":"100px",model:e.serviceformLabelAlign}},[a("el-form-item",{attrs:{label:"服务名称",prop:"serviceTitle",placeholder:"请输入服务名称"}},[a("el-input",{model:{value:e.serviceformLabelAlign.serviceTitle,callback:function(t){e.$set(e.serviceformLabelAlign,"serviceTitle",t)},expression:"serviceformLabelAlign.serviceTitle"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"URL",prop:"serviceUrl",placeholder:"请输入跳转链接"}},[a("el-input",{model:{value:e.serviceformLabelAlign.serviceUrl,callback:function(t){e.$set(e.serviceformLabelAlign,"serviceUrl",t)},expression:"serviceformLabelAlign.serviceUrl"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"icon",prop:"icon",placeholder:"请填写问题标题"}},[a("el-upload",{ref:"serviceUpload",staticClass:"service-uploader",attrs:{action:e.iconUploadUrl,accept:".jpg,.jpeg,.png","http-request":e.handlerIconUpload,limit:1,"on-remove":e.handlerIconRemove,"on-error":e.handlerIconUploadError}},[e.serviceformLabelAlign.icon?a("img",{staticClass:"serviceIcon",attrs:{src:e.serviceformLabelAlign.icon}}):a("i",{staticClass:"el-icon-plus service-uploader-icon"}),e._v(" "),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("只能上传jpg/png文件，且不超过500kb")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"更改排序",prop:"sort"}},[a("el-select",{model:{value:e.serviceformLabelAlign.sort,callback:function(t){e.$set(e.serviceformLabelAlign,"sort",t)},expression:"serviceformLabelAlign.sort"}},e._l(9,function(e){return a("el-option",{key:e,attrs:{value:e}})}))],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.resetEditForm("ServiceForm","EditServiceDialogVisible")}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.submitEditForm("ServiceForm","EditServiceDialogVisible")}}},[e._v("确 定")])],1)],1)],1)},staticRenderFns:[]};var m={name:"",components:{allQuestion:a("VU/8")(d,p,!1,function(e){a("5NM+")},"data-v-5b07aac9",null).exports,selfService:a("VU/8")(g,f,!1,function(e){a("TmNZ")},"data-v-8cd4d4f6",null).exports},props:{},data:function(){return{componentId:"allQuestion"}},computed:{},mouted:function(){},methods:{changeComponentId:function(e){this.componentId=["allQuestion","selfService"][e-1]}}},h={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"customer"},[a("el-container",[a("el-aside",{attrs:{width:"200px"}},[a("el-menu",{attrs:{"default-active":"1"}},[a("el-menu-item",{attrs:{index:"1"},on:{click:function(t){e.changeComponentId(1)}}},[a("i",{staticClass:"el-icon-menu"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("所有问题")])]),e._v(" "),a("el-menu-item",{attrs:{index:"2"},on:{click:function(t){e.changeComponentId(2)}}},[a("i",{staticClass:"el-icon-document"}),e._v(" "),a("span",{attrs:{slot:"title"},slot:"title"},[e._v("自助服务")])])],1)],1),e._v(" "),a("el-container",[a("el-main",[a(e.componentId,{tag:"component"})],1)],1)],1)],1)},staticRenderFns:[]};var v=a("VU/8")(m,h,!1,function(e){a("QS4b")},"data-v-64daa02c",null);t.default=v.exports}});