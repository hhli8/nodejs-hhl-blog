webpackJsonp([61],{jObz:function(t,e){},tQpc:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=o("bOdI"),n=o.n(a),i=o("woOf"),l=o.n(i),s=o("sVqv"),r={name:"pageView",data:function(){return{title:"",strStatus:"",status:"",statusArr:[{label:"状态",value:""},{label:"展示",value:1},{label:"停用",value:0}],pageNum:10,currentPage:1,totalSize:0,tableData:[],editSort:{show:!1,sort:""},index:-1,form:{id:"",title:"",url:"",sort:"",status:0,show:!1},layoutTitle:""}},methods:{onAddOrModify:function(t,e){this.form.show=!0,t?(this.layoutTitle="pageview修改",l()(this.form,t),console.log(1)):(this.layoutTitle="pageview添加",this.form={id:"",title:"",url:"",sort:"",status:0,show:!0},this.environmentJudgeUrl())},environmentJudgeUrl:function(){this.form.url="https://sinamall.hourl.cn/sinamall/home/"},changVal:function(t){this.status=t},getPageView:function(){var t=this;Object(s.k)({pageNum:this.pageNum,currentPage:this.currentPage},{title:this.title,status:this.status}).then(function(e){t.tableData=e.dataList,t.totalSize=e.totalSize})},savePageView:function(t){var e=this;Object(s.r)(t).then(function(){e.getPageView(),e.alertMessage("保存成功")})},onConfrimSave:function(){this.form.show=!1,this.savePageView(this.form)},onSearch:function(){this.getPageView()},toggleButtonDisplay:function(t,e){t[e]=1===t[e]?0:1,this.savePageView(n()({id:t.id},e,t[e]))},onToggleStatus:function(t){this.toggleButtonDisplay(t,"status")},indexMethod:function(t){return t+1+(this.currentPage-1)*this.pageNum},onEditSort:function(t,e){this.editSort={show:!0,sort:t.sort+""},this.index=e},onSaveEditSort:function(){this.form=this.tableData[this.index],this.form.sort=Number(this.editSort.sort),this.editSort.show=!1,this.savePageView(this.form)},alertMessage:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"success";this.$message({type:e,message:t})},typeToggle:function(t){return 1===t?"warning":"success"},handleSizeChange:function(t){this.pageNum=t,this.getPageView()},handleCurrentChange:function(t){this.currentPage=t,this.getPageView()}},created:function(){this.getPageView()}},u={render:function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"pageview app-container"},[o("el-row",{attrs:{gutter:20}},[o("el-col",{attrs:{span:2}},[o("el-button",{attrs:{type:"primary"},on:{click:function(e){t.onAddOrModify(void 0)}}},[t._v("添加")])],1),t._v(" "),o("el-col",{attrs:{span:3}},[o("el-input",{attrs:{placeholder:"名称"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),o("el-col",{attrs:{span:3}},[o("el-select",{on:{change:t.changVal},model:{value:t.strStatus,callback:function(e){t.strStatus=e},expression:"strStatus"}},t._l(t.statusArr,function(t){return o("el-option",{key:t.label,attrs:{label:t.label,value:t.value}})}))],1),t._v(" "),o("el-col",{attrs:{span:2}},[o("el-button",{attrs:{type:"success"},on:{click:t.onSearch}},[t._v("查询")])],1)],1),t._v(" "),o("div",{staticClass:"table-main"},[o("el-table",{attrs:{data:t.tableData}},[o("el-table-column",{attrs:{align:"center",label:"编号",width:"80",type:"index",index:t.indexMethod}}),t._v(" "),o("el-table-column",{attrs:{prop:"title",label:"标题",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"url",label:"链接",align:"center"}}),t._v(" "),o("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n          "+t._s(1===e.row.status?"展示":"停用")+"\n        ")]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"展示顺序",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{size:"mini",icon:"el-icon-edit"},on:{click:function(o){t.onEditSort(e.row,e.$index)}}}),o("span",[t._v(t._s(e.row.sort))])]}}])}),t._v(" "),o("el-table-column",{attrs:{label:"操作",align:"center",width:"360"},scopedSlots:t._u([{key:"default",fn:function(e){return[o("el-button",{attrs:{type:t.typeToggle(e.row.status)},on:{click:function(o){t.onToggleStatus(e.row)}}},[t._v("\n            "+t._s(1===e.row.status?"停用":"展示")+"\n          ")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:function(o){t.onAddOrModify(e.row,e.$index)}}},[t._v("编辑")])]}}])})],1)],1),t._v(" "),o("el-pagination",{staticClass:"pagination",attrs:{"current-page":t.currentPage,"page-sizes":[10,20,30,40],"page-size":t.pageNum,layout:"total, sizes, prev, pager, next, jumper",total:t.totalSize},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),o("el-dialog",{attrs:{title:"修改排序",visible:t.editSort.show},on:{"update:visible":function(e){t.$set(t.editSort,"show",e)}}},[o("el-form",[o("el-form-item",{attrs:{label:"排序值:","label-width":"120px"}},[o("el-input",{attrs:{type:"number"},model:{value:t.editSort.sort,callback:function(e){t.$set(t.editSort,"sort",e)},expression:"editSort.sort"}}),t._v(" "),o("p",{staticStyle:{color:"red"}},[t._v("排序值越小越靠前")])],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.editSort.show=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.onSaveEditSort}},[t._v("确 定")])],1)],1),t._v(" "),o("el-dialog",{attrs:{title:t.layoutTitle,visible:t.form.show,center:""},on:{"update:visible":function(e){t.$set(t.form,"show",e)}}},[o("el-form",{attrs:{model:t.form,"label-width":"80px"}},[o("el-form-item",{attrs:{label:"标题"}},[o("el-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"链接地址"}},[o("el-input",{model:{value:t.form.url,callback:function(e){t.$set(t.form,"url",e)},expression:"form.url"}})],1),t._v(" "),o("el-form-item",{attrs:{label:"展示排序"}},[o("el-input",{model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1)],1),t._v(" "),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.form.show=!1}}},[t._v("取 消")]),t._v(" "),o("el-button",{attrs:{type:"primary"},on:{click:t.onConfrimSave}},[t._v("保 存")])],1)],1)],1)},staticRenderFns:[]};var c=o("VU/8")(r,u,!1,function(t){o("jObz")},"data-v-72debd92",null);e.default=c.exports}});